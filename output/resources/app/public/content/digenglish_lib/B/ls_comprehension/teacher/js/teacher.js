!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=20)}([function(e,t){e.exports=React},function(e,t){e.exports=mobx},function(e,t,n){e.exports=n(40)()},function(e,t){e.exports=mobxReact},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(7);function s(e){if(!e)return e;e.displayMode=""+e.displayMode=="2"?"2":"1";var t=e.thumb?e.thumb:"";return(t.startsWith("static/")||""===t)&&(t=t.endsWith("w.jpg")?"".concat("/content/digenglish_lib/","/images/default_member_w.jpg"):"".concat("/content/digenglish_lib/","/images/default_member_m.jpg")),e.thumb=t,e}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"pub_init",value:function(){var t=navigator.userAgent;e._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),e._tempBnd=document.createElement("div"),e._tempBnd.style.display="none",e._tempEl=document.createElement("div"),e._tempBnd.appendChild(e._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",function(t){document.body.appendChild(e._tempBnd)}):document.body.appendChild(e._tempBnd)}},{key:"pub_load",value:function(t,n,i,r,o,a){e._lesson=r,e._book=i,e._nextBook=o,e._prevBook=a,e._students=[],t&&t.forEach(function(t,n){e._students[n]=s(t)}),e._student=s(n)}},{key:"pub_reloadStudents",value:function(t){o.getStudents(function(n,i){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop();for(var r=0,o=n.length;r<o;r++)e.isDvlp?e._students[r]=s(n[r]):e._students[r]=s({id:n[r].id,name:n[r].name,thumb:n[r].defaultThumbnail,avatar:n[r].profileThumbnail,nickname:n[r].nickName,displayMode:n[r].displayMode,inited:!0}),e._students_inited.push(n[r].id);t()})}},{key:"pub_parseStyle",value:function(t){return e._tempEl.style.cssText=t,e._tempEl.style}},{key:"pub_initAudio",value:function(){e._common_audio=document.getElementById("common_audio"),e._ding_audio=document.getElementById("ding_audio"),e._dingend_audio=document.getElementById("dingend_audio"),e._btn_audio=document.getElementById("btn_audio"),e._correct_audio=document.getElementById("correct_audio"),e._wrong_audio=document.getElementById("wrong_audio"),e._topad_audio=document.getElementById("topad_audio"),e._goodjob_audio=document.getElementById("goodjob_audio"),e._btn_back_audio=document.getElementById("btn_back_audio"),e._btn_page_audio=document.getElementById("btn_page_audio"),e._card_audio=document.getElementById("card_audio"),e._popup_audio=document.getElementById("popup_audio"),e._flips_audio=document.getElementById("card_flips"),e._clock_audio=document.getElementById("clock_audio"),e._write_audio=document.getElementById("write_audio"),e._like_bubble_audio=document.getElementById("like_bubble"),e._all_btn_click_audio=document.getElementById("all_btn_click")}},{key:"pub_playAllBtnClick",value:function(){e._all_btn_click_audio&&(e._all_btn_click_audio.currentTime=0,e._all_btn_click_audio.play())}},{key:"pub_playLikeBubble",value:function(){e._like_bubble_audio&&(e._like_bubble_audio.currentTime=0,e._like_bubble_audio.play())}},{key:"pub_playWrite",value:function(){e._write_audio&&(e._write_audio.currentTime=0,e._write_audio.play())}},{key:"pub_playClock",value:function(){e._clock_audio&&(e._clock_audio.currentTime=4.5,e._clock_audio.play())}},{key:"pub_playFlips",value:function(){e._flips_audio&&(e._flips_audio.currentTime=0,e._flips_audio.play())}},{key:"pub_playPopup",value:function(){e._popup_audio&&(e._popup_audio.currentTime=0,e._popup_audio.play())}},{key:"pub_playCard",value:function(){e._card_audio&&(e._card_audio.currentTime=0,e._card_audio.play())}},{key:"pub_playBtnPage",value:function(){e._btn_page_audio&&(e._btn_page_audio.currentTime=0,e._btn_page_audio.play())}},{key:"pub_playBtnBack",value:function(){e._btn_back_audio&&(e._btn_back_audio.currentTime=0,e._btn_back_audio.play())}},{key:"pub_playGoodjob",value:function(){e._goodjob_audio&&(e._goodjob_audio.currentTime=0,e._goodjob_audio.play())}},{key:"pub_playDing",value:function(){e._ding_audio&&(e._ding_audio.currentTime=0,e._ding_audio.play())}},{key:"pub_playDingend",value:function(){e._dingend_audio&&(e._dingend_audio.currentTime=0,e._dingend_audio.play())}},{key:"pub_playToPad",value:function(){e._topad_audio&&(e._topad_audio.currentTime=0,e._topad_audio.play())}},{key:"pub_playBtnTab",value:function(){e._btn_audio&&(e._btn_audio.currentTime=0,e._btn_audio.play())}},{key:"pub_playCorrect",value:function(){e._correct_audio&&(e._correct_audio.currentTime=0,e._correct_audio.play())}},{key:"pub_playWrong",value:function(){e._wrong_audio&&(e._wrong_audio.currentTime=0,e._wrong_audio.play())}},{key:"pub_playStudentBubble",value:function(){var e=document.getElementById("student_bubble");e&&(e.currentTime=0,e.paused&&e.play())}},{key:"pub_stop",value:function(){null!=e._common_audio.onended&&e._common_audio.onended.call(e._common_audio,new Event("ended")),e._common_audio.oncanplaythrough=null,isNaN(e._common_audio.duration)||e._common_audio.paused||e._common_audio.pause()}},{key:"pub_play",value:function(t,n){e.pub_stop(),t=r.nteString(t,"");var i=r.nteString(e._common_audio.getAttribute("src"),"");if(""!==t||""!==i){""!==t&&i!==t&&(e._common_audio.src=t);var o=function t(i){e._common_audio.onended=null,null!==n&&n(!0),e._common_audio.removeEventListener("error",t)};e._common_audio.onended=function(t){e._common_audio.onended=null,null!==n&&n(!!t),e._common_audio.removeEventListener("error",o)},e._common_audio.addEventListener("error",o),isNaN(e._common_audio.duration)?(e._common_audio.oncanplaythrough=function(t){0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.play(),e._common_audio.oncanplaythrough=null},e._common_audio.load()):(0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.oncanplaythrough=null,e._common_audio.play())}else null!=n&&n(!0)}},{key:"pub_set",value:function(t,n,i){e._isDvlp=n,e._lang=i,o.set(n)}},{key:"pub_addInitedStudent",value:function(t){for(var n=!0,i=0,r=e._students_inited.length;i<r;i++){e._students_inited[i]===t.id&&(n=!1)}n&&e._students_inited.push(t.id);var o=e._start_idx>0&&e._students.length>0&&e._students_inited.length>=e._students.length;return o&&(window.clearTimeout(e._start_idx),e._start_idx=-1),o}},{key:"pub_start",value:function(t){0===e._students.length||e._students_inited.length>=e._students.length?t():e._start_idx=window.setTimeout(t,2e3)}},{key:"pub_clear",value:function(){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop()}},{key:"isMobile",get:function(){return e._isMobile}},{key:"tempEl",get:function(){return e._tempEl}},{key:"students",get:function(){return e._students}},{key:"student",get:function(){return e._student}},{key:"lang",get:function(){return e._lang}},{key:"isDvlp",get:function(){return e._isDvlp}},{key:"data_url",get:function(){return e._data_url}},{key:"lesson",get:function(){return e._lesson}},{key:"book",get:function(){return e._book}},{key:"nextBook",get:function(){return e._nextBook}},{key:"prevBook",get:function(){return e._prevBook}}],(n=null)&&i(t.prototype,n),a&&i(t,a),e}();a._isMobile=!1,a._students=[],a._students_inited=[],a._student=null,a._lang="ko",a._isDvlp=!1,a._data_url="../data/",a._lesson="",a._book="",a._nextBook=!1,a._prevBook=!1,a._start_idx=-1,a.isStarted=!1,t.App=a},function(e,t){e.exports=_},function(e,t,n){"use strict";function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?l(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),f=n(1),h=n(3),y=function(e){function t(e){var n;return r(this,t),(n=a(this,c(t).call(this,e))).m_pID=-1,n._inited=n._inited.bind(l(n)),n._onClick=n._onClick.bind(l(n)),n}return u(t,d.Component),s(t,[{key:"_inited",value:function(e){var t=this;!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",function(n){if(!(t.m_pID>=0)){if(t.m_pID=n.pointerId,!t.props.disableCapture)try{e.setPointerCapture(t.m_pID)}catch(e){}t.props.onMouseDown&&t.props.onMouseDown(n)}}),e.addEventListener("pointerup",function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseUp&&t.props.onMouseUp(n)}}),e.addEventListener("pointerleave",function(n){if(t.props.disableCapture){if(t.m_pID!==n.pointerId)return;try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1}t.props.onMouseLeave&&t.props.onMouseLeave(n)}),e.addEventListener("pointercancel",function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseLeave&&t.props.onMouseLeave(n)}}))}},{key:"_onClick",value:function(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}},{key:"componentDidUpdate",value:function(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}]),t}();_([f.observable],y.prototype,"m_pID",void 0);var v=function(e){function t(e){var n;return r(this,t),(n=a(this,c(t).call(this,e))).m_on=!1,n.m_on=!0===e.on,n}return u(t,y),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),d.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n},this.props.children)}}]),t}();_([f.observable],v.prototype,"m_on",void 0),v=_([h.observer],v),t.ToggleBtn=v;var b=function(e){function t(e){return r(this,t),a(this,c(t).call(this,e))}return u(t,v),s(t,[{key:"play",value:function(){var e=this;this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,function(t){e.m_on&&(e.m_on=!1,e.props.onPause&&e.props.onPause(t))}))}},{key:"_onClick",value:function(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),i(c(t.prototype),"_onClick",this).call(this,e)}}]),t}();_([f.action],b.prototype,"play",null),_([f.action],b.prototype,"_onClick",null),b=_([h.observer],b),t.AudioBtn=b;var g=function(e){function t(e){var n;return r(this,t),(n=a(this,c(t).call(this,e))).m_on=!1,n.m_on=!0===e.on,n}return u(t,y),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),d.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n,src:this.props.src,useMap:this.props.useMap})}}]),t}();_([f.observable],g.prototype,"m_on",void 0),g=_([h.observer],g),t.ImgBtn=g},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=!1;t.set=function(e){o=e},t.finishContentPage=function(){if(!o)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,n){if(!o)try{window.tsoc_o.startStudentReportProcess(e,t,n)}catch(e){}},t.hideStudentReportUI=function(){if(!o)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!o)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!o)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!o)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!o)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,n){if(!o)try{window.psoc_o.uploadStudentReport(e,t,n)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||o)if(6!==e||o)if(7!==e||o){if(8===e)if(o)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(o)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,n){var i={type:t,data:n};if(o)try{window.top.tsoc_o.sendPADToID(e,i)}catch(e){}else try{window.tsoc_o.sendPADToID(e,i)}catch(e){}},t.sendPAD=function(e,t){var n={type:e,data:t};if(o)try{window.top.tsoc_o.sendAll(n)}catch(e){}else try{window.tsoc_o.sendAll(n)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){var n={type:e,data:t};if(o)try{window.opener.tsoc_o.sendTeacher(n)}catch(e){}else try{window.psoc_o.sendTeacher(n)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e){try{window.psoc_o.uploadImageToServer(e)}catch(e){}},t.getStudents=function(e){if(o)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(){if(!o)try{window.psoc_o.startCamera()}catch(e){}},t.startCustomCamera=function(e){if(!o)try{window.psoc_o.startCustomCamera(e)}catch(e){}},t.stopCamera=function(){if(!o)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(){if(!o)try{window.psoc_o.switchCamera()}catch(e){}},t.startVideoRecord=function(){if(!o)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!o)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!o)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.getPreviewResult=function(e){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewResult(function(e){n||(n=!0,t(e))},e),r.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewDmsResult=function(e){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewDmsResult(function(e){n||(n=!0,t(e))},e),r.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewResultClass=function(e){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewResultClass(function(e){n||(n=!0,t(e))},e),r.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewResultMember=function(e){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewResultMember(function(e){n||(n=!0,t(e))},e),r.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.wait=function(e){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){r.delay(t,e)}));case 1:case"end":return t.stop()}},t)}))},t.getTimeStr=function(e,t){var n=Math.round(t/1e3),i=Math.round(e/1e3),r=Math.floor(i/60),o=Math.floor(r/60),s="";return r%=60,o>0||n>=3600?(s=o+":",s+=r>=10?r+":":"0"+r+":"):n>=600?s+=r>=10?r+":":"0"+r+":":s=r+":",s+=(i%=60)>=10?i:"0"+i},t.getBounds=function(e){var t={left:0,top:0,width:0,height:0};if(!e)return t;try{var n=e.getBoundingClientRect();t.left=n.left,t.top=n.top,t.width=n.width,t.height=n.height}catch(e){}var i=e.ownerDocument,r=i.body,o=i.documentElement;t.left=t.left-(o.clientLeft||r.clientLeft||0),t.top=t.top-(o.clientTop||r.clientTop||0);var s=i.defaultView;return t.left+=s.pageXOffset||o.scrollLeft||r.scrollLeft,t.top+=s.pageYOffset||o.scrollTop||r.scrollTop,t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24);Date.now||(Date.now=function(){return(new Date).getTime()});var r=0;function o(){return s().toString(36)}function s(){var e=Date.now();return e>r?r=e:r+=1,r}t.getUnic=o,t.getUnicNum=s,t.getUnicUrl=function(e){if(!e)return"";var t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+o():t+"?t="+o()),t},t.nteUInt=function(e,t){if(i.isNullOrUndefined(e))return t;if(i.isNumber(e))return isNaN(e)||e<0?t:Math.round(e);var n=parseInt(String(e),10);return isNaN(n)||n<0?t:n},t.nteInt=function(e,t){if(i.isNullOrUndefined(e))return t;if(i.isNumber(e))return Math.round(e);var n=parseInt(String(e),10);return isNaN(n)?t:n},t.nteFloat=function(e,t){if(i.isNullOrUndefined(e))return t;if(i.isNumber(e))return e;var n=parseFloat(String(e));return isNaN(n)?t:n},t.nteString=function(e,t){return i.isNullOrUndefined(e)?t:String(e)},t.nteBool=function(e,t){if(i.isNullOrUndefined(e))return t;if(i.isBoolean(e))return e;var n=String(e);return"true"===n||"false"!==n&&t},t.intToHTMLcolor=function(e){var t=e-0,n=(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16);return n="#000000".substring(0,7-n.length)+n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){var t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}var n=[];return n.push(e),n}return[]},t.getDateStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",t=new Date,n=t.getFullYear(),i=t.getMonth()+1,r=t.getDate();return n+e+(i<10?"0"+i:""+i)+e+(r<10?"0"+r:""+r)},t._toStringTimestamp=function(e){var t=e.getFullYear(),n=e.getMonth()+1+"";parseInt(n,10)<10&&(n="0"+n);var i=e.getDate()+"";return parseInt(i,10)<10&&(i="0"+i),t+"-"+n+"-"+i+" "+e.toTimeString().substr(0,8)}},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},_=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d,f=n(0),h=n(5),y=n(1),v=n(4),b=n(7),g=n(34),w=n(10);!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.COMPLETE=3]="COMPLETE"}(d||(d={})),t.SENDPROG=d;var T=function(e){function t(){var e;return i(this,t),(e=s(this,c(t).call(this)))._result=[],e._returnUsers=[],e._returnUsersForQuiz=[],e._qnaReturns=[],e._uploadInclassReport=function(t){var n=e._data.quizs,i=[];n.forEach(function(e,n){var r=t.returns[n],o=w._toStringTimestamp(new Date(r.stime)),s=w._toStringTimestamp(new Date(r.etime));r&&e.tmq_seq&&i.push({std_cont_seq:e.tmq_seq,studentId:t.id,ans_tf:r.answer===e.answer?"1":"0",ans_submit:""+r.answer,ans_starttime:o,ans_endtime:s,sc_div1:e.SC_DIV1?e.SC_DIV1:"",sc_div2:e.SC_DIV2?e.SC_DIV2:"",sc_div3:e.SC_DIV3?e.SC_DIV3:"",sc_div4:e.SC_DIV4?e.SC_DIV4:"",files:null,ans_correct:""+e.answer,tab_index:""})}),i.length>0&&(console.log("inclassReport(LogFromContentTeacher): ",i),b.uploadInclassReport(i))},e.state.hasPreview=!1,e.state.questionProg=0,e.state.scriptProg=0,e.state.qnaProg=0,e.state.dialogueProg=0,e.actions.getData=function(){return e._data},e.actions.getResult=function(){return e._result},e.actions.gotoDirection=function(){return e._setViewDiv("direction")},e.actions.gotoNextBook=function(){b.sendLauncher(9,null)},e.actions.getReturnUsers=function(){return e._returnUsers},e.actions.clearReturnUsers=function(){e._returnUsers=[]},e.actions.getReturnUsersForQuiz=function(){return e._returnUsersForQuiz},e.actions.clearReturnUsersForQuiz=function(){e._returnUsersForQuiz=[]},e.actions.getQnaReturns=function(){return e._qnaReturns},e.actions.quizComplete=function(){e.state.questionProg=3},e.actions.clearQnaReturns=function(){e._returnUsers=[];for(var t=0;t<e._data.scripts.length;t++)e._qnaReturns[t]={num:0,users:[]};e.actions.setRetCnt(0)},e.actions.init=function(){if(e.state.scriptProg=0,e.state.qnaProg=0,e.state.dialogueProg=0,e._returnUsers=[],e.state.questionProg<3){e.state.questionProg=0,e._returnUsersForQuiz=[];for(var t=0;t<e._data.quizs.length;t++)e._result[t]={numOfCorrect:0,c1:0,u1:[],c2:0,u2:[],c3:0,u3:[]}}for(var n=0;n<e._data.scripts.length;n++)e._qnaReturns[n]={num:0,users:[]}},e}return l(t,g.TeacherContextBase),o(t,[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&"content"!==e&&h.delay(this.actions.init,300),a(c(t.prototype),"_setViewDiv",this).call(this,e)}},{key:"receive",value:function(e){if(a(c(t.prototype),"receive",this).call(this,e),11===e.type&&e.data){var n=e.data;if("quiz_return"===n.msgtype){if(2===this.state.questionProg){for(var i=n,r=-1,o=0;o<v.App.students.length;o++)if(v.App.students[o].id===i.id){r=o;break}var s=this._returnUsersForQuiz.indexOf(i.id);if(r>=0&&s<0){this._returnUsersForQuiz.push(i.id),b.addStudentForStudentReportType6(i.id),this.actions.setRetCnt(this._returnUsersForQuiz.length);for(var l=0;l<i.returns.length;l++)if(l<this._result.length){var u=this._data.quizs[l],p=i.returns[l],m=this._result[l];p.answer===u.answer&&m.numOfCorrect++,1===p.answer?(m.c1++,m.u1.push(i.id)):2===p.answer?(m.c2++,m.u2.push(i.id)):3===p.answer&&(m.c3++,m.u3.push(i.id))}this._uploadInclassReport(i)}}}else if("qna_return"===n.msgtype&&2===this.state.qnaProg){for(var _=n,d=-1,f=0;f<v.App.students.length;f++)if(v.App.students[f].id===_.id){d=f;break}var h=this._returnUsers.indexOf(_.id);if(d>=0&&h<0){for(var y=0;y<_.returns.length;y++){var g=_.returns[y];if(g<this._qnaReturns.length){var T=this._qnaReturns[g].users;T.indexOf(_.id)<0&&T.push(_.id),this._qnaReturns[g].num=T.length}}this._returnUsers.push(_.id),b.addStudentForStudentReportType6(_.id),this.actions.setRetCnt(this._returnUsers.length)}var E=[],O=w._toStringTimestamp(new Date(_.stime)),k=w._toStringTimestamp(new Date(_.etime)),P="qna;",S=this._data.scripts;_.returns.length>0&&_.returns.forEach(function(e,t){var n=S[e];n&&(P+="qna;"===P?n.seq+"|"+n.dms_eng:"ยง"+n.seq+"|"+n.dms_eng)}),E.push({std_cont_seq:0,studentId:_.id,ans_tf:0===_.returns.length?"0":"1",ans_submit:P,ans_starttime:O||"",ans_endtime:k||"",sc_div1:"",sc_div2:"",sc_div3:"",sc_div4:"",files:null,ans_correct:"",tab_index:"5"}),E.length>0&&(console.log("inclassReport(LogFromContentTeacher): ",E),b.uploadInclassReport(E))}}}},{key:"setData",value:function(e){return _(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,r,o,s,a,c,l,u,p,m,_,d,h,y,g,w,T,E;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=function(e,t,n){for(var i=0;i<n.length;i++)e.includes(n[i].textValue)||(e.push(n[i].textValue),t.push({sum:0,cnt:0,avg:0,txt:""}));for(var r=function(i){var r=n[i].textValue,o=n[i].avgPercent,s=e.findIndex(function(e){return e===r});t[s].sum+=o,t[s].cnt+=1,t[s].avg=Math.round(t[s].sum/t[s].cnt),t[s].txt=r},o=0;o<n.length;o++)r(o)},this._data=e,this.state.hasPreview=!0,i=[70,60,80],r=this._data.scripts,o=this._data.speakerA.name,s=this._data.speakerB.name,a=this._data.speakerC.name,this._data.speakerD||(this._data.speakerD={name:"",image_s:"",image_l:""}),this._data.speakerE||(this._data.speakerE={name:"",image_s:"",image_l:""}),c=this._data.speakerD.name,this._data.speakerE.name,l=0;l<this._data.quizs.length;l++)u=this._data.quizs[l],p=u.question.replace(/\<br\>/g," "),u.app_question=f.createElement(f.Fragment,null,p),u.app_preview=l<i.length?i[l]:-1,this._result[l]={numOfCorrect:0,c1:0,u1:[],c2:0,u2:[],c3:0,u3:[]};for(m=[],_=0;_<r.length;_++)(d=r[_]).sc_COD&&!v.App.isDvlp&&void 0!==d.sc_COD[0]&&m.push({evalCode:"2",vsFromData:"script",vsFromSeq:Number(d.sc_COD[0].codSeq)}),d.dms_speaker===o?d.roll="A":d.dms_speaker===s?d.roll="B":d.dms_speaker===a?d.roll="C":d.dms_speaker===c?d.roll="D":d.roll="E",this._qnaReturns[_]={num:0,users:[]};if(console.log("previewMsg~~~",m.length,m),0,g=[],w=[],v.App.isDvlp||"ko"!==v.App.lang){t.next=27;break}return t.next=22,b.getPreviewResultClass(m);case 22:if(h=t.sent,h.length>0)!function(){y=h.filter(function(e,t){return 6===e.mttSeq}),n(g,w,y),console.log("text_arr",g,"val_arr",w);for(var e=[],t=0;t<r.length;t++){var i=r[t];i.sc_COD&&e.push(i)}for(var o=0;o<e.length;o++)e[o].app_preview=w[o].avg;for(var s=function(t){var n=r.findIndex(function(n,i){return n.dms_seq===e[t].dms_seq});r[n].app_preview=e[t].app_preview},a=0;a<e.length;a++)s(a)}();else for(T=0;T<r.length;T++)r[T].app_preview=-1;t.next=28;break;case 27:for(E=0;E<r.length;E++)r[E].app_preview=0===E?80:2*E;case 28:case"end":return t.stop()}},t,this)}))}}]),t}();m([y.observable],T.prototype,"state",void 0),m([y.action],T.prototype,"_setViewDiv",null),t.TeacherContext=T;var E=new T;t.tContext=E;var O=f.createContext(E),k=O.Provider,P=O.Consumer;t.TeacherConsumer=P;var S=function(e){function t(){return i(this,t),s(this,c(t).apply(this,arguments))}return l(t,f.Component),o(t,[{key:"render",value:function(){return f.createElement(k,{value:E},this.props.children)}}]),t}();t.TeacherProvider=S,t.useTeacher=function(e){return function(t){return f.createElement(P,null,function(t){return f.createElement(e,Object.assign({},t))})}}},function(e,t){e.exports=ReactDraggable},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(0),m=function(e){function t(){return r(this,t),a(this,c(t).apply(this,arguments))}return l(t,p.Component),s(t,[{key:"render",value:function(){var e=this.props.percent;return p.createElement("div",{className:"stand_bar",style:{display:e<0?"none":""}},p.createElement("div",{className:"prog_bnd"},p.createElement("div",{className:"prog_bar",style:{width:e<0?"0%":e+"%"}})),p.createElement("div",{className:"data_percent"},e<0?"":e+"%"))}}]),t}();t.StandBar=m;var _=function(e){function t(){return r(this,t),a(this,c(t).apply(this,arguments))}return l(t,p.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.preview,i=e.result;return p.createElement("div",{className:t},p.createElement("span",{className:"title",style:{display:n<0?"none":""}},"Pre-class"),p.createElement("div",{className:"progress_bar",style:{display:n<0?"none":""}},p.createElement("span",{className:"colorA",style:{width:n+"%"}}),p.createElement("span",{className:"data_percent"},n,"%")),p.createElement("span",{className:"title",style:{display:i<0?"none":""}},"In-class"),p.createElement("div",{className:"progress_bar",style:{display:i<0?"none":""}},p.createElement("span",{className:"colorB",style:{width:i+"%"}}),p.createElement("span",{className:"data_percent"},i,"%")))}}]),t}();t.CorrectBar=_;var d=function(e){function t(){return r(this,t),a(this,c(t).apply(this,arguments))}return l(t,p.Component),s(t,[{key:"render",value:function(){return p.createElement(p.Fragment,null,p.createElement("div",{className:"progress_box"},p.createElement("span",{className:"title on"},"SOUND"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data on",style:{width:"30%"}}),p.createElement("span",{className:"data_percent on"},"30%")),p.createElement("span",{className:"title"},"MEANING"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data",style:{width:"60%"}}),p.createElement("span",{className:"data_percent"},"60%")),p.createElement("span",{className:"title"},"SPELLING"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data",style:{width:"50%"}}),p.createElement("span",{className:"data_percent"},"50%")),p.createElement("span",{className:"title"},"SENTENCE"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data",style:{width:"90%"}}),p.createElement("span",{className:"data_percent"},"90%"))))}}]),t}();t.Progress=d},function(e,t){e.exports=ReactIdSwiper},function(e,t,n){"use strict";function i(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var m,_=n(0),d=n(1),f=n(3),h=n(5),y=n(4);!function(e){e[e.INIT=0]="INIT",e[e.RUNNING=1]="RUNNING",e[e.PAUSE=2]="PAUSE"}(m||(m={}));var v=function(){function e(t){var n=this;a(this,e),this.m_runState=0,this.m_max=60,this.m_playSound=!0,this.start=function(){n.m_runState=1},this.reset=function(){n.m_runState=0},this.pause=function(){n.m_runState=2},this.m_max=t}return l(e,[{key:"setPlaySound",value:function(e){this.m_playSound=e}},{key:"setMax",value:function(e){this.m_max=e}},{key:"runState",get:function(){return this.m_runState}},{key:"isRunning",get:function(){return 1===this.m_runState}},{key:"max",get:function(){return this.m_max}},{key:"playSound",get:function(){return this.m_playSound}}]),e}();function b(e,t,n,i){var r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function g(e,t,n,i,r){var o;if(r-i>=360)o=["M",e,t,"m",-n,0,"a",n,n,0,"1",0,2*n,0,"a",n,n,0,"1",0,2*-n,0].join(" ");else{var s=r-i<=180?"0":"1",a=b(e,t,n,r),c=b(e,t,n,i);o=["M",a.x,a.y,"A",n,n,0,s,0,c.x,c.y,"L",e,t,"L",a.x,a.y].join(" ")}return o}p([d.observable],v.prototype,"m_runState",void 0),p([d.computed],v.prototype,"runState",null),p([d.observable],v.prototype,"m_max",void 0),p([d.computed],v.prototype,"max",null),p([d.action],v.prototype,"start",void 0),p([d.action],v.prototype,"reset",void 0),p([d.action],v.prototype,"pause",void 0),t.TimerState=v;var w=32,T=w,E=2*T,O=function(e){function t(e){var n;return a(this,t),(n=i(this,r(t).call(this,e))).m_runState=0,n.m_sec=0,n.m_stime=0,n.m_text="",n.m_d="",n._start=function(){n.m_sec=n.props.state.max,n.m_text=n._getTime(n.m_sec),n.m_d="",n.m_stime=Date.now(),n._run(0),n.props.onStart&&n.props.onStart()},n._run=function(e){if(n.props&&1===n.m_runState){var t=n.props.state.max,i=Date.now()-n.m_stime,r=t-Math.floor(i/1e3);n.m_sec!==r&&(n.m_text=n._getTime(r),0===r?n.props.state.playSound&&y.App.pub_playDingend():r<5?n.props.state.playSound&&y.App.pub_playDing():r>=5&&r<=10&&n.props.state.playSound&&y.App.pub_playClock()),n.m_sec=r,r>0?(n._drawArc(i),window.requestAnimationFrame(n._run)):(n._drawArc.cancel(),n.m_d=g(T,T,w,0,360),n.props.onComplete())}},n.m_text=n._getTime(n.props.state.max),n.m_d="",d.autorun(function(){if(n.props){var e=n.props.state,t=e.max;1===e.runState&&1!==n.m_runState?(n.m_runState=1,n._start()):0===e.runState&&(n.m_text=n._getTime(t),n.m_d=""),n.m_runState=e.runState}}),n._drawArc=h.throttle(function(e){if(n.props&&1===n.m_runState){var t=1e3*n.props.state.max,i=0;if(n.m_sec<=5){var r=e%1e3;i=0===e?0:0===r?1:r/1e3}else i=e/t;i*=360,n.m_d=g(T,T,w,0,i)}},50,{trailing:!0}),n}return o(t,_.Component),l(t,[{key:"_getTime",value:function(e){var t=Math.floor(e/60),n=e%60,i="";return i=t<10?"0"+t:""+t,i=n<10?i+":0"+n:i+":"+n}},{key:"render",value:function(){var e=this.m_sec<=5?"#f00":"#ff0";return _.createElement("div",{className:"q_timer",hidden:!this.props.view},_.createElement("svg",{width:E,height:E,viewBox:"0 0 "+E+" "+E},_.createElement("path",{fill:e,d:this.m_d})),_.createElement("div",{className:"m_text"},this.m_text))}}]),t}();p([d.observable],O.prototype,"m_text",void 0),p([d.observable],O.prototype,"m_d",void 0),O=p([f.observer],O),t.Timer=O;var k=-.5*Math.PI,P=function(e){function t(e){var n;return a(this,t),(n=i(this,r(t).call(this,e))).m_runState=0,n.m_sec=0,n.m_stime=0,n.m_r=0,n.m_view=!1,n._start=function(){n.m_sec=n.props.state.max,n.m_stime=Date.now(),n._run(0),n.props.onStart&&n.props.onStart()},n._run=function(e){if(n.props&&1===n.m_runState){var t=Date.now()-n.m_stime,i=n.props.state.max-Math.floor(t/1e3);n.m_sec!==i&&(n.m_sec=i,0===i?(n.props.state.playSound&&y.App.pub_playDingend(),n.props.onComplete()):i<=5&&n.props.state.playSound&&y.App.pub_playDing()),i>0?(n._drawArc(t%1e3),window.requestAnimationFrame(n._run)):n._drawArc(1e3)}},n._refCanvas=function(e){!n.m_canvas&&e&&(n.m_canvas=e,n.m_r=e.width/2,n.m_ctx=e.getContext("2d"))},n._onTransEnd=function(){n.props.view||(n.m_view=!1)},n.m_sec=n.props.state.max,n.m_view=e.view,d.autorun(function(){if(n.props){var e=n.props.state;if(1===e.runState&&1!==n.m_runState)n.m_runState=1,n._start();else if(0===e.runState&&0!==n.m_runState&&(n.m_sec=e.max,n.m_ctx)){var t=n.m_r;n.m_ctx.clearRect(0,0,2*t,2*t)}n.m_runState=e.runState}}),n._drawArc=h.throttle(function(e){if(n.m_canvas&&n.props&&1===n.m_runState){var t=2*Math.PI*e/1e3,i=n.m_r;n.m_ctx.clearRect(0,0,2*i,2*i),n.m_ctx.beginPath(),n.m_ctx.fillStyle="#5538EB",n.m_ctx.moveTo(i,i),n.m_ctx.arc(i,i,i,k,t+k),n.m_ctx.fill()}},50),n}return o(t,_.Component),l(t,[{key:"componentDidUpdate",value:function(e){e.view!==this.props.view&&this.props.view&&(this.m_view=!0)}},{key:"render",value:function(){return _.createElement("div",{className:"countdown2 "+(this.m_view?"":"hide")},_.createElement("div",{className:"countdown "+(this.props.view?"view":"hide"),onTransitionEnd:this._onTransEnd},_.createElement("canvas",{width:"206px",height:"206px",ref:this._refCanvas}),_.createElement("div",null,_.createElement("div",null,this.m_sec))))}}]),t}();p([d.observable],P.prototype,"m_sec",void 0),p([d.observable],P.prototype,"m_view",void 0),P=p([f.observer],P),t.CountDown2=P},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(11),s=n(18),a=function(e){var t=[],n=null,i=function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];t=r,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i},c=n(2);var l=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},u=n(19),p="object"==typeof self&&self&&self.Object===Object&&self,m=u.a||p||Function("return this")(),_=function(){return m.Date.now()},d=m.Symbol,f=Object.prototype,h=f.hasOwnProperty,y=f.toString,v=d?d.toStringTag:void 0;var b=function(e){var t=h.call(e,v),n=e[v];try{e[v]=void 0;var i=!0}catch(e){}var r=y.call(e);return i&&(t?e[v]=n:delete e[v]),r},g=Object.prototype.toString;var w=function(e){return g.call(e)},T="[object Null]",E="[object Undefined]",O=d?d.toStringTag:void 0;var k=function(e){return null==e?void 0===e?E:T:O&&O in Object(e)?b(e):w(e)};var P=function(e){return null!=e&&"object"==typeof e},S="[object Symbol]";var x=function(e){return"symbol"==typeof e||P(e)&&k(e)==S},C=NaN,N=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,I=/^0o[0-7]+$/i,D=parseInt;var j=function(e){if("number"==typeof e)return e;if(x(e))return C;if(l(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=l(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(N,"");var n=A.test(e);return n||I.test(e)?D(e.slice(2),n?2:8):R.test(e)?C:+e},B="Expected a function",M=Math.max,L=Math.min;var q=function(e,t,n){var i,r,o,s,a,c,u=0,p=!1,m=!1,d=!0;if("function"!=typeof e)throw new TypeError(B);function f(t){var n=i,o=r;return i=r=void 0,u=t,s=e.apply(o,n)}function h(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-u>=o}function y(){var e=_();if(h(e))return v(e);a=setTimeout(y,function(e){var n=t-(e-c);return m?L(n,o-(e-u)):n}(e))}function v(e){return a=void 0,d&&i?f(e):(i=r=void 0,s)}function b(){var e=_(),n=h(e);if(i=arguments,r=this,c=e,n){if(void 0===a)return function(e){return u=e,a=setTimeout(y,t),p?f(e):s}(c);if(m)return a=setTimeout(y,t),f(c)}return void 0===a&&(a=setTimeout(y,t)),s}return t=j(t)||0,l(n)&&(p=!!n.leading,o=(m="maxWait"in n)?M(j(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==a&&clearTimeout(a),u=0,i=c=r=a=void 0},b.flush=function(){return void 0===a?s:v(_())},b},F="Expected a function";var U=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError(F);return l(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),q(e,t,{leading:i,maxWait:t,trailing:r})},z={debounce:q,throttle:U},H=function(e){return z[e]},V=function(e){return"function"==typeof e},Q=function(){return"undefined"==typeof window};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function W(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,X(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,i["PureComponent"]),n=t,(r=[{key:"render",value:function(){return this.props.children}}])&&Y(n.prototype,r),o&&Y(n,o),t}();function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){function t(e){var n,r,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,c=ee(t).call(this,e),n=!c||"object"!==$(c)&&"function"!=typeof c?te(r):c,ie(te(n),"cancelHandler",function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)}),ie(te(n),"rafClean",function(){n.raf&&n.raf.cancel&&(n.raf.cancel(),n.raf=null)}),ie(te(n),"toggleObserver",function(e){var t=n.getElement();t&&n.resizeObserver[e]&&n.resizeObserver[e](t)}),ie(te(n),"getElement",function(){var e=n.props.querySelector;if(!Q()){if(e)return document.querySelector(e);var t=n.element&&Object(o.findDOMNode)(n.element);if(t)return t.parentElement}}),ie(te(n),"createUpdater",function(){return n.rafClean(),n.raf=a(function(e){var t=e.width,i=e.height,r=n.props.onResize;V(r)&&r(t,i),n.setState({width:t,height:i})}),n.raf}),ie(te(n),"createResizeHandler",function(e){var t=n.state,i=t.width,r=t.height,o=n.props,s=o.handleWidth,a=o.handleHeight;if(s||a){var c=n.createUpdater();e.forEach(function(e){var t=e&&e.contentRect||{},o=t.width,l=t.height,u=s&&i!==o||a&&r!==l;!n.skipOnMount&&u&&!Q()&&c({width:o,height:l}),n.skipOnMount=!1})}}),ie(te(n),"onRef",function(e){n.element=e}),ie(te(n),"getRenderType",function(){var e=n.props,t=e.render,r=e.children;return V(t)?"renderProp":V(r)?"childFunction":Object(i.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"}),ie(te(n),"getTargetComponent",function(){var e=n.props,t=e.render,r=e.children,o=e.nodeType,s=n.state,a={width:s.width,height:s.height};switch(n.getRenderType()){case"renderProp":return Object(i.cloneElement)(t(a),{key:"resize-detector"});case"childFunction":return Object(i.cloneElement)(r(a));case"child":return Object(i.cloneElement)(r,a);case"childArray":return r.map(function(e){return Object(i.cloneElement)(e,a)});default:return Object(i.createElement)(o)}});var l=e.skipOnMount,u=e.refreshMode,p=e.refreshRate,m=e.refreshOptions;n.state={width:void 0,height:void 0},n.skipOnMount=l,n.raf=null,n.element=null,n.unmounted=!1;var _=H(u);return n.resizeHandler=_?_(n.createResizeHandler,p,m):n.createResizeHandler,n.resizeObserver=new s.a(n.resizeHandler),n}var n,c,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,i["PureComponent"]),n=t,(c=[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return r.a.createElement(K,{ref:this.onRef},this.getTargetComponent())}}])&&J(n.prototype,c),l&&J(n,l),t}();re.propTypes={handleWidth:c.bool,handleHeight:c.bool,skipOnMount:c.bool,refreshRate:c.number,refreshMode:c.string,refreshOptions:Object(c.shape)({leading:c.bool,trailing:c.bool}),querySelector:c.string,onResize:c.func,render:c.func,children:c.any,nodeType:c.node},re.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,onResize:null,render:void 0,children:null,nodeType:"div"};var oe=re;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ce(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ce(this,le(o).apply(this,arguments))}var s,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(o,i.Component),s=o,(a=[{key:"render",value:function(){return r.a.createElement(oe,t,r.a.createElement(e,this.props))}}])&&ae(s.prototype,a),c&&ae(s,c),o}()};n.d(t,"withResizeDetector",function(){return pe});t.default=oe},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,i){return e[0]===t&&(n=i,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=2;var a=20,c=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function a(){n&&(n=!1,e()),i&&l()}function c(){o(a)}function l(){var e=Date.now();if(n){if(e-r<s)return;i=!0}else n=!0,i=!1,setTimeout(c,t);r=e}return l}(this.refresh.bind(this),a)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;c.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},m=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},_=b(0,0,0,0);function d(e){return parseFloat(e)||0}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+d(e["border-"+n+"-width"])},0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return _;var i=m(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=d(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=d(i.width),c=d(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=f(i,"left","right")+o),Math.round(c+s)!==n&&(c-=f(i,"top","bottom")+s)),!function(e){return e===m(e).document.documentElement}(e)){var l=Math.round(a+o)-t,u=Math.round(c+s)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return b(r.left,r.top,a,c)}var y="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof m(e).SVGGraphicsElement}:function(e){return e instanceof m(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return i?y(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):h(e):_}function b(e,t,n,i){return{x:e,y:t,width:n,height:i}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(){return function(e,t){var n,i,r,o,s,a,c,l=(i=(n=t).x,r=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),p(c,{x:i,y:r,width:o,height:s,top:r,right:i+o,bottom:s+r,left:i}),c);p(this,{target:e,contentRect:l})}}(),T=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),E="undefined"!=typeof WeakMap?new WeakMap:new n,O=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),i=new T(t,n,this);E.set(this,i)}}();["observe","unobserve","disconnect"].forEach(function(e){O.prototype[e]=function(){var t;return(t=E.get(this))[e].apply(t,arguments)}});var k=void 0!==r.ResizeObserver?r.ResizeObserver:O;t.a=k}).call(this,n(9))},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(9))},function(e,t,n){e.exports=n(21)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),r=n(0),o=n(11),s=n(4),a=n(7),c=n(28);i.setConfig({ErrorOverlay:function(e){return r.createElement("div",null)}});var l,u={clear:s.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML};l=n(29);var p=!1,m=l,_=m.default,d=m.AppProvider,f=m.appContext;u.set=function(e,t,n){s.App.pub_set(e,t,n),f.setData(e)},u.render=function(){s.App.pub_initAudio(),o.render(r.createElement(d,null,r.createElement(_,null)),document.getElementById("wrap"))},u.init=function(e,t,n,i,r){s.App.pub_load(e,null,t,n,i,r)},u.start=function(){p=!0,setTimeout(function(){return f.start()},500)},u.receive=function(e){if(4===e.type){var t=e.data;p?t&&t.id&&""!==t.id&&(s.App.isStarted?a.sendPADToID(t.id,0,null):a.sendPADToID(t.id,1,null)):s.App.pub_addInitedStudent(t)&&(p||(p=!0,f.start()))}else f.receive(e)},u.teachingTool=function(e){},n(51),e.app_o=u}).call(this,n(9))},function(e,t,n){"use strict";e.exports=n(23)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=n(0))&&"object"==typeof i&&"default"in i?i.default:i;t.AppContainer=function(e){return r.Children.only(e.children)},t.hot=function(){return function(e){return e}},t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t,n){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},r=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),c=i[n];n<o;c=i[++n])f(c)||!g(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(n,i){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),d(n)?i.showHidden=n:n&&t._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),u(i,e,i.depth)}function c(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function l(e,t){return e}function u(e,n,i){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return y(r)||(r=u(e,r,i)),r}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(h(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(E(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return p(n)}var l,g="",O=!1,k=["{","}"];(_(n)&&(O=!0,k=["[","]"]),E(n))&&(g=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(g=" "+RegExp.prototype.toString.call(n)),w(n)&&(g=" "+Date.prototype.toUTCString.call(n)),T(n)&&(g=" "+p(n)),0!==s.length||O&&0!=n.length?i<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=O?function(e,t,n,i,r){for(var o=[],s=0,a=t.length;s<a;++s)S(t,String(s))?o.push(m(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(m(e,t,n,i,r,!0))}),o}(e,n,i,a,s):s.map(function(t){return m(e,n,i,a,t,O)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,g,k)):k[0]+g+k[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,i,r,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),S(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(c.value)<0?(a=f(n)?u(e,c.value,null):u(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function _(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function f(e){return null===e}function h(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return g(e)&&"[object RegExp]"===O(e)}function g(e){return"object"==typeof e&&null!==e}function w(e){return g(e)&&"[object Date]"===O(e)}function T(e){return g(e)&&("[object Error]"===O(e)||e instanceof Error)}function E(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(v(o)&&(o=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var i=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=_,t.isBoolean=d,t.isNull=f,t.isNullOrUndefined=function(e){return null==e},t.isNumber=h,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=g,t.isDate=w,t.isError=T,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(26);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":"),[e.getDate(),P[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(27),t._extend=function(e,t){if(!t||!g(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(x&&e[x]){var t;if("function"!=typeof(t=e[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise(function(e,i){t=e,n=i}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(e,i){e?n(e):t(i)});try{e.apply(this,r)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),x&&Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=x,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(C,t,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(this,n(25))},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,l=[],u=!1,p=-1;function m(){u&&c&&(u=!1,c.length?l=c.concat(l):p=-1,l.length&&_())}function _(){if(!u){var e=a(m);u=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||u||a(_)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importHTML=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=function(e){if(e){var r=i.response;r&&r.body&&r.body.firstElementChild?t(r.body.firstElementChild):r&&r.documentElement?t(r.documentElement):n("error")}},i.onerror=function(e){n(e)},i.send(null)})},t.importLink=function(e,t){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=function(e){if(e){var n=i.response;t(n)}},i.onerror=function(e){n(e)},i.send(null)})}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=n(3),p=n(30);n(31),n(32);var m=n(33),_=n(12),d=n(12);t.AppProvider=d.TeacherProvider,t.appContext=d.tContext;var f=n(35),h=n(4),y=n(37),v=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,o(t).call(this,e))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.state,n=e.actions,i=t.viewDiv;return l.createElement(l.Fragment,null,l.createElement("div",{id:"preload_hidden",style:{opacity:0}},l.createElement("span",null,"๊ฐ๋๋ค๋ผs"),l.createElement("span",{style:{fontWeight:"bold"}},"๊ฐ๋๋ค๋ผ"),l.createElement("span",{className:"set"})," ",l.createElement("span",{className:"unlimit"})," ",l.createElement("span",{className:"start"}),l.createElement("span",{className:"time1"}),l.createElement("span",{className:"time2"})," ",l.createElement("span",{className:"time3"})),l.createElement("div",{className:"content-container"},l.createElement("div",{className:"content-wrapper",style:{left:("direction"===i?0:-1280)+"px"}},l.createElement("div",null,l.createElement(f.default,{className:"video-direction",view:"direction"===i,on:t.directionON,isTeacher:!0,video_url:"/content/digenglish_lib/direction/ls_comprehension.webp",video_frame:125,onEndStart:n.onDirectionEndStart,onEnd:n.onDirectionEnded},l.createElement("div",{className:"lesson"},h.App.lesson))),l.createElement("div",null,l.createElement(y.default,{view:"content"===i,state:t,actions:n})))),l.createElement(m.Navi,Object.assign({},t.navi,{onLeftClick:n.naviLeft,onRightClick:n.naviRight})))}}])&&i(n.prototype,a),c&&i(n,c),t}();v=c([u.observer],v);var b=_.useTeacher(function(e){return l.createElement(u.Observer,null,function(){return l.createElement(v,{state:e.state,actions:e.actions})})});t.default=p.hot(b)},function(e,t,n){t.hot=function(e){return e}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=n(1),p=n(3),m=n(6),_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r(this,o(t).call(this,e))).m_on=!1,n.m_isStarted=!1,n._onClick=function(e){n.m_on=!0},n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}},{key:"render",value:function(){var e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return l.createElement(l.Fragment,null,l.createElement("div",{id:"common_navi_left",className:e,style:t},l.createElement("div",null,l.createElement("div",{onClick:this._onClick},l.createElement(m.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),l.createElement(m.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),l.createElement("div",{id:"common_navi_right",className:e,style:t},l.createElement("div",null,l.createElement("div",{onClick:this._onClick},l.createElement(m.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),l.createElement(m.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}}])&&i(n.prototype,a),c&&i(n,c),t}();c([u.observable],_.prototype,"m_on",void 0),_=c([p.observer],_),t.Navi=_},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(4),c=n(7),l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},retCnt:0,numOfStudent:0},this.actions={onDirectionEndStart:function(){"direction"===t.state.viewDiv&&c.sendPAD(3,null)},onDirectionEnded:function(){"direction"===t.state.viewDiv&&t._setViewDiv("content"),a.App.isStarted=!0},setNaviView:function(e){t.state.navi.view=e},setNavi:function(e,n){t.state.navi.enableLeft=e,t.state.navi.enableRight=n},setNaviFnc:function(e,n){t._naviLeftFnc=e,t._naviRightFnc=n},naviLeft:function(){"direction"===t.state.viewDiv?c.sendLauncher(8,null):(a.App.pub_playBtnPage(),t._naviLeftFnc?t._naviLeftFnc():t._setViewDiv("direction"))},naviRight:function(){"direction"===t.state.viewDiv?(a.App.pub_playBtnPage(),t.state.directionON=!1):(a.App.pub_playBtnPage(),t._naviRightFnc?t._naviRightFnc():c.sendLauncher(9,null))},setRetCnt:function(e){e>t.state.numOfStudent&&(e=t.state.numOfStudent),t.state.retCnt=e},setNumOfStudent:function(e){t.state.numOfStudent=e}}}var t,n,r;return t=e,(n=[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&(a.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,c.sendLauncher(5,null),c.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=a.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,c.sendLauncher(6,null),c.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=e)}},{key:"start",value:function(){"direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=a.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,c.sendLauncher(5,null),c.sendPAD(1,null))}},{key:"receive",value:function(e){}},{key:"uploaded",value:function(e){}},{key:"notify",value:function(e){}},{key:"notifyRecorded",value:function(e){}},{key:"notifyVideoRecord",value:function(e){}}])&&i(t.prototype,n),r&&i(t,r),e}();o([s.observable],l.prototype,"state",void 0),o([s.action],l.prototype,"_setViewDiv",null),o([s.action],l.prototype,"start",null),t.TeacherContextBase=l},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),p=n(1),m=n(3),_=n(5),d=n(8),f=n(36),h=function(e){function t(e){var n,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,s=r(t).call(this,e),(n=!s||"object"!==a(s)&&"function"!=typeof s?o(i):s).m_on=!1,n.m_clipView=!1,n.m_imgDiv=null,n._refImg=function(e){e&&void 0!==n.props.video_url&&""!==n.props.video_url&&(n.m_imgDiv=e,n.m_clipView||_.delay(function(){n.m_imgDiv&&(n.m_clipView=!0)},1250))},n._onClick=function(){n.props.isTeacher&&n._off()},n._off=function(){return l(o(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.view||!this.m_on){e.next=6;break}return this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),e.next=5,d.wait(500);case 5:this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd();case 6:case"end":return e.stop()}},e,this)}))},n.m_on=e.view&&e.on,n}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(c=[{key:"_on",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.m_on=!0;case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}},{key:"render",value:function(){var e=[];return e.push(this.props.className),this.props.view?this.m_on&&e.push("on"):e.push("hide"),u.createElement("div",{className:e.join(" "),onClick:this._onClick},this.props.children,u.createElement("img",{className:"movieclip",src:this.props.video_url,ref:this._refImg,style:this.m_clipView?void 0:f.HIDE}),u.createElement("div",{className:"direction"}))}}])&&i(n.prototype,c),p&&i(n,p),t}();c([p.observable],h.prototype,"m_on",void 0),c([p.observable],h.prototype,"m_clipView",void 0),c([p.action],h.prototype,"_off",void 0),h=c([m.observer],h),t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HIDE={opacity:0,pointerEvents:"none"};t.HIDE_ANI={opacity:0,pointerEvents:"none",transitionProperty:"opacity",transitionDuration:"0.6s"};t.NONE={display:"none"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},_=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),f=n(5),h=n(3),y=n(1),v=n(38),b=n(6),g=n(39),w=n(8),T=n(4),E=n(7),O=n(42),k=n(14),P=n(43),S=n(44),x=n(45),C=n(46),N=n(16),R=n(49),A=n(50),I=n(15).default,D=function(e){function t(){var e;return i(this,t),(e=s(this,c(t).apply(this,arguments))).m_view=!1,e._onClose=function(){T.App.pub_playBtnTab(),e.m_view=!1},e}return l(t,d.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?this.m_view=!0:!this.props.view&&e.view&&(this.m_view=!1)}},{key:"render",value:function(){return d.createElement(P.CoverPopup,{className:"img_popup",view:this.m_view,onClosed:this.props.onClosed},d.createElement("div",null,d.createElement("img",{src:this.props.url}),d.createElement(b.ToggleBtn,{className:"btn_zoom",onClick:this._onClose})))}}]),t}();function j(e){var t=S.sentence2jsx(e,"block",void 0,!0,"word");return d.createElement(d.Fragment,null,t.map(function(e,n){return n===t.length-1?e:d.createElement(d.Fragment,{key:n},e,d.createElement("br",null))}))}function B(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=new RegExp(/\{(.*?)\}/g),s={key:0},a=[];return e.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>").forEach(function(e,c){if(t){for(var l=o.exec(e),u=0,p="",m=[];l;){l.index>u&&(p=e.substring(u,l.index),m.push(M(p,s,r))),p=l[1];var _=n;_||(_=p),i?M(_,s,r):_,m.push(d.createElement("span",{key:s.key++,className:t,"data-correct":p},"aaaaaaaaaa")),u=o.lastIndex,l=o.exec(e)}u<e.length&&(p=e.substring(u),m.push(M(p,s,r))),a[c]=d.createElement(d.Fragment,{key:s.key++},m)}else a[c]=d.createElement(d.Fragment,{key:s.key++},M(e,s,r))}),a}(e,"block",void 0,!0,"word");return d.createElement(d.Fragment,null,t.map(function(e,n){return n===t.length-1?e:d.createElement(d.Fragment,{key:n},e,d.createElement("br",null))}))}function M(e,t,n){for(var i=e.split(/\s/g),r=new RegExp(/[\.\!\?\s]/g),o=[],s=0;s<i.length;s++){var a=i[s];if(""!==a){for(var c=[],l=r.exec(a),u=0,p="";l;)l.index>u&&(p=a.substring(u,l.index),c.push(d.createElement("span",{key:t.key++},p))),p=l[0],c.push(p),u=r.lastIndex,l=r.exec(a);u<a.length&&(p=a.substring(u),c.push(d.createElement("span",{key:t.key++},p))),o.push(d.createElement("span",{key:t.key++,className:n},c.map(function(e){return e})))}}return o}m([y.observable],D.prototype,"m_view",void 0),D=m([h.observer],D);var L=function(e){function t(e){var n;i(this,t),(n=s(this,c(t).call(this,e)))._view=!1,n._hint=!1,n._zoom=!1,n._zoomImgUrl="",n._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},n._viewHint=function(){T.App.pub_playBtnTab(),n._hint=!n._hint,n._swiper&&(n._swiper.slideTo(0,0),n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize()),f.delay(function(){n._swiper&&(n._swiper.slideTo(0,0),n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize())},300)},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._onClosepop=function(){T.App.pub_playBtnTab(),n._view=!1},n._refAudio=function(e){!n._btnAudio&&e&&(n._btnAudio=e)},n._onClick=function(){n._btnAudio&&n._btnAudio.toggle()},n._clickZoom1=function(){n._view&&(T.App.pub_playBtnTab(),n._zoomImgUrl=T.App.data_url+n.props.data.img1,n._zoom=!0)},n._clickZoom2=function(){n._view&&(T.App.pub_playBtnTab(),n._zoomImgUrl=T.App.data_url+n.props.data.img2,n._zoom=!0)},n._closedZoom=function(){n._zoom=!1,n._zoomImgUrl=""},n._jsx_sentence=j(e.data.sentence),n._jsx_sample=B(e.data.sample),n._jsx_hint=j(e.data.hint);var r=Math.floor(3*Math.random());return n._character=0===r?"/content/digenglish_lib/B/ls_comprehension/teacher/images/letstalk_bear.png":1===r?"/content/digenglish_lib/B/ls_comprehension/teacher/images/letstalk_boy.png":"/content/digenglish_lib/B/ls_comprehension/teacher/images/letstalk_girl.png",n}return l(t,d.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view?(this._view=!0,this._hint=!1,this._zoom=!1,this._zoomImgUrl="",this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize()),f.delay(function(){t._swiper&&(t._swiper.slideTo(0,0),t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},300)):!this.props.view&&e.view&&(this._view=!1,this._zoom=!1,this._zoomImgUrl="",T.App.pub_stop())}},{key:"render",value:function(){var e=this.props,t=(e.view,e.onClosed),n=e.data,i=n.img2&&""!==n.img2?d.createElement("img",{src:T.App.data_url+n.img2,draggable:!1}):void 0;T.App.data_url,n.img1;return d.createElement(d.Fragment,null,d.createElement(P.CoverPopup,{className:"lets_talk",view:this._view,onClosed:t},d.createElement("div",{className:"pop_bg"},d.createElement(b.ToggleBtn,{className:"btn_letstalk_close",onClick:this._onClosepop}),d.createElement(b.ToggleBtn,{className:"btn_hint",on:this._hint,onClick:this._viewHint}),d.createElement("div",{className:"popbox"},d.createElement("div",{className:"image_box"},d.createElement("img",{src:T.App.data_url+n.img1,draggable:!1}),i,d.createElement(b.ToggleBtn,{className:"btn_zoom1"+(void 0!==i?" notonly":""),onClick:this._clickZoom1}),d.createElement(b.ToggleBtn,{className:"btn_zoom2",onClick:this._clickZoom2,view:void 0!==i})),d.createElement("div",{className:"sentence_box"},d.createElement("div",null,d.createElement(A.BtnAudio,{className:"btn_audio",url:T.App.data_url+n.audio,ref:this._refAudio}),d.createElement("div",{className:"question_box",onClick:this._onClick},this._jsx_sentence))),d.createElement("div",{className:"speechbubble_box"},d.createElement("div",null,d.createElement("div",{className:"char_box"},d.createElement("img",{src:this._character,draggable:!1})),d.createElement("div",{className:"balloon"+(this._hint?" view-hint":"")},d.createElement(I,Object.assign({},this._soption,{ref:this._refSwiper}),d.createElement("div",null,d.createElement("div",{className:"sample"+(this._hint?" hide":"")},this._jsx_sample),d.createElement("div",{className:"hint"+(this._hint?"":" hide")},this._jsx_hint))))))))),d.createElement(D,{url:this._zoomImgUrl,view:this._zoom,onClosed:this._closedZoom}))}}]),t}();m([y.observable],L.prototype,"_view",void 0),m([y.observable],L.prototype,"_hint",void 0),m([y.observable],L.prototype,"_zoom",void 0),m([y.observable],L.prototype,"_zoomImgUrl",void 0),L=m([h.observer],L);var q=function(e){function t(){var e;return i(this,t),(e=s(this,c(t).apply(this,arguments))).m_view=!1,e.m_sendView=!1,e.m_roll="",e.onSend=function(){return _(a(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.onSend(this.m_roll),e.next=3,w.wait(400);case 3:this.m_view=!1;case 4:case"end":return e.stop()}},e,this)}))},e._onClose=function(){e.m_view=!1},e._onRollA=function(){"ROLE PLAY"===e.props.type&&(T.App.pub_playBtnTab(),e.m_roll="A",e.m_sendView=!0)},e._onRollB=function(){"ROLE PLAY"===e.props.type&&(T.App.pub_playBtnTab(),e.m_roll="B",e.m_sendView=!0)},e}return l(t,d.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this.m_view=!0,this.m_sendView="ROLE PLAY"!==this.props.type,this.m_roll=""):!this.props.view&&e.view&&(this.m_view=!1,this.m_sendView=!1,this.m_roll="")}},{key:"render",value:function(){var e=this.props,t=e.view,n=(e.onClosed,e.imgA),i=e.imgB;return d.createElement(P.CoverPopup,{className:"compre_popup "+this.props.type,view:t&&this.m_view,onClosed:this.props.onClosed},d.createElement("span",null,"SHADOWING"===this.props.type?"LISTEN & REPEAT":this.props.type),d.createElement(b.ToggleBtn,{className:"btn_close",onClick:this._onClose}),d.createElement("div",{className:"popup_content"},d.createElement("span",null,"Do you have any questions?"),d.createElement("span",null,"Choose the role."),d.createElement("span",null,"Listen and repeat."),d.createElement("div",{className:"img_box"},d.createElement("div",{className:"A"+("A"===this.m_roll?" on":"")},d.createElement("span",{className:"icon_check A"}),d.createElement("img",{src:T.App.data_url+n,onClick:this._onRollA})),d.createElement("div",{className:"B"+("B"===this.m_roll?" on":"")},d.createElement("span",{className:"icon_check B"}),d.createElement("img",{src:T.App.data_url+i,onClick:this._onRollB})))),d.createElement(O.default,{view:this.m_sendView,preventUpWhenView:!0,type:"teacher",sended:!1,originY:0,onSend:this.onSend}))}}]),t}();m([y.observable],q.prototype,"m_view",void 0),m([y.observable],q.prototype,"m_sendView",void 0),m([y.observable],q.prototype,"m_roll",void 0),q=m([h.observer],q);var F=function(e){function t(){var e;return i(this,t),(e=s(this,c(t).apply(this,arguments)))._click=function(){e.props.onClick(e.props.idx)},e}return l(t,d.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.idx,n=e.on;return d.createElement("span",{className:n?"on":"",onClick:this._click},t+1)}}]),t}(),U=function(e){function t(e){var n;i(this,t),(n=s(this,c(t).call(this,e))).m_player=new v.MPlayer(new v.MConfig(!0)),n.m_player_inittime=0,n.m_swiper=null,n.c_popup="off",n._Title="COMPREHENSION",n._Tab="QUESTION",n._Tab_save="QUESTION",n._Hint=!1,n._view=!1,n._curQidx=0,n._viewClue=!1,n._viewTrans=!1,n._viewScript=!0,n._letstalk=!1,n._roll="",n._shadowing=!1,n._focusIdx=-1,n._isShadowPlay=!1,n._qselected=[],n._selected=[],n._lastFocusIdx=-1,n._countdown=new N.TimerState(3),n._refScriptContainer=function(e){!n._scontainer&&e&&(n._scontainer=e)},n.onSend=function(){var e=n.props,t=e.state;e.actions;if("COMPREHENSION"===n._Title){if("QUESTION"===n._Tab&&0!==t.questionProg)return;if("SCRIPT"===n._Tab&&0!==t.scriptProg)return}else if(0!==t.dialogueProg)return;"COMPREHENSION"===n._Title?"QUESTION"===n._Tab?t.questionProg=1:t.scriptProg=1:t.dialogueProg=1,T.App.pub_playToPad(),T.App.pub_reloadStudents(function(){var e;if("COMPREHENSION"===n._Title)if(n.props.actions.clearReturnUsers(),n.props.actions.setRetCnt(0),n.props.actions.setNumOfStudent(T.App.students.length),"QUESTION"===n._Tab){if(1!==t.questionProg)return;t.questionProg=2,e={msgtype:"quiz_send"}}else{if(1!==t.scriptProg)return;t.scriptProg=2,e={msgtype:"script_send"},n._viewClue&&(E.sendPAD(10,e),e={msgtype:"view_clue"})}else{if(1!==t.dialogueProg)return;t.dialogueProg=2,e={msgtype:"dialogue_send"}}E.sendPAD(10,e),n._setNavi()})},n._onPopupSend=function(e){var t=n.props,i=t.state;t.actions;if("Q&A"===n.c_popup){if("COMPREHENSION"!==n._Title)return;if(i.qnaProg>0)return;i.qnaProg=1,T.App.pub_playToPad();E.sendPAD(10,{msgtype:"qna_send"}),f.delay(function(){"COMPREHENSION"===n._Title&&1===i.qnaProg&&(i.qnaProg=2)},300)}else if("ROLE PLAY"===n.c_popup){if("DIALOGUE"!==n._Title)return;if(2!==i.dialogueProg)return;if(""!==n._roll||""===e)return;(n.m_player.currentTime!==n.m_player_inittime||n.m_player.currentTime<n.m_player_inittime)&&n.m_player.gotoAndPause(1e3*n.m_player_inittime),T.App.pub_playToPad(),n._lastFocusIdx=0,n._focusIdx=-1,n.m_player.setMuted(!1),n.m_player.setMutedTemp(!1);var r={msgtype:"roll_send",roll:e};E.sendPAD(10,r),f.delay(function(){"DIALOGUE"===n._Title&&2===i.dialogueProg&&(n._roll=e)},300)}else if("SHADOWING"===n.c_popup){if("DIALOGUE"!==n._Title)return;if(2!==i.dialogueProg)return;if(n._shadowing)return;(n.m_player.currentTime!==n.m_player_inittime||n.m_player.currentTime<n.m_player_inittime)&&n.m_player.gotoAndPause(1e3*n.m_player_inittime),T.App.pub_playToPad(),n._lastFocusIdx=0,n._focusIdx=-1,n.m_player.setMuted(!1),n.m_player.setMutedTemp(!1);E.sendPAD(10,{msgtype:"shadowing_send"}),f.delay(function(){"DIALOGUE"===n._Title&&2===i.dialogueProg&&(n._shadowing=!0)},300)}n.props.actions.setNavi(!1,!1)},n._clickClue=function(){var e=n.props;e.state,e.actions;if("COMPREHENSION"===n._Title&&"SCRIPT"===n._Tab)if(T.App.pub_playBtnTab(),n._viewClue){n._viewClue=!1;E.sendPAD(10,{msgtype:"hide_clue"})}else{n._viewClue=!0;E.sendPAD(10,{msgtype:"view_clue"})}},n._clickCloseHint=function(){T.App.pub_playBtnTab(),n._Hint=!1},n._clickItem=function(e,t){""!==n._roll||n._shadowing||n.m_player.gotoAndPlay(1e3*t.dms_start,1e3*t.dms_end,1)},n._setShadowPlay=function(e){if(n._shadowing){n._isShadowPlay=e;var t={msgtype:e?"playing":"paused"};E.sendPAD(10,t)}else n._isShadowPlay=e},n._qnaReturnsClick=function(e){if("COMPREHENSION"===n._Title&&"SCRIPT"===n._Tab&&!(n.props.state.qnaProg<2)){var t=n.props.actions.getQnaReturns();if(!(e>=t.length)){var i=t[e];i.users.length<=0||(T.App.pub_playBtnTab(),E.startStudentReportProcess(6,i.users))}}},n._onPage=function(e){T.App.pub_stop(),T.App.pub_playBtnTab(),"COMPREHENSION"===n._Title&&(n._curQidx=e,n._Hint="SCRIPT"===n._Tab)},n._clickCompre=function(e){"COMPREHENSION"!==n._Title&&("A"===n._roll||"B"===n._roll||n._shadowing||(T.App.pub_stop(),T.App.pub_playBtnTab(),n.m_player.bPlay&&n.m_player.pause(),n._clearAll(),n._Title="COMPREHENSION",n._Tab="QUESTION"))},n._clickDial=function(e){"DIALOGUE"!==n._Title&&(2===n.props.state.questionProg||1===n.props.state.questionProg||n.props.state.qnaProg>=1||(T.App.pub_playBtnTab(),n.m_player.bPlay&&n.m_player.pause(),n._clearAll(),n._Title="DIALOGUE",n._Tab_save=n._Tab,n._Tab="SCRIPT",n._viewScript=!1))},n._clickQuestion=function(e){var t=n.props.state;"COMPREHENSION"===n._Title&&"QUESTION"!==n._Tab&&(2===t.questionProg||1===t.questionProg||t.qnaProg>=1||(T.App.pub_playBtnTab(),n._Hint=!1,n._Tab="QUESTION",t.scriptProg>0&&(t.scriptProg=0,E.sendPAD(0,null),n.props.actions.clearQnaReturns())))},n._clickScript=function(e){"COMPREHENSION"===n._Title&&"SCRIPT"!==n._Tab&&(2===n.props.state.questionProg||1===n.props.state.questionProg||n.props.state.qnaProg>=1||(T.App.pub_stop(),T.App.pub_playBtnTab(),n._Hint=!1,n._Tab="SCRIPT"))},n._clickReturn=function(){T.App.pub_playBtnTab(),"COMPREHENSION"===n._Title&&"QUESTION"===n._Tab?E.startStudentReportProcess(6,n.props.actions.getReturnUsersForQuiz()):E.startStudentReportProcess(6,n.props.actions.getReturnUsers())},n._clickPerson=function(e){T.App.pub_playBtnTab();var t=n.props.actions.getResult()[n._curQidx];t&&(1===e?E.startStudentReportProcess(6,t.u1):2===e?E.startStudentReportProcess(6,t.u2):3===e&&E.startStudentReportProcess(6,t.u3))},n._clickPerson1=function(){return n._clickPerson(1)},n._clickPerson2=function(){return n._clickPerson(2)},n._clickPerson3=function(){return n._clickPerson(3)},n._clickAnswer=function(){var e=n.props,t=e.state,i=e.actions,r=t.questionProg;if("COMPREHENSION"===n._Title&&"QUESTION"===n._Tab&&2===r){T.App.pub_playBtnTab();E.sendPAD(10,{msgtype:"quiz_end"}),i.quizComplete(),n.props.actions.setNavi(!0,!0)}},n._onPopupClosed=function(){"COMPREHENSION"===n._Title&&"SCRIPT"===n._Tab&&0===n.props.state.qnaProg?n.props.actions.setNavi(!0,!0):"DIALOGUE"!==n._Title||""!==n._roll||n._shadowing||n.props.actions.setNavi(!0,!0),n.c_popup="off"},n._onQAClick=function(){var e=n.props.state;if("COMPREHENSION"===n._Title&&"off"===n.c_popup&&!(e.scriptProg<2))if(0===e.qnaProg)T.App.pub_playBtnTab(),n.c_popup="Q&A",n.props.actions.setNavi(!1,!1);else if(e.qnaProg>=1){T.App.pub_playBtnTab();E.sendPAD(10,{msgtype:"qna_end"}),e.qnaProg=0,n.props.actions.clearQnaReturns(),n.props.actions.setNavi(!0,!0)}},n._onChangeScript=function(e){if("DIALOGUE"===n._Title){var t=n.m_data.scripts;if(e>=0&&e<t.length){if(""!==n._roll||n._shadowing){var i=t[e];""!==n._roll&&n.m_player.setMutedTemp(n._roll===i.roll)}n._lastFocusIdx=e,n._focusIdx=e}else n._focusIdx=-1,""!==n._roll&&n.m_player.setMutedTemp(!1)}n._sendFocusIdx(e)},n._onRollClick=function(){"DIALOGUE"===n._Title&&n.props.state.dialogueProg>=2&&!n._shadowing&&(T.App.pub_playBtnTab(),""===n._roll?(n.c_popup="ROLE PLAY",n.m_player.pause(),n.props.actions.setNavi(!1,!1)):(n._lastFocusIdx=-1,n._focusIdx=-1,n.m_player.setMutedTemp(!1),n._roll="",n._sendDialogueEnd(),n.props.actions.setNavi(!0,!0)))},n._onShadowClick=function(){"DIALOGUE"===n._Title&&n.props.state.dialogueProg>=2&&""===n._roll&&(T.App.pub_playBtnTab(),n._shadowing?(n._isShadowPlay=!1,n._shadowing=!1,n.props.actions.setNavi(!0,!0)):(n._lastFocusIdx=-1,n._focusIdx=-1,n._sendFocusIdx(-1),n.c_popup="SHADOWING",n.m_player.pause(),n._sendDialogueEnd(),n.props.actions.setNavi(!1,!1)))},n._onLetsTalk=function(){n.m_player.bPlay&&n.m_player.pause(),T.App.pub_playBtnTab(),n._letstalk=!0,n.props.actions.setNaviView(!1)},n._letstalkClosed=function(){n._letstalk=!1,n.props.actions.setNaviView(!0)},n._toggleTrans=function(){"DIALOGUE"===n._Title&&(T.App.pub_playBtnTab(),n._viewTrans=!n._viewTrans,n._viewTrans&&(n._viewScript=!0),n._lastFocusIdx>=0&&n._scontainer&&n.m_player.bPlay&&(n._scontainer.scrollTo(n._lastFocusIdx,0),f.delay(function(){n._lastFocusIdx>=0&&n._scontainer&&n._scontainer.scrollTo(n._lastFocusIdx,0)},5),f.delay(function(){n._lastFocusIdx>=0&&n._scontainer&&n._scontainer.scrollTo(n._lastFocusIdx,0)},50),f.delay(function(){n._lastFocusIdx>=0&&n._scontainer&&n._scontainer.scrollTo(n._lastFocusIdx,0)},300)))},n._toggleScript=function(){"DIALOGUE"===n._Title&&(T.App.pub_playBtnTab(),n._viewScript=!n._viewScript)},n._stopClick=function(){n._sendFocusIdx(-1),n._lastFocusIdx=-1,n._focusIdx=-1,n.m_player.setMutedTemp(!1),n._sendDialogueEnd();var e="A"===n._roll||"B"===n._roll||n._shadowing;"COMPREHENSION"===n._Title&&"SCRIPT"===n._Tab&&(n.props.state.qnaProg<1||n.props.state.qnaProg>=3)?n._setNavi():"DIALOGUE"===n._Title&&(n._isShadowPlay=!1,e||n._setNavi())},n._onMc=function(e){n.props.state.questionProg>=3||(n._qselected[n._curQidx]=e)},n._onClickQuestion=function(){var e=n.m_data.quizs[n._curQidx];e&&T.App.pub_play(T.App.data_url+e.audio,function(e){})},n.m_data=e.actions.getData(),n.m_player_inittime=n.m_data.video_start;for(var r=n.m_data.quizs,o=0;o<r.length;o++)n._qselected[o]=-1;return n.m_player.addOnPlayEnd(function(){n._lastFocusIdx=-1,n._focusIdx=-1,n.m_player.setMutedTemp(!1),n._sendDialogueEnd(),"DIALOGUE"!==n._Title||""!==n._roll||n._shadowing?"DIALOGUE"===n._Title&&n._shadowing&&(n._isShadowPlay=!1):n.props.actions.setNavi(!0,!0)}),n.m_player.addOnState(function(e,t){var i={msgtype:n._shadowing?n._isShadowPlay?"playing":"paused":6!==e&&n.m_player.bPlay?"playing":"paused"};E.sendPAD(10,i)}),n}return l(t,d.Component),o(t,[{key:"componentDidMount",value:function(){this.m_data=this.props.actions.getData();for(var e=this.m_data.quizs,t=0;t<e.length;t++)this._qselected[t]=-1}},{key:"_clearAll",value:function(){T.App.pub_stop(),this._Title="COMPREHENSION",this._Tab="QUESTION";for(var e=this.m_data.quizs,t=0;t<e.length;t++)this._qselected[t]=-1;this._curQidx=0,this._Hint=!1,this.c_popup="off",this._viewClue=!1,this._viewTrans=!1,this._viewScript=!0,this._roll="",this._isShadowPlay=!1,this._shadowing=!1,this._lastFocusIdx=-1,this._focusIdx=-1,this.m_player.setMutedTemp(!1),(this.m_player.currentTime!==this.m_player_inittime||this.m_player.currentTime<this.m_player_inittime)&&this.m_player.gotoAndPause(1e3*this.m_player_inittime),this.props.actions.init(),E.sendPAD(0,null)}},{key:"_sendFocusIdx",value:function(e){var t={msgtype:"focusidx",idx:e};E.sendPAD(10,t)}},{key:"_sendDialogueEnd",value:function(){E.sendPAD(10,{msgtype:"dialogue_end"})}},{key:"_setNavi",value:function(){var e=this;this.props.actions.setNaviView(!0),2===this.props.state.questionProg?this.props.actions.setNavi(0!==this._curQidx,this._curQidx!==this.m_data.quizs.length-1):this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(function(){if("COMPREHENSION"===e._Title)if("QUESTION"===e._Tab)0===e._curQidx?e.props.actions.gotoDirection():(T.App.pub_stop(),T.App.pub_playBtnTab(),e._Hint=!1,e._curQidx=e._curQidx-1,e._setNavi());else{if(2===e.props.state.questionProg||1===e.props.state.questionProg||e.props.state.qnaProg>=1)return;T.App.pub_stop(),T.App.pub_playBtnTab(),e._Hint=!1,e._Tab="QUESTION",e.props.state.scriptProg>0&&(e.props.state.scriptProg=0,E.sendPAD(0,null),e.props.actions.clearQnaReturns()),e._curQidx=e.m_data.quizs.length-1}else{if("A"===e._roll||"B"===e._roll||e._shadowing)return;T.App.pub_stop(),T.App.pub_playBtnTab(),e.m_player.bPlay&&e.m_player.pause(),e._clearAll(),e._Title="COMPREHENSION",e._Tab="SCRIPT",e._curQidx=0}},function(){if("COMPREHENSION"===e._Title)if("QUESTION"===e._Tab)if(e._curQidx===e.m_data.quizs.length-1){if(2===e.props.state.questionProg||1===e.props.state.questionProg||e.props.state.qnaProg>=1)return;T.App.pub_stop(),T.App.pub_playBtnTab(),e._Hint=!1,e._Tab="SCRIPT",e._curQidx=0}else T.App.pub_stop(),T.App.pub_playBtnTab(),e._Hint=!1,e._curQidx=e._curQidx+1,e._setNavi();else{if(2===e.props.state.questionProg||1===e.props.state.questionProg||e.props.state.qnaProg>=1)return;T.App.pub_stop(),T.App.pub_playBtnTab(),e.m_player.bPlay&&e.m_player.pause(),e._clearAll(),e._Title="DIALOGUE",e._Tab_save=e._Tab,e._Tab="SCRIPT",e._viewScript=!1}else e.props.actions.gotoNextBook()})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view?(this._clearAll(),this._view=!0,this._setNavi(),this._letstalk=!1):!this.props.view&&e.view&&(this.c_popup="off",this._lastFocusIdx=-1,this._focusIdx=-1,this._roll="",this._isShadowPlay=!1,this._shadowing=!1,T.App.pub_stop(),this.m_player.bPlay&&this.m_player.pause(),this.m_player.setMuted(!1),this.m_player.setMutedTemp(!1),f.delay(function(){t.props.view||(t.m_player.seek(1e3*t.m_player_inittime),t._view=!1)},300))}},{key:"render",value:function(){var e=this,t=this.props.state,n=this.m_data.quizs,i=t.questionProg>=3,r="COMPREHENSION"===this._Title&&(1===t.questionProg||2===t.questionProg||t.qnaProg>=1)||"DIALOGUE"===this._Title&&("A"===this._roll||"B"===this._roll||this._shadowing),o=(n[this._curQidx].app_preview,this.props.actions.getResult()),s=-1;i&&(s=t.numOfStudent>0?Math.round(100*o[this._curQidx].numOfCorrect/t.numOfStudent):0)>100&&(s=100);var a="DIALOGUE"===this._Title,c="COMPREHENSION"===this._Title&&"QUESTION"===this._Tab,l="COMPREHENSION"===this._Title&&"SCRIPT"===this._Tab,u="COMPREHENSION"===this._Title&&t.scriptProg>=2,p=a&&t.dialogueProg>=2,m=c&&t.questionProg<2||l&&t.scriptProg<2||a&&t.dialogueProg<2,_=c&&t.questionProg>=2||l,f=c&&t.questionProg>=2||l&&t.qnaProg>=2,h=c&&t.questionProg>=2,y=l,v=n.length,w=32*(this._curQidx-(v-1)/2),T=this.m_data.letstalk,E=!(""===T.sentence||""===T.audio||""===T.img1||""===T.sample||""===T.hint);return d.createElement("div",{className:"t_comprehension "+this._Title,style:{}},d.createElement("div",{className:"top"},d.createElement(b.ToggleBtn,{onClick:this._clickCompre,on:"COMPREHENSION"===this._Title,disabled:"COMPREHENSION"===this._Title||r,className:"btn_compre"}),d.createElement(b.ToggleBtn,{onClick:this._clickDial,on:"DIALOGUE"===this._Title,disabled:"DIALOGUE"===this._Title||r,className:"btn_dialogue"})),d.createElement("div",{className:"left_box"},d.createElement("div",{className:"video_container"},d.createElement(C.default,{player:this.m_player,playerInitTime:this.m_player_inittime,data:this.m_data,compDiv:this._Title,roll:this._roll,shadowing:this._shadowing,countdown:this._countdown,onChangeScript:this._onChangeScript,stopClick:this._stopClick,isShadowPlay:this._isShadowPlay,setShadowPlay:this._setShadowPlay}))),d.createElement("div",{className:"btn_tabs"},d.createElement(b.ToggleBtn,{className:"btn_tab_question",onClick:this._clickQuestion,on:"QUESTION"===this._Tab,disabled:"QUESTION"===this._Tab||r}),d.createElement(b.ToggleBtn,{className:"btn_tab_script",onClick:this._clickScript,on:"SCRIPT"===this._Tab,disabled:"SCRIPT"===this._Tab||r})),d.createElement("div",{className:"info_box"+(_?" on":"")},d.createElement("div",{className:"return_cnt_box white",style:{display:f?"":"none"},onClick:this._clickReturn},d.createElement("div",null,t.retCnt,"/",t.numOfStudent)),d.createElement(b.ToggleBtn,{className:"btn_answer",on:i,onClick:this._clickAnswer,view:h}),d.createElement(b.ToggleBtn,{className:"btn_clue",onClick:this._clickClue,on:this._viewClue,view:y})),d.createElement("div",{className:"right_box"},d.createElement("div",{className:"btn_page_box"},n.map(function(t,n){return d.createElement(F,{key:n,on:(!0===e._Hint||"QUESTION"===e._Tab)&&n===e._curQidx,idx:n,onClick:e._onPage})})),d.createElement("div",{className:"right_top"},d.createElement(k.CorrectBar,{className:"correct_box"+(c?"":" hide")+(s<0?" no-result":""),preview:-1,result:s}),d.createElement("div",{className:"hint_box",style:{display:l&&this._Hint?"":"none",left:"13px"}},d.createElement("div",{className:"arrow",style:{left:w+"px"}}),d.createElement("div",{className:"content"},d.createElement(b.ToggleBtn,{className:"btn_hint_close",onClick:this._clickCloseHint}),d.createElement("div",null,d.createElement(g.default,{view:l&&this._Hint,rcalcNum:this._curQidx},n[this._curQidx].app_question)))),d.createElement(b.ToggleBtn,{className:"btn_lets_talk",view:E,on:this._letstalk,onClick:this._onLetsTalk,disabled:this._shadowing||"A"===this._roll||"B"===this._roll}),d.createElement(b.ToggleBtn,{className:"btn_script_show"+(this._viewScript?" on":""),on:this._viewScript,onClick:this._toggleScript})),d.createElement("div",{className:"question"+(t.questionProg>=3?" complete":""),style:{display:"QUESTION"===this._Tab?"":"none"}},n.map(function(t,n){return d.createElement("div",{key:n,style:{display:n===e._curQidx?"":"none"}},d.createElement("div",{className:"quiz"},d.createElement(g.default,{view:e.props.view&&n===e._curQidx,maxLineNum:2,minSize:24,maxSize:36,lineHeight:120,textAlign:"left",onClick:e._onClickQuestion},t.app_question)),d.createElement("hr",{className:"line"}),d.createElement("div",{className:"choice"+(i?" correct":"")},d.createElement("span",{onClick:e._clickPerson1},o[n].c1),d.createElement(R.default,{className:"btn_choice",num:1,on:i?1===t.answer:1===e._qselected[n],onClick:e._onMc,disabled:i},d.createElement(g.default,{view:e.props.view&&n===e._curQidx,maxLineNum:2,minSize:24,maxSize:33,lineHeight:120,textAlign:"left"},t.choice_1)),d.createElement("span",{onClick:e._clickPerson2},o[n].c2),d.createElement(R.default,{className:"btn_choice",num:2,on:i?2===t.answer:2===e._qselected[n],onClick:e._onMc,disabled:i},d.createElement(g.default,{view:e.props.view&&n===e._curQidx,maxLineNum:2,minSize:24,maxSize:33,lineHeight:120,textAlign:"left"},t.choice_2)),d.createElement("span",{onClick:e._clickPerson3},o[n].c3),d.createElement(R.default,{className:"btn_choice",num:3,on:i?3===t.answer:3===e._qselected[n],onClick:e._onMc,disabled:i},d.createElement(g.default,{view:e.props.view&&n===e._curQidx,maxLineNum:2,minSize:24,maxSize:33,lineHeight:120,textAlign:"left"},t.choice_3))))})),d.createElement("div",{className:"script_container"+("SCRIPT"===this._Tab?"":" hide")},d.createElement(x.default,{ref:this._refScriptContainer,view:this.props.view,data:this.m_data,focusIdx:this._focusIdx,selected:this._selected,qnaReturns:this.props.actions.getQnaReturns(),qnaReturnsClick:this._qnaReturnsClick,roll:this._roll,shadowing:this._shadowing,clickThumb:this._clickItem,noSwiping:"DIALOGUE"===this._Title&&(this._shadowing&&this._isShadowPlay||!this._shadowing&&this.m_player.bPlay),compDiv:this._Title,viewClue:this._viewClue,viewScript:this._viewScript,viewTrans:this._viewTrans,numRender:t.retCnt}))),d.createElement("div",{className:"bottom"},d.createElement(b.ToggleBtn,{className:"btn_QA",view:l||u,disabled:!u,on:t.qnaProg>=1,onClick:this._onQAClick}),d.createElement(b.ToggleBtn,{className:"btn_role",view:a,on:"A"===this._roll||"B"===this._roll,disabled:!p||this._shadowing,onClick:this._onRollClick}),d.createElement(b.ToggleBtn,{className:"btn_shadowing",view:a,on:this._shadowing,disabled:!p||""!==this._roll,onClick:this._onShadowClick})),d.createElement(q,{type:this.c_popup,view:"Q&A"===this.c_popup||"ROLE PLAY"===this.c_popup||"SHADOWING"===this.c_popup,imgA:this.m_data.speakerA.image_l,imgB:this.m_data.speakerB.image_l,onSend:this._onPopupSend,onClosed:this._onPopupClosed}),d.createElement(O.default,{view:m,type:"teacher",sended:!1,originY:0,onSend:this.onSend}),d.createElement(L,{view:this._letstalk,data:this.m_data.letstalk,onClosed:this._letstalkClosed}))}}]),t}();m([y.observable],U.prototype,"c_popup",void 0),m([y.observable],U.prototype,"_Title",void 0),m([y.observable],U.prototype,"_Tab",void 0),m([y.observable],U.prototype,"_Hint",void 0),m([y.observable],U.prototype,"_view",void 0),m([y.observable],U.prototype,"_curQidx",void 0),m([y.observable],U.prototype,"_viewClue",void 0),m([y.observable],U.prototype,"_viewTrans",void 0),m([y.observable],U.prototype,"_viewScript",void 0),m([y.observable],U.prototype,"_letstalk",void 0),m([y.observable],U.prototype,"_roll",void 0),m([y.observable],U.prototype,"_shadowing",void 0),m([y.observable],U.prototype,"_focusIdx",void 0),m([y.observable],U.prototype,"_isShadowPlay",void 0),m([y.observable],U.prototype,"_qselected",void 0),U=m([h.observer],U),t.default=U},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var c,l,u,p,m,_,d,f=n(1);!function(e){e.STRETCH="stretch",e.LETTERBOX="letterbox"}(c||(c={})),function(e){e.NONE="none",e.METADATA="metadata",e.AUTO="auto"}(l||(l={})),function(e){e.ORGIN="origin",e.TRANS="trans",e.ALL="all",e.NONE="none"}(u||(u={})),function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.PLAYBACK_ERROR=2]="PLAYBACK_ERROR",e[e.READY=3]="READY",e[e.STANDBY=4]="STANDBY",e[e.BUFFERING=5]="BUFFERING",e[e.PAUSED=6]="PAUSED",e[e.PLAYING=7]="PLAYING"}(p||(p={})),t.MPRState=p,function(e){e[e.UNSET=-1]="UNSET",e[e.CAN_NOT_ALL_DIR=1]="CAN_NOT_ALL_DIR",e[e.CAN_NOT_NEXT_DIR=2]="CAN_NOT_NEXT_DIR",e[e.CAN_ALL_DIR=10]="CAN_ALL_DIR"}(m||(m={})),function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(_||(_={})),function(e){e[e.NETWORK_EMPTY=0]="NETWORK_EMPTY",e[e.NETWORK_IDLE=1]="NETWORK_IDLE",e[e.NETWORK_LOADING=2]="NETWORK_LOADING",e[e.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(d||(d={}));var h=function(){function e(t){i(this,e),this.defaultVolume=100,this.lenOfFvlToFile=25165824,this.sections=[],this.isVideo=t,this.autoPlay=!1,this.controlBox=!0,this.typeOfPosByMouse=10,this.loop=1,this.preload="auto",this.scaleMode="stretch",this.bgColor=-1,this.initTime=0,this.startTime=0,this.endTime=0,this.chkTime=250,this.playBtn=!0,this.closeBtn=!1,this.popupBtn=!1,this.fullscreenBtn=!0,this.volumeBtn=!0,this.centerPlayBtn=!0,this.centerLoading=!0,this.mousePlayPause=!0,this.bDoFullscreen=!0,this.volumeBox=!0,this.speedBtn=!1,this.scroller=!0,this.togglePlayBtn=!0,this.autoBtn=!1,this.langBtn=!1,this.menuOverlap=!0,this.haveScript=!1,this.viewScriptBox=!1,this.bScriptBtn=!1,this.scriptViewLang="none",this.etcData=""}return o(e,[{key:"isLoadControls",value:function(e){return this.controlBox||e&&(this.centerPlayBtn||this.centerLoading||this.viewScriptBox)}},{key:"pcGetURL",value:function(e){return e}},{key:"clone",value:function(){var t=new e(this.isVideo);return t.copy(this),t}},{key:"copy",value:function(e){this.autoPlay=e.autoPlay,this.controlBox=e.controlBox,this.typeOfPosByMouse=e.typeOfPosByMouse,this.loop=e.loop,this.preload=e.preload,this.scaleMode=e.scaleMode,this.bgColor=e.bgColor,this.initTime=e.initTime,this.startTime=e.startTime,this.endTime=e.endTime,this.chkTime=e.chkTime,this.playBtn=e.playBtn,this.closeBtn=e.closeBtn,this.popupBtn=e.popupBtn,this.fullscreenBtn=e.fullscreenBtn,this.volumeBtn=e.volumeBtn,this.centerPlayBtn=e.centerPlayBtn,this.centerLoading=e.centerLoading,this.mousePlayPause=e.mousePlayPause,this.volumeBox=e.volumeBox,this.speedBtn=e.speedBtn,this.scroller=e.scroller,this.togglePlayBtn=e.togglePlayBtn,this.autoBtn=e.autoBtn,this.langBtn=e.langBtn,this.menuOverlap=e.menuOverlap,this.haveScript=e.haveScript,this.viewScriptBox=e.viewScriptBox,this.bScriptBtn=e.bScriptBtn,this.scriptViewLang=e.scriptViewLang,this.defaultVolume=e.defaultVolume,this.etcData=e.etcData}},{key:"isMobile",get:function(){return!1}},{key:"iskdmPC",get:function(){return!1}}]),e}();t.MConfig=h;var y=function(){function e(t){i(this,e),this.m_media=null,this.m_url=null,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_onstates=[],this.m_ontimes=[],this.m_onends=[],this.m_onendtemps=[],this.m_bPlay=!1,this.m_myState=0,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this.m_config=t,this.m_bPlay=t.autoPlay,this.m_startTime=t.startTime,this.m_endTime=t.endTime,this.mediaInited=this.mediaInited.bind(this),this._onTime=this._onTime.bind(this)}return o(e,[{key:"setStartEndTime",value:function(e,t){this.m_startTime=e,this.m_endTime=t}},{key:"setMuted",value:function(e){this.m_muted=e,this.m_media&&(this.m_media.muted=e)}},{key:"setMutedTemp",value:function(e){this.m_media&&(this.m_media.muted=e)}},{key:"_initTemp",value:function(){this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0}},{key:"play",value:function(){this.m_bPlay=!0,this._initTemp(),this.m_playEnded&&this.m_media&&this.m_myState>=3&&(this.m_media.currentTime=this.m_startTime/1e3),this.m_playEnded=!1,this._playOrPause()}},{key:"pause",value:function(){this.m_bPlay=!1,this._initTemp(),this._playOrPause()}},{key:"start",value:function(){this.seek(0),this.play()}},{key:"seek",value:function(e){if(!this.m_media||this.m_myState<3)this.m_seekTime=e;else{if(this._initTemp(),this.m_seekTime=-1,isNaN(e)||e<0)e=0;else if(e>=this.m_duration-100)return e=this.m_duration,void this._playEnded();this.m_playEnded=!1,this.m_media.currentTime=(this.m_startTime+e)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime}}},{key:"gotoAndPlay",value:function(e,t,n){if(this.m_standBy=!1,!this.m_media||this.m_duration<=0)return this._load(),this.m_bPlay_temp=!0,this.m_startTime_temp=e,this.m_endTime_temp=t,void(this.m_loop_temp=n);this.m_playEnded=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=e,this.m_endTime_temp=t,e=e>=0?e:this.currentTime,t=t>=0&&t<this.m_duration?t:this.m_duration,this.m_bPlay=!0,e>=t||n<=0?(this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0):(this.m_endTime_temp>=this.m_duration&&(this.m_endTime_temp=-1),this.m_loop_temp=n,this.m_loopCnt_temp=0,this.m_startTime_temp>=0&&(this.m_media.currentTime=(e+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime)),this._playOrPause()}},{key:"gotoAndPause",value:function(e){this.m_bPlay=!1,this._initTemp(),this.m_media&&(e=e>=0&&e<this.m_duration?e:this.currentTime,this.m_media.currentTime=(e+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime,this._playOrPause())}},{key:"connect",value:function(){if(this.m_media){this.m_media;this.m_url&&this.m_myState>=1&&3===this.m_media.networkState&&0===this.m_media.readyState&&(this.m_media.src=this.m_url,this.m_media.load())}}},{key:"unconnect",value:function(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_myState>=3&&(this.m_seekTime=1e3*this.m_media.currentTime-this.m_startTime),this.m_media.src="",this.m_media.load()))}},{key:"_load",value:function(){this.m_media&&this.m_url&&this.m_myState<1&&(this._setState(1),this.m_media.src=this.m_url,this.m_media.load())}},{key:"load",value:function(e){this.m_url=e,this._load()}},{key:"unload",value:function(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_media.src="",this.m_media.load())),this.m_url=null,this.m_bPlay=!1,this.m_bPlay_temp=!1,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this._setState(0)}},{key:"_setState",value:function(e){if(this.m_myState!==e){7===e?this.m_onTimer<0&&(this.m_onTimer=window.requestAnimationFrame(this._onTime)):6===e&&this.m_onTimer>=0&&(window.cancelAnimationFrame(this.m_onTimer),this.m_onTimer=-1);var t=this.m_myState;this.m_myState=e;for(var n=0,i=this.m_onstates.length;n<i;n++)this.m_onstates[n](e,t)}}},{key:"_playOrPause",value:function(){var e=this;if(this.m_media&&!(this.m_myState<3))if(this.m_bPlay){if(this._setState(7),this.m_media.paused){var t=this.m_media.play();t&&t.then(function(t){!e.m_media||e.m_bPlay||e.m_media.paused||e.m_media.pause()}).catch(function(t){!e.m_media||e.m_bPlay||e.m_media.paused||e.m_media.pause()})}}else this._setState(6),this.m_media.paused||this.m_media.pause()}},{key:"_onTimeUpdate",value:function(){if(this.m_media){var e=1e3*this.m_media.currentTime;if(this.m_loop_temp>0&&this.m_bPlay)if(e<this.m_startTime)e=this.m_startTime;else if(this.m_endTime_temp>0&&e>=this.m_endTime_temp+this.m_startTime){this.m_currentTime=this.m_endTime_temp,this.m_viewTime=this.m_currentTime;for(var t=0,n=this.m_ontimes.length;t<n;t++)this.m_ontimes[t](this.m_currentTime);this._playEnded()}else{this.m_currentTime=e-this.m_startTime;for(var i=0,r=this.m_ontimes.length;i<r;i++)this.m_ontimes[i](this.m_currentTime)}else if(e<this.m_startTime)e=this.m_startTime;else{if(this.m_endTime>0&&e>=this.m_endTime){this.m_currentTime=this.m_endTime-this.m_startTime,this.m_viewTime=this.m_currentTime;for(var o=0,s=this.m_ontimes.length;o<s;o++)this.m_ontimes[o](this.m_currentTime);return void this._playEnded()}this.m_currentTime=e-this.m_startTime;for(var a=0,c=this.m_ontimes.length;a<c;a++)this.m_ontimes[a](this.m_currentTime)}}}},{key:"_playEnded",value:function(){if(this.m_media&&!this.m_playEnded)if(this.m_loop_temp>0&&this.m_bPlay){if(this.m_loopCnt_temp++,this.m_endTime_temp<=0){this.m_bPlay=!1;for(var e=0,t=this.m_onends.length;e<t;e++)this.m_onends[e]()}if(this.m_loopCnt_temp<this.m_loop_temp){var n=this.m_startTime_temp>=0&&this.m_startTime_temp<this.m_duration?this.m_startTime_temp:0;this.m_media.currentTime=(n+this.m_startTime)/1e3,this.m_media.paused&&this.m_media.play()}else{this.m_media.paused||this.m_media.pause(),this.m_bPlay=!1;for(var i=0,r=this.m_onendtemps.length;i<r;i++)this.m_onendtemps[i]()}}else{for(var o=0,s=this.m_onends.length;o<s;o++)this.m_onends[o]();0===this.m_config.loop&&this.m_bPlay?(this.m_media.currentTime=this.m_startTime/1e3,this.m_media.paused&&this.m_media.play()):(this.m_playEnded=!0,this.m_bPlay=!1,this.m_media.paused||this.m_media.pause(),1e3*this.m_media.currentTime<this.m_maxTime-100&&(this.m_media.currentTime=this.m_maxTime/1e3),this.m_currentTime=this.m_maxTime-this.m_startTime,this.m_viewTime=this.m_currentTime,this._setState(6))}}},{key:"reset",value:function(){}},{key:"_onTime",value:function(e){this.m_onTimer>=0&&(this._onTimeUpdate(),this.m_onTimer=window.requestAnimationFrame(this._onTime))}},{key:"mediaInited",value:function(e){var t=this;if(!this.m_media&&e){this.m_media=e;var n=function(n){if(t.m_media){t.m_config;e.duration>0&&(t.m_maxTime<=0?(t.m_maxTime=1e3*e.duration,t.m_endTime>=t.m_maxTime?t.m_endTime=0:t.m_endTime>0&&(t.m_maxTime=t.m_endTime),(t.m_startTime<0||t.m_startTime>=t.m_maxTime)&&(t.m_startTime=0),t.m_duration=t.m_maxTime-t.m_startTime,t.m_bPlay_temp?(t._setState(3),t.gotoAndPlay(t.m_startTime_temp,t.m_endTime_temp,t.m_loop_temp)):t.m_seekTime>0&&t.m_seekTime<t.m_duration?(t._setState(3),t.m_media.currentTime=(t.m_seekTime+t.m_startTime)/1e3):0===t.m_startTime?(t._setState(3),t._playOrPause()):t.m_media.currentTime=t.m_startTime/1e3,t.m_seekTime=-1):t.m_seekTime>=0&&(t.m_seekTime<t.m_duration&&(t.m_media.currentTime=(t.m_seekTime+t.m_startTime)/1e3),t.m_seekTime=-1))}};e.onabort=function(e){console.log("onabort")},e.oncanplay=n,e.oncanplaythrough=n,e.ondurationchange=n,e.onloadeddata=n,e.onloadedmetadata=n,e.onerror=function(e){1===t.m_myState&&t._setState(2)},e.onended=function(e){t.m_media&&(t.m_maxTime<=0||t.m_myState<3||t._playEnded())},e.onpause=function(e){t.m_media&&(t.m_maxTime<=0||t.m_myState<3||t._setState(6))},e.onplaying=function(e){t.m_media&&(t.m_maxTime<=0||t.m_myState<3||!t.m_bPlay?t.m_media.paused||t.m_media.pause():t._setState(7))},e.onseeking=function(e){!t.m_media||t.m_maxTime<=0||t.m_myState>=3&&t._setState(5)},e.onseeked=function(e){if(t.m_media&&!(t.m_maxTime<=0))if(t.m_myState>=3)t._playOrPause();else if(t.m_myState<3&&t.m_startTime>0){Math.abs(t.m_startTime-1e3*t.m_media.currentTime)<100?(t._setState(3),t._playOrPause()):t.m_media.currentTime=t.m_startTime/1e3}},e.ontimeupdate=function(e){t.m_myState<=2||(t._onTimeUpdate(),t.m_viewTime=t.m_currentTime)},this._load()}}},{key:"addOnState",value:function(e){this.m_onstates.indexOf(e)>=0||this.m_onstates.push(e)}},{key:"removeOnState",value:function(e){var t=this.m_onstates.indexOf(e);t<0||this.m_onstates.splice(t,1)}},{key:"addOnTime",value:function(e){this.m_ontimes.indexOf(e)>=0||this.m_ontimes.push(e)}},{key:"removeOnTime",value:function(e){var t=this.m_ontimes.indexOf(e);t<0||this.m_ontimes.splice(t,1)}},{key:"addOnPlayEnd",value:function(e){this.m_onends.indexOf(e)>=0||this.m_onends.push(e)}},{key:"removeOnPlayEnd",value:function(e){var t=this.m_onends.indexOf(e);t<0||this.m_onends.splice(t,1)}},{key:"addOnPlayEndTemp",value:function(e){this.m_onendtemps.indexOf(e)>=0||this.m_onendtemps.push(e)}},{key:"removeOnPlayEndTemp",value:function(e){var t=this.m_onendtemps.indexOf(e);t<0||this.m_onendtemps.splice(t,1)}},{key:"bPlay",get:function(){return this.m_bPlay}},{key:"myState",get:function(){return this.m_myState}},{key:"duration",get:function(){return this.m_duration}},{key:"muted",get:function(){return this.m_muted}},{key:"viewTime",get:function(){return this.m_viewTime}},{key:"media",get:function(){return this.m_media}},{key:"config",get:function(){return this.m_config}},{key:"currentTime",get:function(){return this.m_currentTime}}]),e}();a([f.observable],y.prototype,"m_bPlay",void 0),a([f.observable],y.prototype,"m_myState",void 0),a([f.observable],y.prototype,"m_duration",void 0),a([f.observable],y.prototype,"m_viewTime",void 0),a([f.observable],y.prototype,"fullscreen",void 0),a([f.observable],y.prototype,"m_muted",void 0),a([f.computed],y.prototype,"bPlay",null),a([f.computed],y.prototype,"myState",null),a([f.computed],y.prototype,"duration",null),a([f.computed],y.prototype,"muted",null),a([f.computed],y.prototype,"viewTime",null),t.MPlayer=y},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=n(1),p=n(3),m=n(17),_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r(this,o(t).call(this,e)))._div=null,n._bndW=0,n._width=0,n._fontSize=0,n._myW=0,n._numOfLine=0,n._ref=function(e){!n._div&&e&&(n._div=e,n.props.onRef&&n.props.onRef(e))},n._aniFrame=function(e){n._canCalc()&&(n._calc(),window.requestAnimationFrame(n._aniFrame))},n._resized=function(e,t){n._myW=e,window.requestAnimationFrame(n._aniFrame)},n._fontSize=n.props.maxSize?n.props.maxSize:0,n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"_canCalc",value:function(){return!!this.props.view&&(!(this._myW<=0)&&(!!this._div&&!(this._width>0)))}},{key:"_calc",value:function(){if(this._canCalc()&&this._div){var e=this._div.getBoundingClientRect(),t=this._myW-e.width;if(!(t<-1||t>1)){var n=this._div.childNodes;if(0!==n.length){var i=0,r=-100,o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=0;n.forEach(function(e,t){var n=0,c=0;if(e instanceof HTMLElement){var l=e,u=window.getComputedStyle(l);if("absolute"===u.position);else if("inline"===u.display){var p=u.marginRight?parseInt(u.marginRight,10):0,m=u.marginLeft?parseInt(u.marginLeft,10):0;isNaN(p)&&(p=0),isNaN(m)&&(m=0);for(var _=l.getClientRects(),d=0;d<_.length;d++){var f=_.item(d);if(f){var h=f.top,y=f.bottom,v=f.left-m,b=f.right+p;0===a?(r=(h+y)/2,i=1):(r<h||r>y)&&(r=(h+y)/2,i++),o=Math.min(o,v),s=Math.max(s,b),a++}}}else{var g=l.getBoundingClientRect(),w=u.marginRight?parseInt(u.marginRight,10):0,T=u.marginLeft?parseInt(u.marginLeft,10):0;isNaN(w)&&(w=0),isNaN(T)&&(T=0),n=w,c=T;var E=g.top,O=g.bottom,k=g.left-c,P=g.right+n;O-E>0&&(0===a?(r=(E+O)/2,i=1):(r<E||r>O)&&(r=(E+O)/2,i++),o=Math.min(o,k),s=Math.max(s,P),a++)}}else{var S=document.createRange();S.selectNodeContents(e);for(var x=S.getClientRects(),C=0;C<x.length;C++){var N=x.item(C);if(N){var R=N.top,A=N.bottom,I=N.left,D=N.right;0===a?(r=(R+A)/2,i=1):(r<R||r>A)&&(r=(R+A)/2,i++),o=Math.min(o,I),s=Math.max(s,D),a++}}}}),this._numOfLine=i;var c=this.props.maxLineNum?this.props.maxLineNum:1;if(c<1&&(c=1),i>c){var l=this.props.minSize?this.props.minSize:0;this._fontSize>0&&l>0&&this._fontSize>l?this._fontSize--:this._width=Math.ceil(s-o+2)}else a>0&&(this._width=Math.ceil(s-o+2))}}}}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)):!this.props.view&&e.view&&(this._width=0),this.props.view&&this.props.rcalcNum&&this.props.rcalcNum!==e.rcalcNum&&(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)),0===this._fontSize&&this.props.maxSize&&(this._fontSize=this.props.maxSize)}},{key:"render",value:function(){var e,t=this.props.className,n={whiteSpace:"normal"};return this._fontSize>0&&(n.fontSize=this._fontSize+"px"),this.props.lineHeight&&(n.lineHeight=this.props.lineHeight+"%"),this._width>0?(n.width=this._width+"px",n.display="inline-block",e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e):(n.width="100%",n.display="inline-block",this.props.viewWhenInit||(n.opacity=.01),e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e),l.createElement(l.Fragment,null,l.createElement("div",{ref:this._ref,className:t,style:n,onClick:this.props.onClick},this.props.children,l.createElement(m.default,{handleWidth:!0,handleHeight:!0,onResize:this._resized})))}}])&&i(n.prototype,a),c&&i(n,c),t}();c([u.observable],_.prototype,"_width",void 0),c([u.observable],_.prototype,"_fontSize",void 0),_=c([p.observer],_),t.default=_},function(e,t,n){"use strict";var i=n(41);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=n(1),p=n(3),m=n(13),_=n(10),d=.3,f=.5,h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r(this,o(t).call(this,e))).m_btnH=0,n.m_max=0,n.m_sy=-1,n.m_vy=-1,n.m_time=-1,n.m_bSend=!1,n.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},n._ref=function(e){if(!(n.m_max>0)&&e){e.setAttribute("touch-action","none");var t=window.getComputedStyle(e),i=_.nteFloat(t.height,0),r=_.nteFloat(t.bottom,0);i>0&&(n.m_btnH=i,n.m_max=i+r+10,n.props.view||(n.m_state.y=n.m_max))}},n._down=function(e){n.m_state.isOn||n.m_state.disabled||(n.m_state.y=n.props.originY,n.m_state.alpha=1,n.m_state.tDur=0,n.m_state.aDur=0,n.m_state.isOn=!0,n.m_vy=0,n.m_time=Date.now())},n._start=function(e,t){n.m_sy=t.y,n.m_bSend=!0},n._drag=function(e,t){if(n.m_state.isOn&&!n.m_state.disabled){var i=t.y-n.m_sy;"teacher"===n.props.type?(t.deltaY<-1?n.m_bSend=!1:t.deltaY>=0&&(n.m_bSend=!0),i<0&&(i=0)):(t.deltaY>1?n.m_bSend=!1:t.deltaY<=0&&(n.m_bSend=!0),i>0&&(i=0)),!1===n.props.preventDrag&&(n.m_state.y=i+n.props.originY);var r=Date.now();n.m_vy=t.deltaY/(r-n.m_time),n.m_time=r}},n._stop=function(e,t){if(n.m_state.isOn&&!n.m_state.disabled)if(n.m_bSend){var i=n.m_vy*f*1e3,r=t.y-n.m_sy;"teacher"===n.props.type?(i<n.m_btnH?i=n.m_btnH:i>4*n.m_btnH&&(i=4*n.m_btnH),r<0&&(r=0)):(-1*i<n.m_btnH?i=-n.m_btnH:-1*i>4*n.m_btnH&&(i=-4*n.m_btnH),r>0&&(r=0)),n.m_state.tDur=f,n.m_state.aDur=f,n.m_state.alpha=0,n.m_state.y=r+i+n.props.originY,n.props.onSend()}else n.m_state.isOn=!1,n.m_state.tDur=d,n.m_state.aDur=0,n.m_state.y=n.props.originY},e.sended?(n.m_state.alpha=0,n.m_state.disabled=!0):e.view?(n.m_state.y=e.originY,n.m_state.alpha=1,n.m_state.tDur=d,n.m_state.aDur=0,n.m_state.isOn=!1,n.m_state.disabled=!1):e.view||(n.m_state.y=e.originY,n.m_state.alpha=0,n.m_state.tDur=d,n.m_state.aDur=d,n.m_state.isOn=!1,n.m_state.disabled=!0),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=d):(this.m_state.tDur=d,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=d,this.m_state.aDur=d,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=d,this.m_state.aDur=0)}},{key:"render",value:function(){var e=this.m_state,t=e.y,n=e.tDur,i=e.aDur,r=e.alpha,o=e.isOn,s=e.disabled,a={transform:"translateY(".concat(t,"px)"),transition:"transform ".concat(n,"s, opacity ").concat(i/2,"s ").concat(i/2,"s"),opacity:r,pointerEvents:s||!this.props.view?"none":"auto"},c=[];return"pad"===this.props.type?c.push("fel_toteacher"):c.push("fel_topad"),o&&c.push("on"),l.createElement(m.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},l.createElement("button",{ref:this._ref,className:c.join(" "),style:a}))}}])&&i(n.prototype,a),c&&i(n,c),t}();c([u.observable],h.prototype,"m_state",void 0),h=c([p.observer],h),t.default=h},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),p=n(1),m=n(3),_=n(8),d=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,i=r(t).apply(this,arguments),(e=!i||"object"!==a(i)&&"function"!=typeof i?o(n):i).m_state="closed",e._open=function(){return l(o(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("closed"!==this.m_state){e.next=5;break}return this.m_state="opening",e.next=4,_.wait(100);case 4:this.m_state="open";case 5:case"end":return e.stop()}},e,this)}))},e._close=function(){return l(o(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("open"!==this.m_state){e.next=6;break}return this.m_state="closing",e.next=4,_.wait(400);case 4:this.props.onClosed(),this.m_state="closed";case 6:case"end":return e.stop()}},e,this)}))},e}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(c=[{key:"componentDidUpdate",value:function(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}},{key:"render",value:function(){return u.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}}])&&i(n.prototype,c),p&&i(n,p),t}();c([p.observable],d.prototype,"m_state",void 0),d=c([m.observer],d),t.CoverPopup=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function r(e,t,n){for(var r=e.split(/\s/g),o=new RegExp(/[\.\!\?\s]/g),s=[],a=0;a<r.length;a++){var c=r[a];if(""!==c){for(var l=[],u=o.exec(c),p=0,m="";u;)u.index>p&&(m=c.substring(p,u.index),l.push(i.createElement("span",{key:t.key++},m))),m=u[0],l.push(m),p=o.lastIndex,u=o.exec(c);p<c.length&&(m=c.substring(p),l.push(i.createElement("span",{key:t.key++},m))),s.push(i.createElement("span",{key:t.key++,className:n},l.map(function(e){return e})))}}return s}t.parseBlock=function(e,t,n){for(var r=[],o=new RegExp(/\{(.*?)\}/g),s=o.exec(e),a=0,c=0,l="";s;){s.index>a&&(l=e.substring(a,s.index),r.push(l)),l=s[1];var u=n;u||(u=l),r.push(i.createElement("span",{key:c++,className:t,"data-correct":l},u)),a=o.lastIndex,s=o.exec(e)}return a<e.length&&(l=e.substring(a),r.push(l)),r},t.parseUnscramble=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.split(" "),o=!1,s=[],a=0;a<r.length;a++){var c=r[a],l=c.lastIndexOf("{"),u=c.lastIndexOf("}");o?(s[s.length-1]=s[s.length-1]+" "+c,u>l&&(o=!1)):(s.push(c),l>u&&(o=!0))}for(var p=0,m=[],_=n?[]:null,d=0;d<s.length;d++){for(var f=s[d],h=new RegExp(/\{(.*?)\}/g),y=h.exec(f),v=0,b="",g=[];y;)y.index>v&&(b=f.substring(v,y.index),g.push(b)),b=y[1],g.push(i.createElement("span",{key:p++,className:t},b)),_&&_.push(b),v=h.lastIndex,y=h.exec(f);v<f.length&&(b=f.substring(v),g.push(b)),d>0&&m.push(" "),m.push(i.createElement("div",{key:p++},g.map(function(e){return e})))}if(_&&n)for(var w,T=0;(w=_.length)>0;){var E=Math.floor(Math.random()*w);0===T&&0===E&&_.length>1||E<w&&(n.push(_[E]),_.splice(E,1),T++)}return i.createElement(i.Fragment,null,m.map(function(e){return e}))},t.sentence2jsx=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,c=new RegExp(/\{(.*?)\}/g),l={key:0},u=[];return e.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>").forEach(function(e,p){if(n){for(var m=c.exec(e),_=0,d="",f=[];m;){m.index>_&&(d=e.substring(_,m.index),f.push(r(d,l,a))),d=m[1];var h=o;h||(h=d),t=s?r(h,l,a):h,f.push(i.createElement("span",{key:l.key++,className:n,"data-correct":d},t)),_=c.lastIndex,m=c.exec(e)}_<e.length&&(d=e.substring(_),f.push(r(d,l,a))),u[p]=i.createElement(i.Fragment,{key:l.key++},f)}else u[p]=i.createElement(i.Fragment,{key:l.key++},r(e,l,a))}),u}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var m=n(0),_=n(1),d=n(3),f=n(17),h=n(15).default,y=n(4),v=n(14),b=n(6),g=Y(255,250,23,1),w=Y(0,0,0,.2),T=Y(150,40,202,1),E=Y(0,42,227,1),O=Y(193,55,169,1),k=Y(255,114,0,1),P=Y(0,146,238,1),S=Y(150,40,202,1),x=Y(0,42,227,1),C=Y(193,55,169,1),N=Y(255,114,0,1),R=Y(0,146,238,1),A={brdThick:2,bgColor:T,brdColor:g,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:g},I={brdThick:2,bgColor:E,brdColor:g,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:g},D={brdThick:2,bgColor:O,brdColor:g,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:g},j={brdThick:2,bgColor:k,brdColor:g,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:g},B={brdThick:2,bgColor:P,brdColor:g,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:g},M=(Y(255,255,255,1),Y(0,0,0,.2),{brdThick:2,bgColor:w,brdColor:S,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:Y(0,0,0,.2)}),L={brdThick:2,bgColor:w,brdColor:x,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:Y(0,0,0,.2)},q={brdThick:2,bgColor:w,brdColor:C,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:Y(0,0,0,.2)},F={brdThick:2,bgColor:w,brdColor:N,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:Y(0,0,0,.2)},U={brdThick:2,bgColor:w,brdColor:R,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:Y(0,0,0,.2)},z=!1,H=-1,V=Number.MIN_VALUE,Q=Number.MIN_VALUE,G=function(e){function t(e){var n;i(this,t),(n=s(this,a(t).call(this,e))).m_width=0,n.m_height=0,n.m_viewScript=!0,n._refCanvas=function(e){!n.m_ctx&&e&&(n.m_canvas=e,n.m_ctx=e.getContext("2d"),n._draw())},n._onResize=function(e,t){n.m_width===e&&n.m_height===t||n.m_ctx&&(n.m_width=e,n.m_height=t,n._draw())},n._onClickThumb=function(e){n.props.clickThumb(n.props.idx,n.props.script)},n._onTextDown=function(e){var t=e.target;z=t&&t.classList.contains("btn_student"),H=n.props.idx,V=e.clientX,Q=e.clientY},n._onTextUp=function(e){var t=H===n.props.idx&&Math.abs(V-e.clientX)<30&&Math.abs(Q-e.clientY)<30;H=-1,V=Number.MIN_VALUE,Q=Number.MIN_VALUE,t&&("DIALOGUE"===n.props.compDiv?(y.App.pub_playBtnTab(),n.m_viewScript=!n.m_viewScript):z&&n.props.qnaReturnsClick&&n.props.qnaReturnsClick(n.props.idx))},n._onTextCancel=function(e){H=-1,V=Number.MIN_VALUE,Q=Number.MIN_VALUE};var r=e.script.dms_eng,o=(r=r.replace(/<\s*br\s*\/*\s*>/gi,"<br>")).split("<br>");return n.m_jsx=m.createElement(m.Fragment,null,o.map(function(e,t){var n=e.split(" ").map(function(e,n){return 0===n?m.createElement("span",{key:t+"_"+n,className:"block"},e):m.createElement(m.Fragment,{key:t+"_"+n},m.createElement("span",{className:"space"}," "),m.createElement("span",{className:"block"},e))});return 0===t?n:m.createElement(m.Fragment,{key:t},m.createElement("br",null),n)})),o=(r=(r=e.script.dms_kor[y.App.lang]).replace(/<\s*br\s*\/*\s*>/gi,"<br>")).split("<br>"),n.m_trans=m.createElement(m.Fragment,null,o.map(function(e,t){var n=e.split(" ").map(function(e,n){return 0===n?m.createElement("span",{key:t+"_"+n,className:"block"},e):m.createElement(m.Fragment,{key:t+"_"+n},m.createElement("span",{className:"space"}," "),m.createElement("span",{className:"block"},e))});return 0===t?n:m.createElement(m.Fragment,{key:t},m.createElement("br",null),n)})),e.script.qnums&&e.script.qnums.length>0?n.m_clue=m.createElement("div",{className:"clue_qnum"},e.script.qnums.map(function(e,t){return m.createElement("span",{key:t,className:"qnum"+e},e)})):n.m_clue=m.createElement(m.Fragment,null),n.m_prog=m.createElement(v.StandBar,{percent:n.props.script.app_preview}),n}return c(t,m.Component),o(t,[{key:"_draw",value:function(){if(this.m_canvas&&0!==this.m_width&&0!==this.m_height&&(this.m_ctx.clearRect(0,0,this.m_canvas.width,this.m_canvas.height),this.m_canvas.width=this.m_width+15,this.m_canvas.height=this.m_height+20,this.props.view&&"DIALOGUE"===this.props.compDiv)){var e,t,n,i,r,o,s=this.props;s.focus||s.selected?"A"===s.roll?(e=A).brdColor=S:"B"===s.roll?(e=I).brdColor=x:"C"===s.roll?(e=D).brdColor=C:"D"===s.roll?(e=j).brdColor=N:(e=B).brdColor=R:e="A"===s.roll?M:"B"===s.roll?L:"C"===s.roll?q:"D"===s.roll?F:U,n=12,t=10,i=10,r=2,o=38,function(e,t,n,i,r,o,s,a,c){arguments.length>9&&void 0!==arguments[9]&&arguments[9],arguments.length>10&&void 0!==arguments[10]&&arguments[10];var l=c.brdThick,u=c.brdColor,p=c.bgColor,m=c.shadowX,_=c.shadowY,d=c.shadowBlur,f=c.shadowColor,h=1.8*(t-o),y=(0!==m||0!==_||d>0)&&f.a>0,v=p.a;y&&v<1&&(p.a=1);e.lineWidth=l,e.lineCap="butt",e.lineJoin="miter",e.strokeStyle=W(u),e.fillStyle=W(p),e.beginPath(),e.moveTo(t+i,n+r-a),a>0&&e.arc(t+i-a,n+r-a,a,0,Math.PI/2);e.lineTo(t+a,n+r),a>0&&e.arc(t+a,n+r-a,a,Math.PI/2,Math.PI);e.lineTo(t,s+h/2),e.lineTo(o,s),e.lineTo(t,s-h/2),e.lineTo(t,n+a),a>0&&e.arc(t+a,n+a,a,Math.PI,3*Math.PI/2);e.lineTo(t+i-a,n),a>0&&e.arc(t+i-a,n+a,a,3*Math.PI/2,2*Math.PI);e.closePath(),y?(e.shadowColor=W(f),e.shadowBlur=d,e.shadowOffsetX=m,e.shadowOffsetY=_,e.fill(),v<1?(e.globalCompositeOperation="destination-out",e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),l>0&&e.stroke(),e.globalCompositeOperation="source-over",p.a=v,e.fillStyle=W(p),e.fill(),l>0&&e.stroke()):l>0&&(e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke())):(e.fill(),l>0&&e.stroke());e.globalCompositeOperation="source-over"}(this.m_ctx,n,i,this.m_width-n-1,this.m_height,r,o,t,e)}}},{key:"componentDidUpdate",value:function(e){this.props.focus===e.focus&&this.props.selected===e.selected&&this.props.view===e.view&&this.props.compDiv===e.compDiv&&this.props.viewTrans===e.viewTrans&&this.props.sroll===e.sroll&&this.props.shadowing===e.shadowing||(H=-1,V=Number.MIN_VALUE,Q=Number.MIN_VALUE,this._draw()),this.props.viewScript!==e.viewScript&&(this.m_viewScript=this.props.viewScript),this.props.compDiv!==e.compDiv&&(this.m_viewScript="COMPREHENSION"===this.props.compDiv)}},{key:"render",value:function(){var e,t,n=this.props,i=n.script,r=n.roll,o=n.sroll,s=n.focus,a=n.viewClue,c=n.viewTrans,l=n.shadowing,u=n.numOfReturn,p=["roll"+r];p.push("teacher"),this.props.selected&&p.push("focus"),a&&i.qnums&&i.qnums.length>0?(p.push("clue qnum"+i.qnums[0]),e=!0):e=!1,this.m_viewScript||p.push("hide-script"),""!==o&&o===r&&(p.push("in-roll"),s&&p.push("on-roll")),s&&l&&p.push("shadowing"),t=c?this.m_trans:this.m_jsx;var _=p.join(" ");return m.createElement(m.Fragment,null,m.createElement("div",{className:"thumb "+_,onClick:this._onClickThumb},m.createElement("div",{className:"progress"},this.m_prog),m.createElement("img",{className:"img_cls",src:y.App.data_url+this.props.image_s,draggable:!1}),m.createElement("div",{className:"img_cls"}),m.createElement("span",null)),m.createElement("div",{className:"ballon "+_,onPointerDown:this._onTextDown,onPointerUp:this._onTextUp,onPointerCancel:this._onTextCancel,onPointerLeave:this._onTextCancel},m.createElement("canvas",{ref:this._refCanvas}),m.createElement("span",{className:c?"view-trans":""},m.createElement("span",null,t),m.createElement("div",{className:"student-clue"},m.createElement(b.ToggleBtn,{className:"btn_student"+(e?"":" single"),view:u>0},u),this.m_clue)),m.createElement(f.default,{handleHeight:!0,handleWidth:!0,onResize:this._onResize})))}}]),t}();function Y(e,t,n,i){return{r:e,g:t,b:n,a:i}}function W(e){var t=e.r,n=e.g,i=e.b,r=e.a;return"rgba(".concat(t,", ").concat(n,", ").concat(i,", ").concat(r,")")}p([_.observable],G.prototype,"m_viewScript",void 0),G=p([d.observer],G);var X=function(e){function t(){var e;return i(this,t),(e=s(this,a(t).apply(this,arguments))).m_soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,noSwipingClass:"swiper-no-swiping",scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},e._refSwiper=function(t){!e.m_swiper&&t&&(e.m_swiper=t.swiper)},e}return c(t,m.Component),o(t,[{key:"scrollTo",value:function(e,t){(e-=1)<0&&(e=0),this.m_swiper.slideTo(e,t)}},{key:"componentDidUpdate",value:function(e){if(this.m_swiper){var t=!1;if(e.focusIdx!==this.props.focusIdx&&this.props.focusIdx>=0){var n=this.props.focusIdx-1;n<0&&(n=0),this.m_swiper.slideTo(n)}this.props.view!==e.view&&(t=!0,this.m_swiper.slideTo(0,0)),this.props.compDiv!==e.compDiv&&(t=!0,this.m_swiper.slideTo(0,0)),this.props.roll!==e.roll&&""!==this.props.roll&&(t=!0,this.m_swiper.slideTo(0)),this.props.shadowing&&!e.shadowing&&(t=!0,this.m_swiper.slideTo(0)),this.props.noSwiping!==e.noSwiping&&(t=!0,this.m_soption.noSwiping=this.props.noSwiping,this.m_swiper.params.noSwiping=this.props.noSwiping,this.m_soption.followFinger=!this.props.noSwiping,this.m_swiper.params.followFinger=!this.props.noSwiping,this.m_soption.scrollbar&&(this.m_soption.scrollbar.draggable=!this.props.noSwiping),this.m_swiper.params.scrollbar&&(this.m_swiper.params.scrollbar.draggable=!this.props.noSwiping),this.props.noSwiping?(this.m_soption.noSwipingClass="swiper-wrapper",this.m_swiper.params.noSwipingClass="swiper-wrapper"):(this.m_soption.noSwipingClass="swiper-no-swiping",this.m_swiper.params.noSwipingClass="swiper-no-swiping"));var i=-1;if(this.props.viewTrans!==e.viewTrans&&(this.props.noSwiping||(i=this.m_swiper.activeIndex),t=!0),this.props.viewClue&&!e.viewClue&&(t=!0,i<=0))for(var r=this.props.data.scripts,o=0;o<r.length;o++)if(void 0!==r[o].qnums&&r[o].qnums.length>0&&r[o].qnums.indexOf(1)>=0){i=o>1?o-1:0;break}t&&this.props.view&&(this.m_swiper.update(),this.m_swiper.scrollbar&&this.m_swiper.scrollbar.updateSize(),i>=0&&this.m_swiper.slideTo(i,0))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,i=t.selected,r=t.qnaReturns,o=n.speakerA.image_s,s=n.speakerB.image_s,a=n.speakerC.image_s,c=n.speakerD.image_s,l=n.speakerE.image_s,u=["script_box"];u.push(this.props.compDiv);var p=u.join(" ");return m.createElement(m.Fragment,null,m.createElement(h,Object.assign({},this.m_soption,{ref:this._refSwiper}),n.scripts.map(function(t,n){var u;u="E"===t.roll?l:"D"===t.roll?c:"C"===t.roll?a:"B"===t.roll?s:o;var _=i.indexOf(n),d=n<r.length?r[n].num:0;return m.createElement("div",{className:p,key:"script_"+n},m.createElement(G,{view:e.props.view,script:t,image_s:u,idx:n,focus:n===e.props.focusIdx,selected:_>=0,numOfReturn:d,roll:t.roll,sroll:e.props.roll,shadowing:e.props.shadowing,clickThumb:e.props.clickThumb,clickText:e.props.clickText,qnaReturnsClick:e.props.qnaReturnsClick,compDiv:e.props.compDiv,viewClue:e.props.viewClue,viewScript:e.props.viewScript,viewTrans:e.props.viewTrans}))})),m.createElement("div",{style:{display:"none"}},this.props.numRender))}}]),t}();X=p([d.observer],X),t.default=X},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var m=n(0),_=n(5),d=n(3),f=n(1),h=n(13),y=n(6),v=n(4),b=n(47),g=n(16),w=n(48);function T(e,t){for(var n=.01*Math.round(t/.01),i=0,r=e.length;i<r;i++){var o=e[i];if(n>=o.dms_start&&n<=o.dms_end)return i;if(n<o.dms_start)break}return-1}function E(e,t){var n=Math.round(t/1e3),i=Math.round(e/1e3),r=Math.floor(i/60),o=Math.floor(r/60),s="";return r%=60,o>0||n>=3600?(s=o+":",s+=r>=10?r+":":"0"+r+":"):n>=600?s+=r>=10?r+":":"0"+r+":":s=r+":",s+=(i%=60)>=10?i:"0"+i}var O=function(e){function t(){var e;return i(this,t),(e=s(this,a(t).apply(this,arguments))).m_dragging=!1,e.m_bgW=0,e.m_s=0,e.m_dragLeft=0,e.m_dragLeft_s=0,e._seek=_.throttle(function(t){if(!e.props.disable){var n=e.props.player;n.seek(n.duration*t/100)}},300,{leading:!1}),e._refBG=function(t){!e.m_bg&&t&&(e.m_bg=t)},e._start=function(t,n){if(e.m_bg&&!e.props.disable&&!(e.props.player.duration<=0||(e.m_bgW=e.m_bg.getBoundingClientRect().width,e.m_bgW<=0))){var i=100*n.x/e.m_bgW;i<0?i=0:i>100&&(i=100),e.m_dragLeft_s=i,e.m_dragLeft=i,e.m_s=n.x,e.m_dragging=!0}},e._drag=function(t,n){if(e.m_dragging&&!e.props.disable){var i=e.m_dragLeft_s+100*(n.x-e.m_s)/e.m_bgW;i<0?i=0:i>100&&(i=100),e.m_dragLeft=i,e.props.player.bPlay||e._seek(i)}},e._stop=function(t,n){if(e.m_dragging&&!e.props.disable){e.m_dragging=!1;var i=e.props.player;i.seek(i.duration*e.m_dragLeft/100)}},e}return c(t,m.Component),o(t,[{key:"render",value:function(){var e=this.props.player,t=0;e.duration>0&&(t=e.viewTime/e.duration*100);var n=0,i=this.m_dragLeft;return n=this.m_dragging?i:t,m.createElement(m.Fragment,null,m.createElement("div",{className:"prog_box"},m.createElement(h.DraggableCore,{onDrag:this._drag,onStart:this._start,onStop:this._stop},m.createElement("div",{className:"prog_bg",ref:this._refBG},m.createElement("div",{className:"prog_bar",style:{width:t+"%"}}),m.createElement("div",{className:"prog_tmp"}),m.createElement(y.ToggleBtn,{className:"prog_btn",style:{left:n+"%"}})))),m.createElement("div",{className:"video_time",style:{width:(e.duration>=6e5?110:105)+"px"}},m.createElement("span",null,E(e.viewTime,e.duration))," / ",m.createElement("span",null,E(e.duration,e.duration))))}}]),t}();p([f.observable],O.prototype,"m_dragLeft",void 0),O=p([d.observer],O);var k=function(e){function t(){return i(this,t),s(this,a(t).apply(this,arguments))}return c(t,m.Component),o(t,[{key:"render",value:function(){var e=this.props.player;return m.createElement("div",{className:"control"},m.createElement("div",{className:"control_left"},m.createElement(y.ToggleBtn,{className:"btn_play_pause",on:this.props.isPlay,onClick:this.props.togglePlay}),m.createElement(y.ToggleBtn,{className:"btn_stop",onClick:this.props.stopClick}),m.createElement(y.ToggleBtn,{className:"btn_prev",onClick:this.props.prevClick}),m.createElement(y.ToggleBtn,{className:"btn_next",onClick:this.props.nextClick})),m.createElement("div",{className:"control_top"},m.createElement("div",null,m.createElement(O,{player:e,disable:this.props.disable}))),m.createElement("div",{className:"control_right"},m.createElement(y.ToggleBtn,{className:"btn_subscript",on:this.props.viewCaption,onClick:this.props.toggleCaption}),m.createElement(y.ToggleBtn,{className:"btn_audio",onClick:this.props.toggleMute,on:e.muted}),m.createElement(y.ToggleBtn,{className:"btn_fullscreen",onClick:this.props.toggleFullscreen}),m.createElement(y.ToggleBtn,{className:"btn_fullscreen_off",onClick:this.props.toggleFullscreen})))}}]),t}();k=p([d.observer],k);var P=function(e){function t(){var e;return i(this,t),(e=s(this,a(t).apply(this,arguments)))._viewEng=!0,e._viewTrans=!0,e._toggleEng=function(){e._viewEng=!e._viewEng},e._toggleTrans=function(){e._viewTrans=!e._viewTrans},e}return c(t,m.Component),o(t,[{key:"render",value:function(){var e,t=this.props,n=(t.view,t.script);return n?(e=this._viewEng?n.dms_eng:m.createElement(m.Fragment,null,"ย"),this._viewTrans?n.dms_kor[v.App.lang]:m.createElement(m.Fragment,null,"ย")):(e=m.createElement(m.Fragment,null,"ย"),m.createElement(m.Fragment,null,"ย")),m.createElement("div",{className:"caption_box",style:{display:this.props.view?"":"none"}},m.createElement("div",{className:"caption_eng"},m.createElement("span",null,e),m.createElement(y.ToggleBtn,{className:"btn_eng",on:this._viewEng,onClick:this._toggleEng})))}}]),t}();p([f.observable],P.prototype,"_viewEng",void 0),p([f.observable],P.prototype,"_viewTrans",void 0),P=p([d.observer],P),t.CaptionBox=P;var S=function(e){function t(){var e;return i(this,t),(e=s(this,a(t).apply(this,arguments))).m_viewCaption=!1,e.m_curIdx=-1,e.m_viewCountDown=!1,e.m_yourturn=-1,e.m_ytNext=-1,e._refBox=function(t){!e.m_box&&t&&(e.m_box=t)},e._refVideo=function(t){if(t){var n=e.props.player;if(!n.media){n.mediaInited(t),n.load(v.App.data_url+e.props.data.video);var i=e.props.data.scripts;n.addOnTime(function(t){var r=T(i,t/=1e3);if(e.m_curIdx!==r){if(e.props.shadowing){if(!(e.m_yourturn<0))return;if(e.m_curIdx>=0){e.m_ytNext=r,n.pause();var o=i[e.m_curIdx],s=2e3*(o.dms_end-o.dms_start);return void(e.m_yourturn=_.delay(function(){e.m_yourturn>=0&&e.props.isShadowPlay&&(e.m_curIdx=e.m_ytNext,e.m_yourturn=-1,n.play())},s))}}e.m_curIdx=r,e.props.onChangeScript(r)}})}}},e._playClick=function(){e.m_viewCountDown||e.props.shadowing||(v.App.pub_playBtnTab(),e.props.player.play())},e._clickVideo=function(){if(!e.m_viewCountDown&&!e.props.shadowing){var t=e.props.player;t.bPlay?(v.App.pub_playBtnTab(),t.pause()):(v.App.pub_playBtnTab(),(t.currentTime>=t.duration||t.currentTime<e.props.playerInitTime)&&t.seek(1e3*e.props.playerInitTime),t.play())}},e._toggleFullscreen=function(){v.App.pub_playBtnTab(),document.fullscreenElement===e.m_box||document.webkitFullscreenElement===e.m_box?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.m_box.requestFullscreen?e.m_box.requestFullscreen():e.m_box.webkitRequestFullscreen&&e.m_box.webkitRequestFullscreen()},e._prevClick=function(){if(!e.m_viewCountDown){v.App.pub_playBtnTab(),e.m_curIdx=-1,e.m_yourturn>=0&&(clearTimeout(e.m_yourturn),e.m_yourturn=-1);var t=e.props.player,n=e.props.data.scripts,i=t.currentTime/1e3,r=T(n,i);if(r>=0)if(r>0){var o=n[r-1];e.props.playerInitTime>o.dms_start?t.seek(1e3*e.props.playerInitTime):t.seek(1e3*o.dms_start)}else t.seek(1e3*e.props.playerInitTime);else for(var s=n.length-1;s>=0;s--){if(i>n[s].dms_start){e.props.playerInitTime>n[s].dms_start?t.seek(1e3*e.props.playerInitTime):t.seek(1e3*n[s].dms_start);break}0===s&&t.seek(1e3*e.props.playerInitTime)}e.props.shadowing&&(e.props.isShadowPlay?t.play():t.pause())}},e._nextClick=function(){if(!e.m_viewCountDown){v.App.pub_playBtnTab(),e.m_curIdx=-1,e.m_yourturn>=0&&(clearTimeout(e.m_yourturn),e.m_yourturn=-1);var t=e.props.player,n=e.props.data.scripts,i=t.currentTime/1e3,r=T(n,i);if(r>=0)if(r<n.length-1){var o=n[r+1];t.seek(1e3*o.dms_start)}else e.props.setShadowPlay(!1),t.seek(t.duration);else for(var s=0,a=n.length;s<a;s++){if(i<n[s].dms_start){t.seek(1e3*n[s].dms_start);break}s===a-1&&(e.props.setShadowPlay(!1),t.seek(t.duration))}e.props.shadowing&&(e.props.isShadowPlay?t.play():t.pause())}},e._toggleMute=function(){if(""===e.props.roll&&!e.props.shadowing){v.App.pub_playBtnTab();var t=e.props.player;t.setMuted(!t.muted)}},e._togglePlay=function(){if(!e.m_viewCountDown){v.App.pub_playBtnTab();var t=e.props.player;if(e.m_yourturn>=0&&(e.m_curIdx=e.m_ytNext,clearTimeout(e.m_yourturn),e.m_yourturn=-1),e.props.shadowing){var n=!e.props.isShadowPlay;e.props.setShadowPlay(n),n?t.play():t.pause()}else t.bPlay?t.pause():((t.currentTime>=t.duration||t.currentTime<e.props.playerInitTime)&&t.seek(1e3*e.props.playerInitTime),t.play())}},e._stopClick=function(){v.App.pub_playBtnTab(),e.props.player.gotoAndPause(1e3*e.props.playerInitTime),e.m_yourturn>=0&&(clearTimeout(e.m_yourturn),e.m_yourturn=-1),e.props.stopClick()},e._toggleCaption=function(){v.App.pub_playBtnTab(),e.m_viewCaption=!e.m_viewCaption},e._countStart=function(){},e._countZero=function(){var t=e.props,n=t.player,i=(t.data,t.roll);t.shadowing;e.m_viewCountDown=!1,""!==i&&((n.currentTime!==e.props.playerInitTime||n.currentTime<e.props.playerInitTime)&&n.seek(1e3*e.props.playerInitTime),n.play())},e}return c(t,m.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.player;t.data,t.roll,t.shadowing;this.props.compDiv!==e.compDiv&&(this.m_curIdx=-1,this.m_viewCountDown=!1,this.m_yourturn>=0&&(clearTimeout(this.m_yourturn),this.m_yourturn=-1),this.props.setShadowPlay(!1)),this.props.roll!==e.roll&&(this.m_yourturn>=0&&(clearTimeout(this.m_yourturn),this.m_yourturn=-1),this.props.setShadowPlay(!1),""===this.props.roll?(n.pause(),this.props.countdown.pause(),this.props.countdown.reset(),this.m_viewCountDown=!1):((n.currentTime!==this.props.playerInitTime||n.currentTime<this.props.playerInitTime)&&n.seek(1e3*this.props.playerInitTime),this.m_curIdx=-1,n.pause(),n.setMuted(!1),this.m_viewCountDown=!0,this.props.countdown.reset(),this.props.countdown.start())),this.props.shadowing!==e.shadowing&&(this.m_yourturn>=0&&(clearTimeout(this.m_yourturn),this.m_yourturn=-1),this.props.setShadowPlay(this.props.shadowing),this.props.shadowing?((n.currentTime!==this.props.playerInitTime||n.currentTime<this.props.playerInitTime)&&n.seek(1e3*this.props.playerInitTime),this.m_curIdx=-1,n.play(),n.setMuted(!1)):n.pause())}},{key:"render",value:function(){var e,t=this.props,n=t.player,i=t.data,r=t.roll,o=t.shadowing,s=t.isShadowPlay,a=i.scripts;this.m_viewCaption&&this.m_curIdx>=0&&(e=a[this.m_curIdx]);var c="A"===r||"B"===r,l=!(c||o||5!==n.myState&&1!==n.myState),u=(!c&&!o&&n.bPlay,!o&&n.bPlay||o&&this.props.isShadowPlay);return m.createElement("div",{className:"video_box",ref:this._refBox},m.createElement("div",{className:"video"},m.createElement("video",{controls:!1,ref:this._refVideo,onClick:this._clickVideo}),m.createElement(b.Loading,{view:l}),m.createElement(P,{view:this.m_viewCaption,script:e}),m.createElement(g.CountDown2,{state:this.props.countdown,view:this.m_viewCountDown,onStart:this._countStart,onComplete:this._countZero}),m.createElement(w.default,{className:"yourturn",view:this.m_yourturn>=0&&s,start:this.m_yourturn>=0})),m.createElement(k,{player:n,disable:this.m_viewCountDown||o,isPlay:u,toggleFullscreen:this._toggleFullscreen,togglePlay:this._togglePlay,stopClick:this._stopClick,prevClick:this._prevClick,nextClick:this._nextClick,viewCaption:this.m_viewCaption,toggleCaption:this._toggleCaption,toggleMute:this._toggleMute}))}}]),t}();p([f.observable],S.prototype,"m_viewCaption",void 0),p([f.observable],S.prototype,"m_curIdx",void 0),p([f.observable],S.prototype,"m_viewCountDown",void 0),p([f.observable],S.prototype,"m_yourturn",void 0),p([f.observable],S.prototype,"m_ytNext",void 0),S=p([d.observer],S),t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.Loading=function(e){var t=e.view,n={position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"};return n.backgroundImage='url("'.concat("/content/digenglish_lib/",'images/loading.svg")'),n.backgroundColor="rgba(0, 0, 0, 0.1)",n.zIndex=101,t||(n.visibility="hidden",n.zIndex=-1,n.pointerEvents="none"),i.createElement("div",{style:n})}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=n(3),p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r(this,o(t).call(this,e)))._svg=null,n._refSVG=function(e){!n._svg&&e&&(n._svg=e,n._svg.setCurrentTime(0),n.props.start&&n._svg.animationsPaused()?n._svg.unpauseAnimations():n.props.start||n._svg.animationsPaused()||n._svg.pauseAnimations())},n._className=e.className,n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"componentWillUpdate",value:function(e){if(this.props.view!==e.view||this.props.start!==e.start){var t=[];t.push(e.className),e.view||t.push("hide"),this._className=t.join(" ")}}},{key:"componentDidUpdate",value:function(e){this.props.start&&!e.start?this._svg&&(this._svg.setCurrentTime(0),this._svg.animationsPaused()&&this._svg.unpauseAnimations()):!this.props.start&&e.start&&this._svg&&(this._svg.animationsPaused()||this._svg.pauseAnimations())}},{key:"render",value:function(){return l.createElement("div",{className:this._className},l.createElement("svg",{ref:this._refSVG,imageRendering:"auto",baseProfile:"basic",version:"1.1",x:"0px",y:"0px",width:"460",height:"560",viewBox:"0 0 460 560",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},l.createElement("g",{overflow:"visible"},l.createElement("g",{mask:"url(#mask_ut)"},l.createElement("g",{transform:"translate(58 62)",opacity:"1"},l.createElement("animate",{attributeName:"opacity",dur:"2.533s",keyTimes:"0;.25;1",values:"0;1;1",fill:"freeze"}),l.createElement("image",{overflow:"visible",xlinkHref:"".concat("/content/digenglish_lib/","images/yourturn/girl.png"),height:"632",width:"357",transform:"translate(0 -33.5)"}))),l.createElement("mask",{id:"mask_ut"},l.createElement("g",null,l.createElement("g",null,l.createElement("g",null,l.createElement("g",null,l.createElement("path",{fill:"#FFF",stroke:"none",d:"M50.05 433.25L51 459.5 163.85 456.1 429.15 456.1 429.15 13 50.05 13 50.05 433.25Z",fillOpacity:"1"}))),l.createElement("animate",{attributeName:"display",fill:"freeze",repeatCount:"1",dur:"2.533s",keyTimes:"0;.75;1",values:"none;inline;inline"})),l.createElement("g",{display:"none"},l.createElement("g",null,l.createElement("g",null,l.createElement("path",{fill:"#FFF",stroke:"none",d:"M50 433.25L50.9 459.45 163.75 456.1 429.1 456.1 429.1 13 50 13 50 433.25Z",fillOpacity:"1"}))),l.createElement("animate",{attributeName:"display",fill:"freeze",repeatCount:"1",dur:"2.533s",keyTimes:"0;.75;1",values:"inline;none;none"})))),l.createElement("g",{transform:"translate(19.75 413.05)",opacity:"1"},l.createElement("animateTransform",{attributeName:"transform",additive:"replace",type:"translate",dur:"2.533s",keyTimes:"0;.51299;.579;.63199;.632;.697;.74999;.75;1",values:"225.1,483.05;225.1,483.05;225.009,483.051;225.009,483.051;225.1,483.05;225.009,483.051;225.009,483.051;225.1,483.05;225.1,483.05",fill:"freeze"}),l.createElement("animateTransform",{attributeName:"transform",additive:"sum",type:"scale",dur:"2.533s",keyTimes:"0;.51299;.579;.63199;.632;.697;.74999;.75;1",values:"1,1;1,1;1.1,1.1;1.1,1.1;1,1;1.1,1.1;1.1,1.1;1,1;1,1",fill:"freeze"}),l.createElement("animateTransform",{attributeName:"transform",additive:"sum",type:"translate",dur:"2.533s",keyTimes:"0;.51299;.579;.63199;.632;.697;.74999;.75;1",values:"-205.35,-70;-205.35,-70;-205.2,-70.05;-205.2,-70.05;-205.35,-70;-205.2,-70.05;-205.2,-70.05;-205.35,-70;-205.35,-70",fill:"freeze"}),l.createElement("animate",{attributeName:"opacity",dur:"2.533s",keyTimes:"0;.25;1",values:"0;1;1",fill:"freeze"}),l.createElement("image",{overflow:"visible",xlinkHref:"".concat("/content/digenglish_lib/","images/yourturn/ut.png"),height:"140",width:"410",transform:"translate(0 .05)"})))))}}])&&i(n.prototype,a),c&&i(n,c),t}();p=c([u.observer],p),t.default=p},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n(6),u=n(4),p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).apply(this,arguments)))._onClick=function(){e.props.disabled||(u.App.pub_playBtnTab(),e.props.onClick(e.props.num))},e}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c.Component),n=t,(i=[{key:"render",value:function(){return c.createElement(l.ToggleBtn,{className:this.props.className+" btn-mc-"+this.props.num,on:this.props.on,onClick:this._onClick,disabled:this.props.disabled},this.props.children)}}])&&r(n.prototype,i),p&&r(n,p),t}();t.default=p},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),p=n(6),m=n(8),_=n(1),d=n(3),f=n(4),h=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,i=r(t).apply(this,arguments),(e=!i||"object"!==a(i)&&"function"!=typeof i?o(n):i)._playing=!1,e._nPlay=0,e.toggle=function(){e._onDown()},e._onPlay=function(){e._playing=!0,e.props.onPlay&&e.props.onPlay(),f.App.pub_play(e.props.url,e._onPlayEnd)},e._onPlayEnd=function(t){return l(o(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._nPlay>0)){e.next=8;break}if(this._nPlay=this._nPlay-1,!(this._nPlay>0)){e.next=8;break}return this._playing=!1,e.next=6,m.wait(500);case 6:return this._nPlay>0&&this._onPlay(),e.abrupt("return");case 8:this._playing&&(this._playing=!1,this.props.onStop&&this.props.onStop());case 9:case"end":return e.stop()}},e,this)}))},e._onDown=function(){e.props.disabled||(e._playing?(e._playing=!1,f.App.pub_stop(),e.props.onStop&&e.props.onStop()):(e._playing=!0,e.props.onPlay&&e.props.onPlay(),f.App.pub_play(e.props.url,e._onPlayEnd)))},e}var n,c,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(c=[{key:"componentWillUnmount",value:function(){this._nPlay=0,this._playing&&(this._playing=!1,f.App.pub_stop())}},{key:"componentDidUpdate",value:function(e){this.props.nPlay!==e.nPlay&&(this._nPlay=this.props.nPlay?this.props.nPlay:0,this._nPlay>0&&!this._playing&&this._onPlay())}},{key:"render",value:function(){return u.createElement(p.ToggleBtn,{className:this.props.className,view:this.props.view,on:this._playing,disabled:this.props.disabled,onMouseDown:this._onDown})}}])&&i(n.prototype,c),_&&i(n,_),t}();c([_.observable],h.prototype,"_playing",void 0),h=c([d.observer],h),t.BtnAudio=h},function(e,t,n){}]);