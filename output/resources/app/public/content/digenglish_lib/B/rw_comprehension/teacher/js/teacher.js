!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=28)}([function(e,t){e.exports=React},function(e,t){e.exports=mobx},function(e,t){e.exports=mobxReact},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),o=n(7);function s(e){if(!e)return e;e.displayMode=""+e.displayMode=="2"?"2":"1";var t=e.thumb?e.thumb:"";return(t.startsWith("static/")||""===t)&&(t=t.endsWith("w.jpg")?"".concat("/content/digenglish_lib/","/images/default_member_w.jpg"):"".concat("/content/digenglish_lib/","/images/default_member_m.jpg")),e.thumb=t,e}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"pub_init",value:function(){var t=navigator.userAgent;e._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),e._tempBnd=document.createElement("div"),e._tempBnd.style.display="none",e._tempEl=document.createElement("div"),e._tempBnd.appendChild(e._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",function(t){document.body.appendChild(e._tempBnd)}):document.body.appendChild(e._tempBnd)}},{key:"pub_load",value:function(t,n,r,i,o,a){e._lesson=i,e._book=r,e._nextBook=o,e._prevBook=a,e._students=[],t&&t.forEach(function(t,n){e._students[n]=s(t)}),e._student=s(n)}},{key:"pub_reloadStudents",value:function(t){o.getStudents(function(n,r){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop();for(var i=0,o=n.length;i<o;i++)e.isDvlp?e._students[i]=s(n[i]):e._students[i]=s({id:n[i].id,name:n[i].name,thumb:n[i].defaultThumbnail,avatar:n[i].profileThumbnail,nickname:n[i].nickName,displayMode:n[i].displayMode,inited:!0}),e._students_inited.push(n[i].id);t()})}},{key:"pub_parseStyle",value:function(t){return e._tempEl.style.cssText=t,e._tempEl.style}},{key:"pub_initAudio",value:function(){e._common_audio=document.getElementById("common_audio"),e._ding_audio=document.getElementById("ding_audio"),e._dingend_audio=document.getElementById("dingend_audio"),e._btn_audio=document.getElementById("btn_audio"),e._correct_audio=document.getElementById("correct_audio"),e._wrong_audio=document.getElementById("wrong_audio"),e._topad_audio=document.getElementById("topad_audio"),e._goodjob_audio=document.getElementById("goodjob_audio"),e._btn_back_audio=document.getElementById("btn_back_audio"),e._btn_page_audio=document.getElementById("btn_page_audio"),e._card_audio=document.getElementById("card_audio"),e._popup_audio=document.getElementById("popup_audio"),e._flips_audio=document.getElementById("card_flips"),e._clock_audio=document.getElementById("clock_audio"),e._write_audio=document.getElementById("write_audio"),e._like_bubble_audio=document.getElementById("like_bubble"),e._all_btn_click_audio=document.getElementById("all_btn_click")}},{key:"pub_playAllBtnClick",value:function(){e._all_btn_click_audio&&(e._all_btn_click_audio.currentTime=0,e._all_btn_click_audio.play())}},{key:"pub_playLikeBubble",value:function(){e._like_bubble_audio&&(e._like_bubble_audio.currentTime=0,e._like_bubble_audio.play())}},{key:"pub_playWrite",value:function(){e._write_audio&&(e._write_audio.currentTime=0,e._write_audio.play())}},{key:"pub_playClock",value:function(){e._clock_audio&&(e._clock_audio.currentTime=4.5,e._clock_audio.play())}},{key:"pub_playFlips",value:function(){e._flips_audio&&(e._flips_audio.currentTime=0,e._flips_audio.play())}},{key:"pub_playPopup",value:function(){e._popup_audio&&(e._popup_audio.currentTime=0,e._popup_audio.play())}},{key:"pub_playCard",value:function(){e._card_audio&&(e._card_audio.currentTime=0,e._card_audio.play())}},{key:"pub_playBtnPage",value:function(){e._btn_page_audio&&(e._btn_page_audio.currentTime=0,e._btn_page_audio.play())}},{key:"pub_playBtnBack",value:function(){e._btn_back_audio&&(e._btn_back_audio.currentTime=0,e._btn_back_audio.play())}},{key:"pub_playGoodjob",value:function(){e._goodjob_audio&&(e._goodjob_audio.currentTime=0,e._goodjob_audio.play())}},{key:"pub_playDing",value:function(){e._ding_audio&&(e._ding_audio.currentTime=0,e._ding_audio.play())}},{key:"pub_playDingend",value:function(){e._dingend_audio&&(e._dingend_audio.currentTime=0,e._dingend_audio.play())}},{key:"pub_playToPad",value:function(){e._topad_audio&&(e._topad_audio.currentTime=0,e._topad_audio.play())}},{key:"pub_playBtnTab",value:function(){e._btn_audio&&(e._btn_audio.currentTime=0,e._btn_audio.play())}},{key:"pub_playCorrect",value:function(){e._correct_audio&&(e._correct_audio.currentTime=0,e._correct_audio.play())}},{key:"pub_playWrong",value:function(){e._wrong_audio&&(e._wrong_audio.currentTime=0,e._wrong_audio.play())}},{key:"pub_playStudentBubble",value:function(){var e=document.getElementById("student_bubble");e&&(e.currentTime=0,e.paused&&e.play())}},{key:"pub_stop",value:function(){null!=e._common_audio.onended&&e._common_audio.onended.call(e._common_audio,new Event("ended")),e._common_audio.oncanplaythrough=null,isNaN(e._common_audio.duration)||e._common_audio.paused||e._common_audio.pause()}},{key:"pub_play",value:function(t,n){e.pub_stop(),t=i.nteString(t,"");var r=i.nteString(e._common_audio.getAttribute("src"),"");if(""!==t||""!==r){""!==t&&r!==t&&(e._common_audio.src=t);var o=function t(r){e._common_audio.onended=null,null!==n&&n(!0),e._common_audio.removeEventListener("error",t)};e._common_audio.onended=function(t){e._common_audio.onended=null,null!==n&&n(!!t),e._common_audio.removeEventListener("error",o)},e._common_audio.addEventListener("error",o),isNaN(e._common_audio.duration)?(e._common_audio.oncanplaythrough=function(t){0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.play(),e._common_audio.oncanplaythrough=null},e._common_audio.load()):(0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.oncanplaythrough=null,e._common_audio.play())}else null!=n&&n(!0)}},{key:"pub_set",value:function(t,n,r){e._isDvlp=n,e._lang=r,o.set(n)}},{key:"pub_addInitedStudent",value:function(t){for(var n=!0,r=0,i=e._students_inited.length;r<i;r++){e._students_inited[r]===t.id&&(n=!1)}n&&e._students_inited.push(t.id);var o=e._start_idx>0&&e._students.length>0&&e._students_inited.length>=e._students.length;return o&&(window.clearTimeout(e._start_idx),e._start_idx=-1),o}},{key:"pub_start",value:function(t){0===e._students.length||e._students_inited.length>=e._students.length?t():e._start_idx=window.setTimeout(t,2e3)}},{key:"pub_clear",value:function(){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop()}},{key:"isMobile",get:function(){return e._isMobile}},{key:"tempEl",get:function(){return e._tempEl}},{key:"students",get:function(){return e._students}},{key:"student",get:function(){return e._student}},{key:"lang",get:function(){return e._lang}},{key:"isDvlp",get:function(){return e._isDvlp}},{key:"data_url",get:function(){return e._data_url}},{key:"lesson",get:function(){return e._lesson}},{key:"book",get:function(){return e._book}},{key:"nextBook",get:function(){return e._nextBook}},{key:"prevBook",get:function(){return e._prevBook}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();a._isMobile=!1,a._students=[],a._students_inited=[],a._student=null,a._lang="ko",a._isDvlp=!1,a._data_url="../data/",a._lesson="",a._book="",a._nextBook=!1,a._prevBook=!1,a._start_idx=-1,a.isStarted=!1,t.App=a},function(e,t){e.exports=_},function(e,t,n){"use strict";function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(1),h=n(2),v=function(e){function t(e){var n;return i(this,t),(n=a(this,c(t).call(this,e))).m_pID=-1,n._inited=n._inited.bind(u(n)),n._onClick=n._onClick.bind(u(n)),n}return l(t,f.Component),s(t,[{key:"_inited",value:function(e){var t=this;!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",function(n){if(!(t.m_pID>=0)){if(t.m_pID=n.pointerId,!t.props.disableCapture)try{e.setPointerCapture(t.m_pID)}catch(e){}t.props.onMouseDown&&t.props.onMouseDown(n)}}),e.addEventListener("pointerup",function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseUp&&t.props.onMouseUp(n)}}),e.addEventListener("pointerleave",function(n){if(t.props.disableCapture){if(t.m_pID!==n.pointerId)return;try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1}t.props.onMouseLeave&&t.props.onMouseLeave(n)}),e.addEventListener("pointercancel",function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseLeave&&t.props.onMouseLeave(n)}}))}},{key:"_onClick",value:function(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}},{key:"componentDidUpdate",value:function(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}]),t}();d([m.observable],v.prototype,"m_pID",void 0);var y=function(e){function t(e){var n;return i(this,t),(n=a(this,c(t).call(this,e))).m_on=!1,n.m_on=!0===e.on,n}return l(t,v),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),f.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n},this.props.children)}}]),t}();d([m.observable],y.prototype,"m_on",void 0),y=d([h.observer],y),t.ToggleBtn=y;var b=function(e){function t(e){return i(this,t),a(this,c(t).call(this,e))}return l(t,y),s(t,[{key:"play",value:function(){var e=this;this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,function(t){e.m_on&&(e.m_on=!1,e.props.onPause&&e.props.onPause(t))}))}},{key:"_onClick",value:function(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),r(c(t.prototype),"_onClick",this).call(this,e)}}]),t}();d([m.action],b.prototype,"play",null),d([m.action],b.prototype,"_onClick",null),b=d([h.observer],b),t.AudioBtn=b;var g=function(e){function t(e){var n;return i(this,t),(n=a(this,c(t).call(this,e))).m_on=!1,n.m_on=!0===e.on,n}return l(t,v),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),f.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n,src:this.props.src,useMap:this.props.useMap})}}]),t}();d([m.observable],g.prototype,"m_on",void 0),g=d([h.observer],g),t.ImgBtn=g},function(e,t,n){e.exports=n(47)()},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=!1;t.set=function(e){o=e},t.finishContentPage=function(){if(!o)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,n){if(!o)try{window.tsoc_o.startStudentReportProcess(e,t,n)}catch(e){}},t.hideStudentReportUI=function(){if(!o)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!o)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!o)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!o)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!o)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,n){if(!o)try{window.psoc_o.uploadStudentReport(e,t,n)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||o)if(6!==e||o)if(7!==e||o){if(8===e)if(o)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(o)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,n){var r={type:t,data:n};if(o)try{window.top.tsoc_o.sendPADToID(e,r)}catch(e){}else try{window.tsoc_o.sendPADToID(e,r)}catch(e){}},t.sendPAD=function(e,t){var n={type:e,data:t};if(o)try{window.top.tsoc_o.sendAll(n)}catch(e){}else try{window.tsoc_o.sendAll(n)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){var n={type:e,data:t};if(o)try{window.opener.tsoc_o.sendTeacher(n)}catch(e){}else try{window.psoc_o.sendTeacher(n)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e){try{window.psoc_o.uploadImageToServer(e)}catch(e){}},t.getStudents=function(e){if(o)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(){if(!o)try{window.psoc_o.startCamera()}catch(e){}},t.startCustomCamera=function(e){if(!o)try{window.psoc_o.startCustomCamera(e)}catch(e){}},t.stopCamera=function(){if(!o)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(){if(!o)try{window.psoc_o.switchCamera()}catch(e){}},t.startVideoRecord=function(){if(!o)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!o)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!o)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.getPreviewResult=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewResult(function(e){n||(n=!0,t(e))},e),i.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewDmsResult=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewDmsResult(function(e){n||(n=!0,t(e))},e),i.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewResultClass=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewResultClass(function(e){n||(n=!0,t(e))},e),i.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewResultMember=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(o)t([]);else{var n=!1;window.tsoc_o.getPreviewResultMember(function(e){n||(n=!0,t(e))},e),i.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);t.wait=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){i.delay(t,e)}));case 1:case"end":return t.stop()}},t)}))},t.getTimeStr=function(e,t){var n=Math.round(t/1e3),r=Math.round(e/1e3),i=Math.floor(r/60),o=Math.floor(i/60),s="";return i%=60,o>0||n>=3600?(s=o+":",s+=i>=10?i+":":"0"+i+":"):n>=600?s+=i>=10?i+":":"0"+i+":":s=i+":",s+=(r%=60)>=10?r:"0"+r},t.getBounds=function(e){var t={left:0,top:0,width:0,height:0};if(!e)return t;try{var n=e.getBoundingClientRect();t.left=n.left,t.top=n.top,t.width=n.width,t.height=n.height}catch(e){}var r=e.ownerDocument,i=r.body,o=r.documentElement;t.left=t.left-(o.clientLeft||i.clientLeft||0),t.top=t.top-(o.clientTop||i.clientTop||0);var s=r.defaultView;return t.left+=s.pageXOffset||o.scrollLeft||i.scrollLeft,t.top+=s.pageYOffset||o.scrollTop||i.scrollTop,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HIDE={opacity:0,pointerEvents:"none"};t.HIDE_ANI={opacity:0,pointerEvents:"none",transitionProperty:"opacity",transitionDuration:"0.6s"};t.NONE={display:"none"}},function(e,t){e.exports=ReactIdSwiper},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(1),p=n(2),_=n(19),d=n(13),f=.3,m=.5,h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e))).m_btnH=0,n.m_max=0,n.m_sy=-1,n.m_vy=-1,n.m_time=-1,n.m_bSend=!1,n.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},n._ref=function(e){if(!(n.m_max>0)&&e){e.setAttribute("touch-action","none");var t=window.getComputedStyle(e),r=d.nteFloat(t.height,0),i=d.nteFloat(t.bottom,0);r>0&&(n.m_btnH=r,n.m_max=r+i+10,n.props.view||(n.m_state.y=n.m_max))}},n._down=function(e){n.m_state.isOn||n.m_state.disabled||(n.m_state.y=n.props.originY,n.m_state.alpha=1,n.m_state.tDur=0,n.m_state.aDur=0,n.m_state.isOn=!0,n.m_vy=0,n.m_time=Date.now())},n._start=function(e,t){n.m_sy=t.y,n.m_bSend=!0},n._drag=function(e,t){if(n.m_state.isOn&&!n.m_state.disabled){var r=t.y-n.m_sy;"teacher"===n.props.type?(t.deltaY<-1?n.m_bSend=!1:t.deltaY>=0&&(n.m_bSend=!0),r<0&&(r=0)):(t.deltaY>1?n.m_bSend=!1:t.deltaY<=0&&(n.m_bSend=!0),r>0&&(r=0)),!1===n.props.preventDrag&&(n.m_state.y=r+n.props.originY);var i=Date.now();n.m_vy=t.deltaY/(i-n.m_time),n.m_time=i}},n._stop=function(e,t){if(n.m_state.isOn&&!n.m_state.disabled)if(n.m_bSend){var r=n.m_vy*m*1e3,i=t.y-n.m_sy;"teacher"===n.props.type?(r<n.m_btnH?r=n.m_btnH:r>4*n.m_btnH&&(r=4*n.m_btnH),i<0&&(i=0)):(-1*r<n.m_btnH?r=-n.m_btnH:-1*r>4*n.m_btnH&&(r=-4*n.m_btnH),i>0&&(i=0)),n.m_state.tDur=m,n.m_state.aDur=m,n.m_state.alpha=0,n.m_state.y=i+r+n.props.originY,n.props.onSend()}else n.m_state.isOn=!1,n.m_state.tDur=f,n.m_state.aDur=0,n.m_state.y=n.props.originY},e.sended?(n.m_state.alpha=0,n.m_state.disabled=!0):e.view?(n.m_state.y=e.originY,n.m_state.alpha=1,n.m_state.tDur=f,n.m_state.aDur=0,n.m_state.isOn=!1,n.m_state.disabled=!1):e.view||(n.m_state.y=e.originY,n.m_state.alpha=0,n.m_state.tDur=f,n.m_state.aDur=f,n.m_state.isOn=!1,n.m_state.disabled=!0),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=f):(this.m_state.tDur=f,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=f,this.m_state.aDur=f,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=f,this.m_state.aDur=0)}},{key:"render",value:function(){var e=this.m_state,t=e.y,n=e.tDur,r=e.aDur,i=e.alpha,o=e.isOn,s=e.disabled,a={transform:"translateY(".concat(t,"px)"),transition:"transform ".concat(n,"s, opacity ").concat(r/2,"s ").concat(r/2,"s"),opacity:i,pointerEvents:s||!this.props.view?"none":"auto"},c=[];return"pad"===this.props.type?c.push("fel_toteacher"):c.push("fel_topad"),o&&c.push("on"),u.createElement(_.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},u.createElement("button",{ref:this._ref,className:c.join(" "),style:a}))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([l.observable],h.prototype,"m_state",void 0),h=c([p.observer],h),t.default=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(1),_=n(2),d=n(8),f=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=i(t).apply(this,arguments),(e=!r||"object"!==a(r)&&"function"!=typeof r?o(n):r).m_state="closed",e._open=function(){return u(o(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("closed"!==this.m_state){e.next=5;break}return this.m_state="opening",e.next=4,d.wait(100);case 4:this.m_state="open";case 5:case"end":return e.stop()}},e,this)}))},e._close=function(){return u(o(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("open"!==this.m_state){e.next=6;break}return this.m_state="closing",e.next=4,d.wait(400);case 4:this.props.onClosed(),this.m_state="closed";case 6:case"end":return e.stop()}},e,this)}))},e}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"componentDidUpdate",value:function(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}},{key:"render",value:function(){return l.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}}])&&r(n.prototype,c),p&&r(n,p),t}();c([p.observable],f.prototype,"m_state",void 0),f=c([_.observer],f),t.CoverPopup=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32);Date.now||(Date.now=function(){return(new Date).getTime()});var i=0;function o(){return s().toString(36)}function s(){var e=Date.now();return e>i?i=e:i+=1,i}t.getUnic=o,t.getUnicNum=s,t.getUnicUrl=function(e){if(!e)return"";var t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+o():t+"?t="+o()),t},t.nteUInt=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return isNaN(e)||e<0?t:Math.round(e);var n=parseInt(String(e),10);return isNaN(n)||n<0?t:n},t.nteInt=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return Math.round(e);var n=parseInt(String(e),10);return isNaN(n)?t:n},t.nteFloat=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return e;var n=parseFloat(String(e));return isNaN(n)?t:n},t.nteString=function(e,t){return r.isNullOrUndefined(e)?t:String(e)},t.nteBool=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isBoolean(e))return e;var n=String(e);return"true"===n||"false"!==n&&t},t.intToHTMLcolor=function(e){var t=e-0,n=(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16);return n="#000000".substring(0,7-n.length)+n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){var t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}var n=[];return n.push(e),n}return[]},t.getDateStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",t=new Date,n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return n+e+(r<10?"0"+r:""+r)+e+(i<10?"0"+i:""+i)},t._toStringTimestamp=function(e){var t=e.getFullYear(),n=e.getMonth()+1+"";parseInt(n,10)<10&&(n="0"+n);var r=e.getDate()+"";return parseInt(r,10)<10&&(r="0"+r),t+"-"+n+"-"+r+" "+e.toTimeString().substr(0,8)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(1),p=n(2),_=n(20),d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e)))._div=null,n._bndW=0,n._width=0,n._fontSize=0,n._myW=0,n._numOfLine=0,n._ref=function(e){!n._div&&e&&(n._div=e,n.props.onRef&&n.props.onRef(e))},n._aniFrame=function(e){n._canCalc()&&(n._calc(),window.requestAnimationFrame(n._aniFrame))},n._resized=function(e,t){n._myW=e,window.requestAnimationFrame(n._aniFrame)},n._fontSize=n.props.maxSize?n.props.maxSize:0,n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"_canCalc",value:function(){return!!this.props.view&&(!(this._myW<=0)&&(!!this._div&&!(this._width>0)))}},{key:"_calc",value:function(){if(this._canCalc()&&this._div){var e=this._div.getBoundingClientRect(),t=this._myW-e.width;if(!(t<-1||t>1)){var n=this._div.childNodes;if(0!==n.length){var r=0,i=-100,o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=0;n.forEach(function(e,t){var n=0,c=0;if(e instanceof HTMLElement){var u=e,l=window.getComputedStyle(u);if("absolute"===l.position);else if("inline"===l.display){var p=l.marginRight?parseInt(l.marginRight,10):0,_=l.marginLeft?parseInt(l.marginLeft,10):0;isNaN(p)&&(p=0),isNaN(_)&&(_=0);for(var d=u.getClientRects(),f=0;f<d.length;f++){var m=d.item(f);if(m){var h=m.top,v=m.bottom,y=m.left-_,b=m.right+p;0===a?(i=(h+v)/2,r=1):(i<h||i>v)&&(i=(h+v)/2,r++),o=Math.min(o,y),s=Math.max(s,b),a++}}}else{var g=u.getBoundingClientRect(),w=l.marginRight?parseInt(l.marginRight,10):0,E=l.marginLeft?parseInt(l.marginLeft,10):0;isNaN(w)&&(w=0),isNaN(E)&&(E=0),n=w,c=E;var k=g.top,S=g.bottom,C=g.left-c,x=g.right+n;S-k>0&&(0===a?(i=(k+S)/2,r=1):(i<k||i>S)&&(i=(k+S)/2,r++),o=Math.min(o,C),s=Math.max(s,x),a++)}}else{var O=document.createRange();O.selectNodeContents(e);for(var T=O.getClientRects(),P=0;P<T.length;P++){var N=T.item(P);if(N){var A=N.top,D=N.bottom,R=N.left,B=N.right;0===a?(i=(A+D)/2,r=1):(i<A||i>D)&&(i=(A+D)/2,r++),o=Math.min(o,R),s=Math.max(s,B),a++}}}}),this._numOfLine=r;var c=this.props.maxLineNum?this.props.maxLineNum:1;if(c<1&&(c=1),r>c){var u=this.props.minSize?this.props.minSize:0;this._fontSize>0&&u>0&&this._fontSize>u?this._fontSize--:this._width=Math.ceil(s-o+2)}else a>0&&(this._width=Math.ceil(s-o+2))}}}}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)):!this.props.view&&e.view&&(this._width=0),this.props.view&&this.props.rcalcNum&&this.props.rcalcNum!==e.rcalcNum&&(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)),0===this._fontSize&&this.props.maxSize&&(this._fontSize=this.props.maxSize)}},{key:"render",value:function(){var e,t=this.props.className,n={whiteSpace:"normal"};return this._fontSize>0&&(n.fontSize=this._fontSize+"px"),this.props.lineHeight&&(n.lineHeight=this.props.lineHeight+"%"),this._width>0?(n.width=this._width+"px",n.display="inline-block",e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e):(n.width="100%",n.display="inline-block",this.props.viewWhenInit||(n.opacity=.01),e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e),u.createElement(u.Fragment,null,u.createElement("div",{ref:this._ref,className:t,style:n,onClick:this.props.onClick},this.props.children,u.createElement(_.default,{handleWidth:!0,handleHeight:!0,onResize:this._resized})))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([l.observable],d.prototype,"_width",void 0),c([l.observable],d.prototype,"_fontSize",void 0),d=c([p.observer],d),t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var c,u,l,p,_,d,f,m=n(1);!function(e){e.STRETCH="stretch",e.LETTERBOX="letterbox"}(c||(c={})),function(e){e.NONE="none",e.METADATA="metadata",e.AUTO="auto"}(u||(u={})),function(e){e.ORGIN="origin",e.TRANS="trans",e.ALL="all",e.NONE="none"}(l||(l={})),function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.PLAYBACK_ERROR=2]="PLAYBACK_ERROR",e[e.READY=3]="READY",e[e.STANDBY=4]="STANDBY",e[e.BUFFERING=5]="BUFFERING",e[e.PAUSED=6]="PAUSED",e[e.PLAYING=7]="PLAYING"}(p||(p={})),t.MPRState=p,function(e){e[e.UNSET=-1]="UNSET",e[e.CAN_NOT_ALL_DIR=1]="CAN_NOT_ALL_DIR",e[e.CAN_NOT_NEXT_DIR=2]="CAN_NOT_NEXT_DIR",e[e.CAN_ALL_DIR=10]="CAN_ALL_DIR"}(_||(_={})),function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(d||(d={})),function(e){e[e.NETWORK_EMPTY=0]="NETWORK_EMPTY",e[e.NETWORK_IDLE=1]="NETWORK_IDLE",e[e.NETWORK_LOADING=2]="NETWORK_LOADING",e[e.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(f||(f={}));var h=function(){function e(t){r(this,e),this.defaultVolume=100,this.lenOfFvlToFile=25165824,this.sections=[],this.isVideo=t,this.autoPlay=!1,this.controlBox=!0,this.typeOfPosByMouse=10,this.loop=1,this.preload="auto",this.scaleMode="stretch",this.bgColor=-1,this.initTime=0,this.startTime=0,this.endTime=0,this.chkTime=250,this.playBtn=!0,this.closeBtn=!1,this.popupBtn=!1,this.fullscreenBtn=!0,this.volumeBtn=!0,this.centerPlayBtn=!0,this.centerLoading=!0,this.mousePlayPause=!0,this.bDoFullscreen=!0,this.volumeBox=!0,this.speedBtn=!1,this.scroller=!0,this.togglePlayBtn=!0,this.autoBtn=!1,this.langBtn=!1,this.menuOverlap=!0,this.haveScript=!1,this.viewScriptBox=!1,this.bScriptBtn=!1,this.scriptViewLang="none",this.etcData=""}return o(e,[{key:"isLoadControls",value:function(e){return this.controlBox||e&&(this.centerPlayBtn||this.centerLoading||this.viewScriptBox)}},{key:"pcGetURL",value:function(e){return e}},{key:"clone",value:function(){var t=new e(this.isVideo);return t.copy(this),t}},{key:"copy",value:function(e){this.autoPlay=e.autoPlay,this.controlBox=e.controlBox,this.typeOfPosByMouse=e.typeOfPosByMouse,this.loop=e.loop,this.preload=e.preload,this.scaleMode=e.scaleMode,this.bgColor=e.bgColor,this.initTime=e.initTime,this.startTime=e.startTime,this.endTime=e.endTime,this.chkTime=e.chkTime,this.playBtn=e.playBtn,this.closeBtn=e.closeBtn,this.popupBtn=e.popupBtn,this.fullscreenBtn=e.fullscreenBtn,this.volumeBtn=e.volumeBtn,this.centerPlayBtn=e.centerPlayBtn,this.centerLoading=e.centerLoading,this.mousePlayPause=e.mousePlayPause,this.volumeBox=e.volumeBox,this.speedBtn=e.speedBtn,this.scroller=e.scroller,this.togglePlayBtn=e.togglePlayBtn,this.autoBtn=e.autoBtn,this.langBtn=e.langBtn,this.menuOverlap=e.menuOverlap,this.haveScript=e.haveScript,this.viewScriptBox=e.viewScriptBox,this.bScriptBtn=e.bScriptBtn,this.scriptViewLang=e.scriptViewLang,this.defaultVolume=e.defaultVolume,this.etcData=e.etcData}},{key:"isMobile",get:function(){return!1}},{key:"iskdmPC",get:function(){return!1}}]),e}();t.MConfig=h;var v=function(){function e(t){r(this,e),this.m_media=null,this.m_url=null,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_onstates=[],this.m_ontimes=[],this.m_onends=[],this.m_onendtemps=[],this.m_bPlay=!1,this.m_myState=0,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this.m_config=t,this.m_bPlay=t.autoPlay,this.m_startTime=t.startTime,this.m_endTime=t.endTime,this.mediaInited=this.mediaInited.bind(this),this._onTime=this._onTime.bind(this)}return o(e,[{key:"setStartEndTime",value:function(e,t){this.m_startTime=e,this.m_endTime=t}},{key:"setMuted",value:function(e){this.m_muted=e,this.m_media&&(this.m_media.muted=e)}},{key:"setMutedTemp",value:function(e){this.m_media&&(this.m_media.muted=e)}},{key:"_initTemp",value:function(){this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0}},{key:"play",value:function(){this.m_bPlay=!0,this._initTemp(),this.m_playEnded&&this.m_media&&this.m_myState>=3&&(this.m_media.currentTime=this.m_startTime/1e3),this.m_playEnded=!1,this._playOrPause()}},{key:"pause",value:function(){this.m_bPlay=!1,this._initTemp(),this._playOrPause()}},{key:"start",value:function(){this.seek(0),this.play()}},{key:"seek",value:function(e){if(!this.m_media||this.m_myState<3)this.m_seekTime=e;else{if(this._initTemp(),this.m_seekTime=-1,isNaN(e)||e<0)e=0;else if(e>=this.m_duration-100)return e=this.m_duration,void this._playEnded();this.m_playEnded=!1,this.m_media.currentTime=(this.m_startTime+e)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime}}},{key:"gotoAndPlay",value:function(e,t,n){if(this.m_standBy=!1,!this.m_media||this.m_duration<=0)return this._load(),this.m_bPlay_temp=!0,this.m_startTime_temp=e,this.m_endTime_temp=t,void(this.m_loop_temp=n);this.m_playEnded=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=e,this.m_endTime_temp=t,e=e>=0?e:this.currentTime,t=t>=0&&t<this.m_duration?t:this.m_duration,this.m_bPlay=!0,e>=t||n<=0?(this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0):(this.m_endTime_temp>=this.m_duration&&(this.m_endTime_temp=-1),this.m_loop_temp=n,this.m_loopCnt_temp=0,this.m_startTime_temp>=0&&(this.m_media.currentTime=(e+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime)),this._playOrPause()}},{key:"gotoAndPause",value:function(e){this.m_bPlay=!1,this._initTemp(),this.m_media&&(e=e>=0&&e<this.m_duration?e:this.currentTime,this.m_media.currentTime=(e+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime,this._playOrPause())}},{key:"connect",value:function(){if(this.m_media){this.m_media;this.m_url&&this.m_myState>=1&&3===this.m_media.networkState&&0===this.m_media.readyState&&(this.m_media.src=this.m_url,this.m_media.load())}}},{key:"unconnect",value:function(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_myState>=3&&(this.m_seekTime=1e3*this.m_media.currentTime-this.m_startTime),this.m_media.src="",this.m_media.load()))}},{key:"_load",value:function(){this.m_media&&this.m_url&&this.m_myState<1&&(this._setState(1),this.m_media.src=this.m_url,this.m_media.load())}},{key:"load",value:function(e){this.m_url=e,this._load()}},{key:"unload",value:function(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_media.src="",this.m_media.load())),this.m_url=null,this.m_bPlay=!1,this.m_bPlay_temp=!1,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this._setState(0)}},{key:"_setState",value:function(e){if(this.m_myState!==e){7===e?this.m_onTimer<0&&(this.m_onTimer=window.requestAnimationFrame(this._onTime)):6===e&&this.m_onTimer>=0&&(window.cancelAnimationFrame(this.m_onTimer),this.m_onTimer=-1);var t=this.m_myState;this.m_myState=e;for(var n=0,r=this.m_onstates.length;n<r;n++)this.m_onstates[n](e,t)}}},{key:"_playOrPause",value:function(){var e=this;if(this.m_media&&!(this.m_myState<3))if(this.m_bPlay){if(this._setState(7),this.m_media.paused){var t=this.m_media.play();t&&t.then(function(t){!e.m_media||e.m_bPlay||e.m_media.paused||e.m_media.pause()}).catch(function(t){!e.m_media||e.m_bPlay||e.m_media.paused||e.m_media.pause()})}}else this._setState(6),this.m_media.paused||this.m_media.pause()}},{key:"_onTimeUpdate",value:function(){if(this.m_media){var e=1e3*this.m_media.currentTime;if(this.m_loop_temp>0&&this.m_bPlay)if(e<this.m_startTime)e=this.m_startTime;else if(this.m_endTime_temp>0&&e>=this.m_endTime_temp+this.m_startTime){this.m_currentTime=this.m_endTime_temp,this.m_viewTime=this.m_currentTime;for(var t=0,n=this.m_ontimes.length;t<n;t++)this.m_ontimes[t](this.m_currentTime);this._playEnded()}else{this.m_currentTime=e-this.m_startTime;for(var r=0,i=this.m_ontimes.length;r<i;r++)this.m_ontimes[r](this.m_currentTime)}else if(e<this.m_startTime)e=this.m_startTime;else{if(this.m_endTime>0&&e>=this.m_endTime){this.m_currentTime=this.m_endTime-this.m_startTime,this.m_viewTime=this.m_currentTime;for(var o=0,s=this.m_ontimes.length;o<s;o++)this.m_ontimes[o](this.m_currentTime);return void this._playEnded()}this.m_currentTime=e-this.m_startTime;for(var a=0,c=this.m_ontimes.length;a<c;a++)this.m_ontimes[a](this.m_currentTime)}}}},{key:"_playEnded",value:function(){if(this.m_media&&!this.m_playEnded)if(this.m_loop_temp>0&&this.m_bPlay){if(this.m_loopCnt_temp++,this.m_endTime_temp<=0){this.m_bPlay=!1;for(var e=0,t=this.m_onends.length;e<t;e++)this.m_onends[e]()}if(this.m_loopCnt_temp<this.m_loop_temp){var n=this.m_startTime_temp>=0&&this.m_startTime_temp<this.m_duration?this.m_startTime_temp:0;this.m_media.currentTime=(n+this.m_startTime)/1e3,this.m_media.paused&&this.m_media.play()}else{this.m_media.paused||this.m_media.pause(),this.m_bPlay=!1;for(var r=0,i=this.m_onendtemps.length;r<i;r++)this.m_onendtemps[r]()}}else{for(var o=0,s=this.m_onends.length;o<s;o++)this.m_onends[o]();0===this.m_config.loop&&this.m_bPlay?(this.m_media.currentTime=this.m_startTime/1e3,this.m_media.paused&&this.m_media.play()):(this.m_playEnded=!0,this.m_bPlay=!1,this.m_media.paused||this.m_media.pause(),1e3*this.m_media.currentTime<this.m_maxTime-100&&(this.m_media.currentTime=this.m_maxTime/1e3),this.m_currentTime=this.m_maxTime-this.m_startTime,this.m_viewTime=this.m_currentTime,this._setState(6))}}},{key:"reset",value:function(){}},{key:"_onTime",value:function(e){this.m_onTimer>=0&&(this._onTimeUpdate(),this.m_onTimer=window.requestAnimationFrame(this._onTime))}},{key:"mediaInited",value:function(e){var t=this;if(!this.m_media&&e){this.m_media=e;var n=function(n){if(t.m_media){t.m_config;e.duration>0&&(t.m_maxTime<=0?(t.m_maxTime=1e3*e.duration,t.m_endTime>=t.m_maxTime?t.m_endTime=0:t.m_endTime>0&&(t.m_maxTime=t.m_endTime),(t.m_startTime<0||t.m_startTime>=t.m_maxTime)&&(t.m_startTime=0),t.m_duration=t.m_maxTime-t.m_startTime,t.m_bPlay_temp?(t._setState(3),t.gotoAndPlay(t.m_startTime_temp,t.m_endTime_temp,t.m_loop_temp)):t.m_seekTime>0&&t.m_seekTime<t.m_duration?(t._setState(3),t.m_media.currentTime=(t.m_seekTime+t.m_startTime)/1e3):0===t.m_startTime?(t._setState(3),t._playOrPause()):t.m_media.currentTime=t.m_startTime/1e3,t.m_seekTime=-1):t.m_seekTime>=0&&(t.m_seekTime<t.m_duration&&(t.m_media.currentTime=(t.m_seekTime+t.m_startTime)/1e3),t.m_seekTime=-1))}};e.onabort=function(e){console.log("onabort")},e.oncanplay=n,e.oncanplaythrough=n,e.ondurationchange=n,e.onloadeddata=n,e.onloadedmetadata=n,e.onerror=function(e){1===t.m_myState&&t._setState(2)},e.onended=function(e){t.m_media&&(t.m_maxTime<=0||t.m_myState<3||t._playEnded())},e.onpause=function(e){t.m_media&&(t.m_maxTime<=0||t.m_myState<3||t._setState(6))},e.onplaying=function(e){t.m_media&&(t.m_maxTime<=0||t.m_myState<3||!t.m_bPlay?t.m_media.paused||t.m_media.pause():t._setState(7))},e.onseeking=function(e){!t.m_media||t.m_maxTime<=0||t.m_myState>=3&&t._setState(5)},e.onseeked=function(e){if(t.m_media&&!(t.m_maxTime<=0))if(t.m_myState>=3)t._playOrPause();else if(t.m_myState<3&&t.m_startTime>0){Math.abs(t.m_startTime-1e3*t.m_media.currentTime)<100?(t._setState(3),t._playOrPause()):t.m_media.currentTime=t.m_startTime/1e3}},e.ontimeupdate=function(e){t.m_myState<=2||(t._onTimeUpdate(),t.m_viewTime=t.m_currentTime)},this._load()}}},{key:"addOnState",value:function(e){this.m_onstates.indexOf(e)>=0||this.m_onstates.push(e)}},{key:"removeOnState",value:function(e){var t=this.m_onstates.indexOf(e);t<0||this.m_onstates.splice(t,1)}},{key:"addOnTime",value:function(e){this.m_ontimes.indexOf(e)>=0||this.m_ontimes.push(e)}},{key:"removeOnTime",value:function(e){var t=this.m_ontimes.indexOf(e);t<0||this.m_ontimes.splice(t,1)}},{key:"addOnPlayEnd",value:function(e){this.m_onends.indexOf(e)>=0||this.m_onends.push(e)}},{key:"removeOnPlayEnd",value:function(e){var t=this.m_onends.indexOf(e);t<0||this.m_onends.splice(t,1)}},{key:"addOnPlayEndTemp",value:function(e){this.m_onendtemps.indexOf(e)>=0||this.m_onendtemps.push(e)}},{key:"removeOnPlayEndTemp",value:function(e){var t=this.m_onendtemps.indexOf(e);t<0||this.m_onendtemps.splice(t,1)}},{key:"bPlay",get:function(){return this.m_bPlay}},{key:"myState",get:function(){return this.m_myState}},{key:"duration",get:function(){return this.m_duration}},{key:"muted",get:function(){return this.m_muted}},{key:"viewTime",get:function(){return this.m_viewTime}},{key:"media",get:function(){return this.m_media}},{key:"config",get:function(){return this.m_config}},{key:"currentTime",get:function(){return this.m_currentTime}}]),e}();a([m.observable],v.prototype,"m_bPlay",void 0),a([m.observable],v.prototype,"m_myState",void 0),a([m.observable],v.prototype,"m_duration",void 0),a([m.observable],v.prototype,"m_viewTime",void 0),a([m.observable],v.prototype,"fullscreen",void 0),a([m.observable],v.prototype,"m_muted",void 0),a([m.computed],v.prototype,"bPlay",null),a([m.computed],v.prototype,"myState",null),a([m.computed],v.prototype,"duration",null),a([m.computed],v.prototype,"muted",null),a([m.computed],v.prototype,"viewTime",null),t.MPlayer=v},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,i){if(!(!e||e<=0||e>4)){var o={answer:e,correct:"",choices:[],inputed:""};return 1===e?o.correct=t:2===e?o.correct=n:3===e?o.correct=r:4===e&&(o.correct=i),o.correct&&""!==o.correct?t&&""!==t?(o.choices[0]=t,n&&""!==n?(o.choices[1]=n,r&&""!==r?(o.choices[2]=r,i&&""!==i&&(o.choices[3]=i),o):o):null):null:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.COLORS=["pink","green","orange","purple"],function(e){e[e.TYPE_1=1]="TYPE_1",e[e.TYPE_2=2]="TYPE_2",e[e.TYPE_3=3]="TYPE_3",e[e.TYPE_4=4]="TYPE_4",e[e.TYPE_5=5]="TYPE_5",e[e.TYPE_6=6]="TYPE_6",e[e.TYPE_7=7]="TYPE_7"}(t.VisualType||(t.VisualType={})),function(e){e[e.IMAGE=1]="IMAGE",e[e.VIDEO=2]="VIDEO"}(t.WarmupType||(t.WarmupType={})),t.TYPE_COM_HEADERS=["#A677DC","#1CC1AD","#4f7ad1"],t.TYPE3_HEADERS=["#b07ae1","#1cc9af","#4f7ad1","#4f7ad1"],t.initData=function(e){if(e.app_graphic_title=e.graphic[0].title,e.graphic.shift(),1===e.visualizing_type)for(;e.graphic.length>4;)e.graphic.pop();else if(4===e.visualizing_type||7===e.visualizing_type)for(;e.graphic.length>2;)e.graphic.pop();else for(;e.graphic.length>3;)e.graphic.pop();for(var t=0;t<e.graphic.length;t++){var n=e.graphic[t];n.app_drops=[];var i=r(n.answer,n.choice_1,n.choice_2,n.choice_3,n.choice_4);i&&(n.app_drops[0]=i,(i=r(n.answer2,n.choice2_1,n.choice2_2,n.choice2_3,n.choice2_4))&&(n.app_drops[1]=i,(i=r(n.answer3,n.choice3_1,n.choice3_2,n.choice3_3,n.choice3_4))&&(n.app_drops[2]=i,(i=r(n.answer4,n.choice4_1,n.choice4_2,n.choice4_3,n.choice4_4))&&(n.app_drops[3]=i))))}return e};var i=c(206,116,225,1),o=c(34,205,172,1),s=c(255,186,0,1),a=c(116,113,236,1);function c(e,t,n,r){return{r:e,g:t,b:n,a:r}}function u(e){var t=e.r,n=e.g,r=e.b,i=e.a;return"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")}t.drawBalloon=function(e,t,n,r,l,p,_,d,f,m,h,v,y){var b;b=p<t?1.5*(t-p):1.5*(p-(t+r)),m||(m=0),h||(h=5),v||(v=2),y||(y=c(0,0,0,.2));var g,w=(m>0||m<0||h>0||h<0||v>0)&&y.a>0;(g="green"===f?o:"orange"===f?s:"purple"===f?a:i).a=1,e.lineCap="butt",e.lineJoin="miter",e.strokeStyle="transparent",e.fillStyle=u(g);var E=e.createLinearGradient(0,0,0,l);E.addColorStop(0,"rgba(255, 255, 255, 1)"),E.addColorStop(1,"rgba(255, 255, 255, 0)");var k=e.createLinearGradient(0,0,0,l);g.a=.4,k.addColorStop(0,u(g)),g.a=1,k.addColorStop(1,u(g)),e.beginPath(),e.moveTo(t+r,n+l-d),d>0&&e.arc(t+r-d,n+l-d,d,0,Math.PI/2),e.lineTo(t+d,n+l),d>0&&e.arc(t+d,n+l-d,d,Math.PI/2,Math.PI),p<t&&(e.lineTo(t,_+b/2),e.lineTo(p,_),e.lineTo(t,_-b/2)),e.lineTo(t,n+d),d>0&&e.arc(t+d,n+d,d,Math.PI,3*Math.PI/2),e.lineTo(t+r-d,n),d>0&&e.arc(t+r-d,n+d,d,3*Math.PI/2,2*Math.PI),p>t&&(e.lineTo(t+r,_-b/2),e.lineTo(p,_),e.lineTo(t+r,_+b/2),e.closePath()),e.closePath(),w?(e.shadowColor=u(y),e.shadowBlur=v,e.shadowOffsetX=m,e.shadowOffsetY=h,e.fill(),e.globalCompositeOperation="destination-out",e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),e.globalCompositeOperation="source-over",e.fillStyle=E,e.fill(),e.fillStyle=k,e.fill()):(e.globalCompositeOperation="source-over",e.fillStyle=E,e.fill(),e.fillStyle=k,e.fill()),e.globalCompositeOperation="source-over"}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).apply(this,arguments)))._click=function(){e.props.onClick(e.props.idx)},e}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.idx,n=e.on;return c.createElement("span",{className:(this.props.className?this.props.className:"")+(n?" on":""),onClick:this._click},t+1)}}])&&i(n.prototype,r),u&&i(n,u),t}();t.default=u},function(e,t){e.exports=ReactDraggable},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(21),s=n(26),a=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r},c=n(6);var u=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},l=n(27),p="object"==typeof self&&self&&self.Object===Object&&self,_=l.a||p||Function("return this")(),d=function(){return _.Date.now()},f=_.Symbol,m=Object.prototype,h=m.hasOwnProperty,v=m.toString,y=f?f.toStringTag:void 0;var b=function(e){var t=h.call(e,y),n=e[y];try{e[y]=void 0;var r=!0}catch(e){}var i=v.call(e);return r&&(t?e[y]=n:delete e[y]),i},g=Object.prototype.toString;var w=function(e){return g.call(e)},E="[object Null]",k="[object Undefined]",S=f?f.toStringTag:void 0;var C=function(e){return null==e?void 0===e?k:E:S&&S in Object(e)?b(e):w(e)};var x=function(e){return null!=e&&"object"==typeof e},O="[object Symbol]";var T=function(e){return"symbol"==typeof e||x(e)&&C(e)==O},P=NaN,N=/^\s+|\s+$/g,A=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,R=/^0o[0-7]+$/i,B=parseInt;var j=function(e){if("number"==typeof e)return e;if(T(e))return P;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(N,"");var n=D.test(e);return n||R.test(e)?B(e.slice(2),n?2:8):A.test(e)?P:+e},I="Expected a function",M=Math.max,H=Math.min;var L=function(e,t,n){var r,i,o,s,a,c,l=0,p=!1,_=!1,f=!0;if("function"!=typeof e)throw new TypeError(I);function m(t){var n=r,o=i;return r=i=void 0,l=t,s=e.apply(o,n)}function h(e){var n=e-c;return void 0===c||n>=t||n<0||_&&e-l>=o}function v(){var e=d();if(h(e))return y(e);a=setTimeout(v,function(e){var n=t-(e-c);return _?H(n,o-(e-l)):n}(e))}function y(e){return a=void 0,f&&r?m(e):(r=i=void 0,s)}function b(){var e=d(),n=h(e);if(r=arguments,i=this,c=e,n){if(void 0===a)return function(e){return l=e,a=setTimeout(v,t),p?m(e):s}(c);if(_)return a=setTimeout(v,t),m(c)}return void 0===a&&(a=setTimeout(v,t)),s}return t=j(t)||0,u(n)&&(p=!!n.leading,o=(_="maxWait"in n)?M(j(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),b.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=i=a=void 0},b.flush=function(){return void 0===a?s:y(d())},b},U="Expected a function";var F=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(U);return u(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),L(e,t,{leading:r,maxWait:t,trailing:i})},z={debounce:L,throttle:F},q=function(e){return z[e]},V=function(e){return"function"==typeof e},W=function(){return"undefined"==typeof window};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,K(t).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,r["PureComponent"]),n=t,(i=[{key:"render",value:function(){return this.props.children}}])&&Y(n.prototype,i),o&&Y(n,o),t}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){function t(e){var n,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,c=ee(t).call(this,e),n=!c||"object"!==J(c)&&"function"!=typeof c?te(i):c,re(te(n),"cancelHandler",function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)}),re(te(n),"rafClean",function(){n.raf&&n.raf.cancel&&(n.raf.cancel(),n.raf=null)}),re(te(n),"toggleObserver",function(e){var t=n.getElement();t&&n.resizeObserver[e]&&n.resizeObserver[e](t)}),re(te(n),"getElement",function(){var e=n.props.querySelector;if(!W()){if(e)return document.querySelector(e);var t=n.element&&Object(o.findDOMNode)(n.element);if(t)return t.parentElement}}),re(te(n),"createUpdater",function(){return n.rafClean(),n.raf=a(function(e){var t=e.width,r=e.height,i=n.props.onResize;V(i)&&i(t,r),n.setState({width:t,height:r})}),n.raf}),re(te(n),"createResizeHandler",function(e){var t=n.state,r=t.width,i=t.height,o=n.props,s=o.handleWidth,a=o.handleHeight;if(s||a){var c=n.createUpdater();e.forEach(function(e){var t=e&&e.contentRect||{},o=t.width,u=t.height,l=s&&r!==o||a&&i!==u;!n.skipOnMount&&l&&!W()&&c({width:o,height:u}),n.skipOnMount=!1})}}),re(te(n),"onRef",function(e){n.element=e}),re(te(n),"getRenderType",function(){var e=n.props,t=e.render,i=e.children;return V(t)?"renderProp":V(i)?"childFunction":Object(r.isValidElement)(i)?"child":Array.isArray(i)?"childArray":"parent"}),re(te(n),"getTargetComponent",function(){var e=n.props,t=e.render,i=e.children,o=e.nodeType,s=n.state,a={width:s.width,height:s.height};switch(n.getRenderType()){case"renderProp":return Object(r.cloneElement)(t(a),{key:"resize-detector"});case"childFunction":return Object(r.cloneElement)(i(a));case"child":return Object(r.cloneElement)(i,a);case"childArray":return i.map(function(e){return Object(r.cloneElement)(e,a)});default:return Object(r.createElement)(o)}});var u=e.skipOnMount,l=e.refreshMode,p=e.refreshRate,_=e.refreshOptions;n.state={width:void 0,height:void 0},n.skipOnMount=u,n.raf=null,n.element=null,n.unmounted=!1;var d=q(l);return n.resizeHandler=d?d(n.createResizeHandler,p,_):n.createResizeHandler,n.resizeObserver=new s.a(n.resizeHandler),n}var n,c,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,r["PureComponent"]),n=t,(c=[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return i.a.createElement($,{ref:this.onRef},this.getTargetComponent())}}])&&X(n.prototype,c),u&&X(n,u),t}();ie.propTypes={handleWidth:c.bool,handleHeight:c.bool,skipOnMount:c.bool,refreshRate:c.number,refreshMode:c.string,refreshOptions:Object(c.shape)({leading:c.bool,trailing:c.bool}),querySelector:c.string,onResize:c.func,render:c.func,children:c.any,nodeType:c.node},ie.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,onResize:null,render:void 0,children:null,nodeType:"div"};var oe=ie;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ce(this,ue(o).apply(this,arguments))}var s,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(o,r.Component),s=o,(a=[{key:"render",value:function(){return i.a.createElement(oe,t,i.a.createElement(e,this.props))}}])&&ae(s.prototype,a),c&&ae(s,c),o}()};n.d(t,"withResizeDetector",function(){return pe});t.default=oe},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.Loading=function(e){var t=e.view,n={position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"};return n.backgroundImage='url("'.concat("/content/digenglish_lib/",'images/loading.svg")'),n.backgroundColor="rgba(0, 0, 0, 0.1)",n.zIndex=101,t||(n.visibility="hidden",n.zIndex=-1,n.pointerEvents="none"),r.createElement("div",{style:n})}},function(e,t,n){"use strict";function r(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var _,d=n(0),f=n(1),m=n(2),h=n(4),v=n(3);!function(e){e[e.INIT=0]="INIT",e[e.RUNNING=1]="RUNNING",e[e.PAUSE=2]="PAUSE"}(_||(_={}));var y=function(){function e(t){var n=this;a(this,e),this.m_runState=0,this.m_max=60,this.m_playSound=!0,this.start=function(){n.m_runState=1},this.reset=function(){n.m_runState=0},this.pause=function(){n.m_runState=2},this.m_max=t}return u(e,[{key:"setPlaySound",value:function(e){this.m_playSound=e}},{key:"setMax",value:function(e){this.m_max=e}},{key:"runState",get:function(){return this.m_runState}},{key:"isRunning",get:function(){return 1===this.m_runState}},{key:"max",get:function(){return this.m_max}},{key:"playSound",get:function(){return this.m_playSound}}]),e}();function b(e,t,n,r){var i=(r-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}function g(e,t,n,r,i){var o;if(i-r>=360)o=["M",e,t,"m",-n,0,"a",n,n,0,"1",0,2*n,0,"a",n,n,0,"1",0,2*-n,0].join(" ");else{var s=i-r<=180?"0":"1",a=b(e,t,n,i),c=b(e,t,n,r);o=["M",a.x,a.y,"A",n,n,0,s,0,c.x,c.y,"L",e,t,"L",a.x,a.y].join(" ")}return o}p([f.observable],y.prototype,"m_runState",void 0),p([f.computed],y.prototype,"runState",null),p([f.observable],y.prototype,"m_max",void 0),p([f.computed],y.prototype,"max",null),p([f.action],y.prototype,"start",void 0),p([f.action],y.prototype,"reset",void 0),p([f.action],y.prototype,"pause",void 0),t.TimerState=y;var w=32,E=w,k=2*E,S=function(e){function t(e){var n;return a(this,t),(n=r(this,i(t).call(this,e))).m_runState=0,n.m_sec=0,n.m_stime=0,n.m_text="",n.m_d="",n._start=function(){n.m_sec=n.props.state.max,n.m_text=n._getTime(n.m_sec),n.m_d="",n.m_stime=Date.now(),n._run(0),n.props.onStart&&n.props.onStart()},n._run=function(e){if(n.props&&1===n.m_runState){var t=n.props.state.max,r=Date.now()-n.m_stime,i=t-Math.floor(r/1e3);n.m_sec!==i&&(n.m_text=n._getTime(i),0===i?n.props.state.playSound&&v.App.pub_playDingend():i<5?n.props.state.playSound&&v.App.pub_playDing():i>=5&&i<=10&&n.props.state.playSound&&v.App.pub_playClock()),n.m_sec=i,i>0?(n._drawArc(r),window.requestAnimationFrame(n._run)):(n._drawArc.cancel(),n.m_d=g(E,E,w,0,360),n.props.onComplete())}},n.m_text=n._getTime(n.props.state.max),n.m_d="",f.autorun(function(){if(n.props){var e=n.props.state,t=e.max;1===e.runState&&1!==n.m_runState?(n.m_runState=1,n._start()):0===e.runState&&(n.m_text=n._getTime(t),n.m_d=""),n.m_runState=e.runState}}),n._drawArc=h.throttle(function(e){if(n.props&&1===n.m_runState){var t=1e3*n.props.state.max,r=0;if(n.m_sec<=5){var i=e%1e3;r=0===e?0:0===i?1:i/1e3}else r=e/t;r*=360,n.m_d=g(E,E,w,0,r)}},50,{trailing:!0}),n}return o(t,d.Component),u(t,[{key:"_getTime",value:function(e){var t=Math.floor(e/60),n=e%60,r="";return r=t<10?"0"+t:""+t,r=n<10?r+":0"+n:r+":"+n}},{key:"render",value:function(){var e=this.m_sec<=5?"#f00":"#ff0";return d.createElement("div",{className:"q_timer",hidden:!this.props.view},d.createElement("svg",{width:k,height:k,viewBox:"0 0 "+k+" "+k},d.createElement("path",{fill:e,d:this.m_d})),d.createElement("div",{className:"m_text"},this.m_text))}}]),t}();p([f.observable],S.prototype,"m_text",void 0),p([f.observable],S.prototype,"m_d",void 0),S=p([m.observer],S),t.Timer=S;var C=-.5*Math.PI,x=function(e){function t(e){var n;return a(this,t),(n=r(this,i(t).call(this,e))).m_runState=0,n.m_sec=0,n.m_stime=0,n.m_r=0,n.m_view=!1,n._start=function(){n.m_sec=n.props.state.max,n.m_stime=Date.now(),n._run(0),n.props.onStart&&n.props.onStart()},n._run=function(e){if(n.props&&1===n.m_runState){var t=Date.now()-n.m_stime,r=n.props.state.max-Math.floor(t/1e3);n.m_sec!==r&&(n.m_sec=r,0===r?(n.props.state.playSound&&v.App.pub_playDingend(),n.props.onComplete()):r<=5&&n.props.state.playSound&&v.App.pub_playDing()),r>0?(n._drawArc(t%1e3),window.requestAnimationFrame(n._run)):n._drawArc(1e3)}},n._refCanvas=function(e){!n.m_canvas&&e&&(n.m_canvas=e,n.m_r=e.width/2,n.m_ctx=e.getContext("2d"))},n._onTransEnd=function(){n.props.view||(n.m_view=!1)},n.m_sec=n.props.state.max,n.m_view=e.view,f.autorun(function(){if(n.props){var e=n.props.state;if(1===e.runState&&1!==n.m_runState)n.m_runState=1,n._start();else if(0===e.runState&&0!==n.m_runState&&(n.m_sec=e.max,n.m_ctx)){var t=n.m_r;n.m_ctx.clearRect(0,0,2*t,2*t)}n.m_runState=e.runState}}),n._drawArc=h.throttle(function(e){if(n.m_canvas&&n.props&&1===n.m_runState){var t=2*Math.PI*e/1e3,r=n.m_r;n.m_ctx.clearRect(0,0,2*r,2*r),n.m_ctx.beginPath(),n.m_ctx.fillStyle="#5538EB",n.m_ctx.moveTo(r,r),n.m_ctx.arc(r,r,r,C,t+C),n.m_ctx.fill()}},50),n}return o(t,d.Component),u(t,[{key:"componentDidUpdate",value:function(e){e.view!==this.props.view&&this.props.view&&(this.m_view=!0)}},{key:"render",value:function(){return d.createElement("div",{className:"countdown2 "+(this.m_view?"":"hide")},d.createElement("div",{className:"countdown "+(this.props.view?"view":"hide"),onTransitionEnd:this._onTransEnd},d.createElement("canvas",{width:"206px",height:"206px",ref:this._refCanvas}),d.createElement("div",null,d.createElement("div",null,this.m_sec))))}}]),t}();p([f.observable],x.prototype,"m_sec",void 0),p([f.observable],x.prototype,"m_view",void 0),x=p([m.observer],x),t.CountDown2=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e,t,n){for(var i=e.split(/\s/g),o=new RegExp(/[\.\!\?\s]/g),s=[],a=0;a<i.length;a++){var c=i[a];if(""!==c){for(var u=[],l=o.exec(c),p=0,_="";l;)l.index>p&&(_=c.substring(p,l.index),u.push(r.createElement("span",{key:t.key++},_))),_=l[0],u.push(_),p=o.lastIndex,l=o.exec(c);p<c.length&&(_=c.substring(p),u.push(r.createElement("span",{key:t.key++},_))),s.push(r.createElement("span",{key:t.key++,className:n},u.map(function(e){return e})))}}return s}t.parseBlock=function(e,t,n){for(var i=[],o=new RegExp(/\{(.*?)\}/g),s=o.exec(e),a=0,c=0,u="";s;){s.index>a&&(u=e.substring(a,s.index),i.push(u)),u=s[1];var l=n;l||(l=u),i.push(r.createElement("span",{key:c++,className:t,"data-correct":u},l)),a=o.lastIndex,s=o.exec(e)}return a<e.length&&(u=e.substring(a),i.push(u)),i},t.parseUnscramble=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.split(" "),o=!1,s=[],a=0;a<i.length;a++){var c=i[a],u=c.lastIndexOf("{"),l=c.lastIndexOf("}");o?(s[s.length-1]=s[s.length-1]+" "+c,l>u&&(o=!1)):(s.push(c),u>l&&(o=!0))}for(var p=0,_=[],d=n?[]:null,f=0;f<s.length;f++){for(var m=s[f],h=new RegExp(/\{(.*?)\}/g),v=h.exec(m),y=0,b="",g=[];v;)v.index>y&&(b=m.substring(y,v.index),g.push(b)),b=v[1],g.push(r.createElement("span",{key:p++,className:t},b)),d&&d.push(b),y=h.lastIndex,v=h.exec(m);y<m.length&&(b=m.substring(y),g.push(b)),f>0&&_.push(" "),_.push(r.createElement("div",{key:p++},g.map(function(e){return e})))}if(d&&n)for(var w,E=0;(w=d.length)>0;){var k=Math.floor(Math.random()*w);0===E&&0===k&&d.length>1||k<w&&(n.push(d[k]),d.splice(k,1),E++)}return r.createElement(r.Fragment,null,_.map(function(e){return e}))},t.sentence2jsx=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,c=new RegExp(/\{(.*?)\}/g),u={key:0},l=[];return e.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>").forEach(function(e,p){if(n){for(var _=c.exec(e),d=0,f="",m=[];_;){_.index>d&&(f=e.substring(d,_.index),m.push(i(f,u,a))),f=_[1];var h=o;h||(h=f),t=s?i(h,u,a):h,m.push(r.createElement("span",{key:u.key++,className:n,"data-correct":f},t)),d=c.lastIndex,_=c.exec(e)}d<e.length&&(f=e.substring(d),m.push(i(f,u,a))),l[p]=r.createElement(r.Fragment,{key:u.key++},m)}else l[p]=r.createElement(r.Fragment,{key:u.key++},i(e,u,a))}),l}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),d=n(1),f=n(2),m=n(4),h=n(13),v=n(5);n(61);var y=20,b=9,g=8,w=13,E=48,k=49,S=50,C=51,x=52,O=53,T=54,P=55,N=56,A=57,D=65,R=90,B=188,j=222,I=190,M=32,H=-1,L=0,U=null,F=null,z=null,q=-1,V=-1,W=null,G=null,Y=null,Z=null,K=null;var Q=function e(){u(this,e),this.state="hide",this.capslock=!1,this.disableDone=!1};p([d.observable],Q.prototype,"state",void 0),p([d.observable],Q.prototype,"capslock",void 0),p([d.observable],Q.prototype,"disableDone",void 0);var $=new Q;t.state=$;var J=m.throttle(function(){if(!(q<0))if(z)if(0===q)z.done();else{var e=ee(q,$.capslock);z.keyDown(q,e)}else if(U){if(document.activeElement!==U&&U.focus(),0===q)return void(Z?Z():"on"===$.state&&($.state="off"));if(q===w&&K)return void K();var t=h.nteInt(U.selectionStart,-1),n=h.nteInt(U.selectionEnd,-1);if(t<0||n<0)return;var r=ee(q,$.capslock),i=U.value,o=i.substring(0,t),s=i.substring(n);q===g&&t>0&&(o=o.substring(0,o.length-1));var a=o+r+s;U.value=a;var c=(o+r).length;U.setSelectionRange(c,c),W&&W(a)}else if(F){document.activeElement!==F&&F.focus();var u=h.nteInt(F.selectionStart,-1),l=h.nteInt(F.selectionEnd,-1);if(u<0||l<0||q<0)return;var p=F.value,_=p.length,d=ee(q,$.capslock);if(0===q)return void(Z&&Z());if(q===w)return void(K&&K());if(q===b)return void(G&&G());if(q===g){if(0===u&&0===l)return void(Y&&Y())}else if(V>0){if(_>V)return F.value=p.substring(0,V),F.selectionStart=V,void(F.selectionEnd=V);if(_===V&&u===V&&l===V)return void(G&&G())}var f,m=p.substring(0,u),v=p.substring(l),y=(m+d).length;if(q===g)u>0&&u===l&&(m=m.substring(0,m.length-1)),f=m+v,y=m.length,F.value=f,F.selectionStart=y,F.selectionEnd=y,W&&W(f);else{var E=(f=m+d+v).length;V>0&&E>V&&(f=f.substring(0,V)),E=f.length,(y=(m+d).length)>E&&(y=E),F.value=f,F.selectionStart=y,F.selectionEnd=y,W&&W(f),V>0&&y>=E&&G&&G()}}},60),X=function e(t){q<0?J.cancel():(L>30&&J(),L++,H=window.requestAnimationFrame(e))};function ee(e,t){var n;return e===M?" ":e===b?"\t":e===w?"\n":e===g?"":e===B?t?"-":",":e===j?t?'"':"'":e===I?t?"?":".":e>=D&&e<=R?(n=String.fromCharCode(e),t?n:n.toLowerCase()):t?e===E?")":e===k?"!":e===S?"@":e===C?"#":e===x?"$":e===O?"%":e===T?"^":e===P?"&":e===N?"*":e===A?"(":"":String.fromCharCode(e)}t.setCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;W=e,Y=t,G=n,Z=r,K=i},t.setInputs=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&"keyDown"in(t=e)&&"done"in t?(z=e,F=null,U=null):e instanceof HTMLTextAreaElement?(U=e,F=null,z=null):e instanceof HTMLInputElement?(F=e,U=null,z=null):(F=null,U=null,z=null,q=-1),V=n};var te=function(e){function t(e){var n;return u(this,t),(n=o(this,s(t).call(this,e)))._keyDown=function(){n.props.keyCode!==y?(H>=0&&(window.cancelAnimationFrame(H),H=-1),J.cancel(),q=n.props.keyCode,J(),L=0,H=window.requestAnimationFrame(X)):$.capslock=!$.capslock},n._keyUp=function(){L=0,H>=0&&(window.cancelAnimationFrame(H),H=-1),J.cancel(),q=-1},n._leave=function(){L=0,H>=0&&(window.cancelAnimationFrame(H),H=-1),J.cancel(),q=-1},n}return a(t,_.Component),i(t,[{key:"render",value:function(){return _.createElement(v.ToggleBtn,{className:this.props.className,onMouseDown:this._keyDown,onMouseUp:this._keyUp,onMouseLeave:this._leave,disableCapture:!0,on:this.props.on},this.props.children)}}]),t}(),ne=function(e){function t(){var e;return u(this,t),(e=o(this,s(t).apply(this,arguments)))._on=function(){"off"===$.state&&($.state="on")},e._off=function(){"on"===$.state&&($.state="off")},e}return a(t,_.Component),i(t,[{key:"render",value:function(){var e=$.state,t=$.capslock,n=$.disableDone;return _.createElement("div",{className:"keyboard-box "+e+(t?" uppercase":"")},_.createElement("div",null,_.createElement(te,{className:"s",keyCode:k},ee(k,t)),_.createElement(te,{className:"s",keyCode:S},ee(S,t)),_.createElement(te,{className:"s",keyCode:C},ee(C,t)),_.createElement(te,{className:"s",keyCode:x},ee(x,t)),_.createElement(te,{className:"s",keyCode:O},ee(O,t)),_.createElement(te,{className:"s",keyCode:T},ee(T,t)),_.createElement(te,{className:"s",keyCode:P},ee(P,t)),_.createElement(te,{className:"s",keyCode:N},ee(N,t)),_.createElement(te,{className:"s",keyCode:A},ee(A,t)),_.createElement(te,{className:"s",keyCode:E},ee(E,t)),_.createElement(te,{className:"s",keyCode:B},ee(B,t)),_.createElement(te,{className:"s",keyCode:j},ee(j,t)),_.createElement(te,{className:"s",keyCode:I},ee(I,t)),_.createElement(te,{className:"s key_back",keyCode:g})),_.createElement("div",null,_.createElement(te,{className:"m alpha",keyCode:81},ee(81,t)),_.createElement(te,{className:"m alpha",keyCode:87},ee(87,t)),_.createElement(te,{className:"m alpha",keyCode:69},ee(69,t)),_.createElement(te,{className:"m alpha",keyCode:82},ee(82,t)),_.createElement(te,{className:"m alpha",keyCode:84},ee(84,t)),_.createElement(te,{className:"m alpha",keyCode:89},ee(89,t)),_.createElement(te,{className:"m alpha",keyCode:85},ee(85,t)),_.createElement(te,{className:"m alpha",keyCode:73},ee(73,t)),_.createElement(te,{className:"m alpha",keyCode:79},ee(79,t)),_.createElement(te,{className:"m alpha",keyCode:80},ee(80,t)),_.createElement(te,{className:"b key_shift",on:$.capslock,keyCode:y})),_.createElement("div",null,_.createElement(te,{className:"m alpha",keyCode:D},ee(D,t)),_.createElement(te,{className:"m alpha",keyCode:83},ee(83,t)),_.createElement(te,{className:"m alpha",keyCode:68},ee(68,t)),_.createElement(te,{className:"m alpha",keyCode:70},ee(70,t)),_.createElement(te,{className:"m alpha",keyCode:71},ee(71,t)),_.createElement(te,{className:"m alpha",keyCode:72},ee(72,t)),_.createElement(te,{className:"m alpha",keyCode:74},ee(74,t)),_.createElement(te,{className:"m alpha",keyCode:75},ee(75,t)),_.createElement(te,{className:"m alpha",keyCode:76},ee(76,t)),_.createElement(te,{className:"b key_enter",keyCode:w})),_.createElement("div",null,_.createElement(te,{className:"m alpha",keyCode:R},ee(R,t)),_.createElement(te,{className:"m alpha",keyCode:88},ee(88,t)),_.createElement(te,{className:"m alpha",keyCode:67},ee(67,t)),_.createElement(te,{className:"m alpha",keyCode:86},ee(86,t)),_.createElement(te,{className:"m alpha",keyCode:66},ee(66,t)),_.createElement(te,{className:"m alpha",keyCode:78},ee(78,t)),_.createElement(te,{className:"m alpha",keyCode:77},ee(77,t)),_.createElement(te,{className:"b key_space",keyCode:M}),_.createElement(te,{className:"b done"+(n?" dis":""),keyCode:0})),_.createElement(v.ToggleBtn,{className:"key_hide",onClick:this._off}),_.createElement(v.ToggleBtn,{className:"key_view",onClick:this._on}))}}]),t}();ne=p([f.observer],ne),t.Keyboard=ne},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=2;var a=20,c=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&u()}function c(){o(a)}function u(){var e=Date.now();if(n){if(e-i<s)return;r=!0}else n=!0,r=!1,setTimeout(c,t);i=e}return u}(this.refresh.bind(this),a)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;c.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},_=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},d=b(0,0,0,0);function f(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+f(e["border-"+n+"-width"])},0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=_(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=f(o)}return t}(r),o=i.left+i.right,s=i.top+i.bottom,a=f(r.width),c=f(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==t&&(a-=m(r,"left","right")+o),Math.round(c+s)!==n&&(c-=m(r,"top","bottom")+s)),!function(e){return e===_(e).document.documentElement}(e)){var u=Math.round(a+o)-t,l=Math.round(c+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(l)&&(c-=l)}return b(i.left,i.top,a,c)}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof _(e).SVGGraphicsElement}:function(e){return e instanceof _(e).SVGElement&&"function"==typeof e.getBBox};function y(e){return r?v(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):h(e):d}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=y(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(){return function(e,t){var n,r,i,o,s,a,c,u=(r=(n=t).x,i=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),p(c,{x:r,y:i,width:o,height:s,top:i,right:r+o,bottom:s+i,left:r}),c);p(this,{target:e,contentRect:u})}}(),E=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof _(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof _(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!=typeof WeakMap?new WeakMap:new n,S=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new E(t,n,this);k.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(e){S.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}});var C=void 0!==i.ResizeObserver?i.ResizeObserver:S;t.a=C}).call(this,n(16))},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(16))},function(e,t,n){e.exports=n(29)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(0),o=n(21),s=n(3),a=n(7),c=n(36);r.setConfig({ErrorOverlay:function(e){return i.createElement("div",null)}});var u,l={clear:s.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML};u=n(37);var p=!1,_=u,d=_.default,f=_.AppProvider,m=_.appContext;l.set=function(e,t,n){s.App.pub_set(e,t,n),m.setData(e)},l.render=function(){s.App.pub_initAudio(),o.render(i.createElement(f,null,i.createElement(d,null)),document.getElementById("wrap"))},l.init=function(e,t,n,r,i){s.App.pub_load(e,null,t,n,r,i)},l.start=function(){p=!0,setTimeout(function(){return m.start()},500)},l.receive=function(e){if(4===e.type){var t=e.data;p?t&&t.id&&""!==t.id&&(s.App.isStarted?a.sendPADToID(t.id,0,null):a.sendPADToID(t.id,1,null)):s.App.pub_addInitedStudent(t)&&(p||(p=!0,m.start()))}else m.receive(e)},l.teachingTool=function(e){},n(68),e.app_o=l}).call(this,n(16))},function(e,t,n){"use strict";e.exports=n(31)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(0))&&"object"==typeof r&&"default"in r?r.default:r;t.AppContainer=function(e){return i.Children.only(e.children)},t.hot=function(){return function(e){return e}},t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),c=r[n];n<o;c=r[++n])m(c)||!g(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=l(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(h(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(k(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return p(n)}var u,g="",S=!1,C=["{","}"];(d(n)&&(S=!0,C=["[","]"]),k(n))&&(g=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(g=" "+RegExp.prototype.toString.call(n)),w(n)&&(g=" "+Date.prototype.toUTCString.call(n)),E(n)&&(g=" "+p(n)),0!==s.length||S&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=S?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)O(t,String(s))?o.push(_(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(_(e,t,n,r,i,!0))}),o}(e,n,r,a,s):s.map(function(t){return _(e,n,r,a,t,S)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,g,C)):C[0]+g+C[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function _(e,t,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),O(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function h(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return g(e)&&"[object RegExp]"===S(e)}function g(e){return"object"==typeof e&&null!==e}function w(e){return g(e)&&"[object Date]"===S(e)}function E(e){return g(e)&&("[object Error]"===S(e)||e instanceof Error)}function k(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=h,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=g,t.isDate=w,t.isError=E,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(34);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":"),[e.getDate(),x[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(35),t._extend=function(e,t){if(!t||!g(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(P,t,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(33))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,p=-1;function _(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&d())}function d(){if(!l){var e=a(_);l=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importHTML=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="document",r.onload=function(e){if(e){var i=r.response;i&&i.body&&i.body.firstElementChild?t(i.body.firstElementChild):i&&i.documentElement?t(i.documentElement):n("error")}},r.onerror=function(e){n(e)},r.send(null)})},t.importLink=function(e,t){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="document",r.onload=function(e){if(e){var n=r.response;t(n)}},r.onerror=function(e){n(e)},r.send(null)})}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=n(38);n(39),n(40);var _=n(41),d=n(42);t.AppProvider=d.TeacherProvider,t.appContext=d.tContext;var f=n(44),m=n(3),h=n(45),v=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,o(t).call(this,e))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.state,n=e.actions,r=t.viewDiv;return u.createElement(u.Fragment,null,u.createElement("div",{id:"preload_hidden",style:{opacity:0}},u.createElement("span",null,"abc"),u.createElement("span",{style:{fontWeight:"bold"}},"a"),u.createElement("span",{className:"set"})," ",u.createElement("span",{className:"unlimit"})," ",u.createElement("span",{className:"start"}),u.createElement("span",{className:"time1"}),u.createElement("span",{className:"time2"})," ",u.createElement("span",{className:"time3"})),u.createElement("div",{className:"content-container"},u.createElement("div",{className:"content-wrapper",style:{left:("direction"===r?0:-1280)+"px"}},u.createElement("div",null,u.createElement(f.default,{className:"video-direction",view:"direction"===r,on:t.directionON,isTeacher:!0,video_url:"/content/digenglish_lib/direction/rw_comprehension.webp",video_frame:125,onEndStart:n.onDirectionEndStart,onEnd:n.onDirectionEnded},u.createElement("div",{className:"lesson"},m.App.lesson))),u.createElement("div",null,u.createElement(h.default,{view:"content"===r,state:t,actions:n})))),u.createElement(_.Navi,Object.assign({},t.navi,{onLeftClick:n.naviLeft,onRightClick:n.naviRight})))}}])&&r(n.prototype,a),c&&r(n,c),t}();v=c([l.observer],v);var y=d.useTeacher(function(e){return u.createElement(l.Observer,null,function(){return u.createElement(v,{state:e.state,actions:e.actions})})});t.default=p.hot(y)},function(e,t,n){t.hot=function(e){return e}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(1),p=n(2),_=n(5),d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e))).m_on=!1,n.m_isStarted=!1,n._onClick=function(e){n.m_on=!0},n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}},{key:"render",value:function(){var e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return u.createElement(u.Fragment,null,u.createElement("div",{id:"common_navi_left",className:e,style:t},u.createElement("div",null,u.createElement("div",{onClick:this._onClick},u.createElement(_.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),u.createElement(_.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),u.createElement("div",{id:"common_navi_right",className:e,style:t},u.createElement("div",null,u.createElement("div",{onClick:this._onClick},u.createElement(_.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),u.createElement(_.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([l.observable],d.prototype,"m_on",void 0),d=c([p.observer],d),t.Navi=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var d,f=n(0),m=n(4),h=n(1),v=n(7),y=n(17),b=n(43),g=n(13);!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.COMPLETE=3]="COMPLETE"}(d||(d={})),t.SENDPROG=d;var w=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).call(this)))._warmupFnc=null,e._questionFnc=null,e._qnaFnc=null,e._graphFnc=null,e._graphSheetFnc=null,e._summaryFnc=null,e._checkupFnc=null,e._uploadInclassReport=function(t){var n=e._data.question,r=[];n.forEach(function(e,n){var i=t.returns[n],o=g._toStringTimestamp(new Date(i.stime)),s=g._toStringTimestamp(new Date(i.etime));i&&e.tmq_seq&&r.push({std_cont_seq:e.tmq_seq,studentId:t.id,ans_tf:i.answer===e.answer?"1":"0",ans_submit:""+i.answer,ans_starttime:o,ans_endtime:s,sc_div1:e.SC_DIV1?e.SC_DIV1:"",sc_div2:e.SC_DIV2?e.SC_DIV2:"",sc_div3:e.SC_DIV3?e.SC_DIV3:"",sc_div4:e.SC_DIV4?e.SC_DIV4:"",files:null,ans_correct:""+e.answer,tab_index:""})}),r.length>0&&(console.log("inclassReport(LogFromContentTeacher): ",r),v.uploadInclassReport(r))},e.state.videoPopup=!1,e.state.viewStoryBook=!1,e.state.warmup_returns=[],e.state.isNaviBack=!1,e.state.isVideoStudied=!1,e.actions.getData=function(){return e._data},e.actions.gotoDirection=function(){return e._setViewDiv("direction")},e.actions.gotoNextBook=function(){v.sendLauncher(9,null)},e.actions.setWarmupFnc=function(t){e._warmupFnc=t},e.actions.setQuestionFnc=function(t){e._questionFnc=t},e.actions.setQNAFnc=function(t){e._qnaFnc=t},e.actions.setGraphFnc=function(t){e._graphFnc=t},e.actions.setGraphSheetFnc=function(t){e._graphSheetFnc=t},e.actions.setSummaryFnc=function(t){e._summaryFnc=t},e.actions.setCheckupFnc=function(t){e._checkupFnc=t},e}return u(t,b.TeacherContextBase),o(t,[{key:"_setViewDiv",value:function(e){e!==this.state.viewDiv&&(this.state.videoPopup=!1,this.state.viewStoryBook=!1),a(c(t.prototype),"_setViewDiv",this).call(this,e)}},{key:"receive",value:function(e){if(a(c(t.prototype),"receive",this).call(this,e),11===e.type&&e.data){var n,r,i=e.data,o=null,s=[];if("warmup_return"===i.msgtype){var u=i;this._warmupFnc&&(this._warmupFnc(u),n=g._toStringTimestamp(new Date(u.stime)),r=g._toStringTimestamp(new Date(u.etime)),s.push({std_cont_seq:0,studentId:u.id,ans_tf:"1",ans_submit:"typ;"+u.msg,ans_starttime:n||"",ans_endtime:r||"",sc_div1:"",sc_div2:"",sc_div3:"",sc_div4:"",files:o,ans_correct:"",tab_index:"4"}))}else if("qna_return"===i.msgtype){var l=i;if(this._qnaFnc){if(this._qnaFnc(l),l.seq<0)return;n=g._toStringTimestamp(new Date(l.stime)),r=g._toStringTimestamp(new Date(l.etime));for(var p="qna;",_=[],d=0;d<this._data.scripts.length;d++)this._data.scripts[d].passage_page===l.seq&&_.push(this._data.scripts[d]);if(0===_.length)return;l.returns.forEach(function(e,t){var n=_[e];n&&(p+="qna;"===p?n.seq+"|"+n.dms_eng:""+n.seq+"|"+n.dms_eng)}),s.push({std_cont_seq:0,studentId:l.id,ans_tf:0===l.returns.length?"0":"1",ans_submit:p,ans_starttime:n||"",ans_endtime:r||"",sc_div1:"",sc_div2:"",sc_div3:"",sc_div4:"",files:o,ans_correct:"",tab_index:"5"})}}else if("question_return"===i.msgtype){var f=i;this._questionFnc&&(this._questionFnc(f),this._uploadInclassReport(f))}else if("graphic_return"===i.msgtype){var h=i;if(this._graphFnc)this._graphFnc(h),this._data.graphic.forEach(function(e,t){var i=h.returns[t];if(i&&e.tmq_seq){n=g._toStringTimestamp(new Date(i.stime)),r=g._toStringTimestamp(new Date(i.etime));var o=e.answer.toString();e.answer2&&(o+=","+e.answer2.toString()),e.answer3&&(o+=","+e.answer3.toString()),e.answer4&&(o+=","+e.answer4.toString()),s.push({std_cont_seq:e.tmq_seq,studentId:h.id,ans_tf:i.correct?"1":"0",ans_submit:""+i.answer,ans_starttime:n||"",ans_endtime:r||"",sc_div1:e.SC_DIV1?e.SC_DIV1:"",sc_div2:e.SC_DIV2?e.SC_DIV2:"",sc_div3:e.SC_DIV3?e.SC_DIV3:"",sc_div4:e.SC_DIV4?e.SC_DIV4:"",files:null,ans_correct:""+o,tab_index:""})}})}else if("sheet_return"===i.msgtype){var y=i;if(this._graphSheetFnc){this._graphSheetFnc(y),n=g._toStringTimestamp(new Date(y.stime)),r=g._toStringTimestamp(new Date(y.etime));var b="img;",w="3";"keyboard"===y.type?(b="typ;"+y.input,w="14"):""!==y.input&&(o=[]).push(y.input),s.push({std_cont_seq:0,studentId:y.id,ans_tf:"1",ans_submit:b,ans_starttime:n||"",ans_endtime:r||"",sc_div1:"",sc_div2:"",sc_div3:"",sc_div4:"",files:o,ans_correct:"",tab_index:w})}}else if("summary_return"===i.msgtype){var E=i;if(this._summaryFnc)this._summaryFnc(E),this._data.summarizing.forEach(function(e,t){var i=E.returns[t];i&&e.tmq_seq&&(n=g._toStringTimestamp(new Date(i.stime)),r=g._toStringTimestamp(new Date(i.etime)),s.push({std_cont_seq:e.tmq_seq,studentId:E.id,ans_tf:i.answer===e.answer?"1":"0",ans_submit:""+i.answer,ans_starttime:n||"",ans_endtime:r||"",sc_div1:e.SC_DIV1?e.SC_DIV1:"",sc_div2:e.SC_DIV2?e.SC_DIV2:"",sc_div3:e.SC_DIV3?e.SC_DIV3:"",sc_div4:e.SC_DIV4?e.SC_DIV4:"",files:null,ans_correct:""+e.answer.toString(),tab_index:""}))})}else if("v_checkup_return"===i.msgtype){var k=i;if(this._checkupFnc){if(this._checkupFnc(k),n=g._toStringTimestamp(new Date(k.stime)),r=g._toStringTimestamp(new Date(k.etime)),1!==k.returns.length)return;var S=k.returns[0],C=m.find(this._data.checkup,{seq:k.seq});if(!C)return;s.push({std_cont_seq:C.tmq_seq?C.tmq_seq:0,studentId:k.id,ans_tf:S===C.answer?"1":"0",ans_submit:""+S,ans_starttime:n||"",ans_endtime:r||"",sc_div1:C.SC_DIV1?C.SC_DIV1:"",sc_div2:C.SC_DIV2?C.SC_DIV2:"",sc_div3:C.SC_DIV3?C.SC_DIV3:"",sc_div4:C.SC_DIV4?C.SC_DIV4:"",files:null,ans_correct:""+C.answer,tab_index:""})}}s.length>0&&(console.log("inclassReport(LogFromContentTeacher): ",s),v.uploadInclassReport(s))}}},{key:"setData",value:function(e){this._data=y.initData(e);for(var t=0;t<this._data.warmup.length;t++)this.state.warmup_returns[t]=[]}}]),t}();_([h.observable],w.prototype,"state",void 0),_([h.action],w.prototype,"_setViewDiv",null),t.TeacherContext=w;var E=new w;t.tContext=E;var k=f.createContext(E),S=k.Provider,C=k.Consumer;t.TeacherConsumer=C;var x=function(e){function t(){return r(this,t),s(this,c(t).apply(this,arguments))}return u(t,f.Component),o(t,[{key:"render",value:function(){return f.createElement(S,{value:E},this.props.children)}}]),t}();t.TeacherProvider=x,t.useTeacher=function(e){return function(t){return f.createElement(C,null,function(t){return f.createElement(e,Object.assign({},t))})}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=this&&this.__decorate||function(e,t,n,r){var o,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(3),c=n(7),u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},retCnt:0,numOfStudent:0},this.actions={onDirectionEndStart:function(){"direction"===t.state.viewDiv&&c.sendPAD(3,null)},onDirectionEnded:function(){"direction"===t.state.viewDiv&&t._setViewDiv("content"),a.App.isStarted=!0},setNaviView:function(e){t.state.navi.view=e},setNavi:function(e,n){t.state.navi.enableLeft=e,t.state.navi.enableRight=n},setNaviFnc:function(e,n){t._naviLeftFnc=e,t._naviRightFnc=n},naviLeft:function(){"direction"===t.state.viewDiv?c.sendLauncher(8,null):(a.App.pub_playBtnPage(),t._naviLeftFnc?t._naviLeftFnc():t._setViewDiv("direction"))},naviRight:function(){"direction"===t.state.viewDiv?(a.App.pub_playBtnPage(),t.state.directionON=!1):(a.App.pub_playBtnPage(),t._naviRightFnc?t._naviRightFnc():c.sendLauncher(9,null))},setRetCnt:function(e){e>t.state.numOfStudent&&(e=t.state.numOfStudent),t.state.retCnt=e},setNumOfStudent:function(e){t.state.numOfStudent=e}}}var t,n,i;return t=e,(n=[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&(a.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,c.sendLauncher(5,null),c.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=a.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,c.sendLauncher(6,null),c.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=e)}},{key:"start",value:function(){"direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=a.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,c.sendLauncher(5,null),c.sendPAD(1,null))}},{key:"receive",value:function(e){}},{key:"uploaded",value:function(e){}},{key:"notify",value:function(e){}},{key:"notifyRecorded",value:function(e){}},{key:"notifyVideoRecord",value:function(e){}}])&&r(t.prototype,n),i&&r(t,i),e}();o([s.observable],u.prototype,"state",void 0),o([s.action],u.prototype,"_setViewDiv",null),o([s.action],u.prototype,"start",null),t.TeacherContextBase=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(1),_=n(2),d=n(4),f=n(8),m=n(9),h=function(e){function t(e){var n,r,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,s=i(t).call(this,e),(n=!s||"object"!==a(s)&&"function"!=typeof s?o(r):s).m_on=!1,n.m_clipView=!1,n.m_imgDiv=null,n._refImg=function(e){e&&void 0!==n.props.video_url&&""!==n.props.video_url&&(n.m_imgDiv=e,n.m_clipView||d.delay(function(){n.m_imgDiv&&(n.m_clipView=!0)},1250))},n._onClick=function(){n.props.isTeacher&&n._off()},n._off=function(){return u(o(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.view||!this.m_on){e.next=6;break}return this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),e.next=5,f.wait(500);case 5:this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd();case 6:case"end":return e.stop()}},e,this)}))},n.m_on=e.view&&e.on,n}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"_on",value:function(){return u(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.m_on=!0;case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}},{key:"render",value:function(){var e=[];return e.push(this.props.className),this.props.view?this.m_on&&e.push("on"):e.push("hide"),l.createElement("div",{className:e.join(" "),onClick:this._onClick},this.props.children,l.createElement("img",{className:"movieclip",src:this.props.video_url,ref:this._refImg,style:this.m_clipView?void 0:m.HIDE}),l.createElement("div",{className:"direction"}))}}])&&r(n.prototype,c),p&&r(n,p),t}();c([p.observable],h.prototype,"m_on",void 0),c([p.observable],h.prototype,"m_clipView",void 0),c([p.action],h.prototype,"_off",void 0),h=c([_.observer],h),t.default=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=n(5),_=n(1),d=n(3),f=n(46),m=n(50),h=n(52),v=n(55),y=n(64),b=n(66),g=n(67),w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).apply(this,arguments)))._Title="COMPREHENSION",e._Tab="WARMUP",e._btn_disable="",e._onBook=function(){d.App.pub_stop(),e.props.state.viewStoryBook=!e.props.state.viewStoryBook},e._offStoryBook=function(){e.props.state.viewStoryBook=!1},e._onVideo=function(){d.App.pub_stop(),e.props.state.videoPopup=!e.props.state.videoPopup,e.props.actions.setNaviView(!1)},e._offVideo=function(){console.log("TComprehension _offVideo"),e.props.state.videoPopup=!1},e._clickCompre=function(t){"COMPREHENSION"!==e._Title&&(d.App.pub_playBtnTab(),e._btn_disable="",e._Title="COMPREHENSION",e._Tab="WARMUP",e.props.state.isNaviBack=!1)},e._clickVisual=function(t){"VISUALIZING"!==e._Title&&(d.App.pub_playBtnTab(),e._btn_disable="",e._Title="VISUALIZING",e._Tab="GRAPHICORANIZER",e.props.state.isNaviBack=!1)},e._clickSummar=function(t){"SUMMARIZING"!==e._Title&&(d.App.pub_playBtnTab(),e._btn_disable="",e._Title="SUMMARIZING",e._Tab="SUMMARY",e.props.state.isNaviBack=!1)},e._clickWarmup=function(t){"WARMUP"!==e._Tab&&(d.App.pub_playBtnTab(),e._btn_disable="",e._Tab="WARMUP",e.props.state.isNaviBack=!1)},e._clickPassage=function(t){"PASSAGE"!==e._Tab&&(d.App.pub_playBtnTab(),e._btn_disable="",e._Tab="PASSAGE",e.props.state.isNaviBack=!1)},e._clickQuestion=function(t){"QUESTION"!==e._Tab&&(d.App.pub_playBtnTab(),e._btn_disable="",e._Tab="QUESTION",e.props.state.isNaviBack=!1)},e._onSetNavi=function(t,n){e._btn_disable="",e._Title=t,e._Tab=n},e._onStuding=function(t){e._btn_disable=t},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._Title="COMPREHENSION",this._Tab="WARMUP",this._btn_disable=""):!this.props.view&&e.view}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.actions,r=e.state,i=n.getData();return u.createElement("div",{className:"t_compre "+this._Title},u.createElement("div",{className:"top"},u.createElement(p.ToggleBtn,{className:"btn_comprehension",on:"COMPREHENSION"===this._Title,disabled:""!==this._btn_disable,onClick:this._clickCompre}),u.createElement(p.ToggleBtn,{className:"btn_visualizing",on:"VISUALIZING"===this._Title,disabled:""!==this._btn_disable,onClick:this._clickVisual}),u.createElement(p.ToggleBtn,{className:"btn_summarizing",on:"SUMMARIZING"===this._Title,disabled:""!==this._btn_disable,onClick:this._clickSummar})),u.createElement(p.ToggleBtn,{disabled:"all"===this._btn_disable,className:"btn_book"+("COMPREHENSION"===this._Title?"":" up"),onClick:this._onBook}),u.createElement(p.ToggleBtn,{disabled:"all"===this._btn_disable,className:"btn_video"+("COMPREHENSION"===this._Title?"":" up"),onClick:this._onVideo}),u.createElement("div",{className:"btn_tab",style:{display:"COMPREHENSION"===this._Title?"":"none"}},u.createElement(p.ToggleBtn,{className:"btn_warmup",on:"WARMUP"===this._Tab&&"COMPREHENSION"===this._Title,disabled:""!==this._btn_disable,onClick:this._clickWarmup}),u.createElement(p.ToggleBtn,{className:"btn_passage",on:"PASSAGE"===this._Tab&&"COMPREHENSION"===this._Title,disabled:""!==this._btn_disable,onClick:this._clickPassage}),u.createElement(p.ToggleBtn,{className:"btn_question",on:"QUESTION"===this._Tab&&"COMPREHENSION"===this._Title,disabled:""!==this._btn_disable,onClick:this._clickQuestion})),u.createElement(f.default,{view:t,inview:"WARMUP"===this._Tab&&"COMPREHENSION"===this._Title,videoPopup:this.props.state.videoPopup,viewStoryBook:this.props.state.viewStoryBook,data:i,state:r,actions:n,onStudy:this._onStuding,onSetNavi:this._onSetNavi}),u.createElement(m.default,{view:t,videoPopup:this.props.state.videoPopup,viewStoryBook:this.props.state.viewStoryBook,studying:""!==this._btn_disable,inview:"PASSAGE"===this._Tab&&"COMPREHENSION"===this._Title,data:i,state:r,actions:n,onStudy:this._onStuding,onSetNavi:this._onSetNavi}),u.createElement(h.default,{view:t,videoPopup:this.props.state.videoPopup,viewStoryBook:this.props.state.viewStoryBook,studying:""!==this._btn_disable,inview:"QUESTION"===this._Tab&&"COMPREHENSION"===this._Title,data:i,state:r,actions:n,onStudy:this._onStuding,onSetNavi:this._onSetNavi}),u.createElement(v.default,{view:t,videoPopup:this.props.state.videoPopup,viewStoryBook:this.props.state.viewStoryBook,inview:"GRAPHICORANIZER"===this._Tab&&"VISUALIZING"===this._Title,data:i,state:r,actions:n,onStudy:this._onStuding,onSetNavi:this._onSetNavi}),u.createElement(y.default,{view:t,videoPopup:this.props.state.videoPopup,viewStoryBook:this.props.state.viewStoryBook,inview:"SUMMARY"===this._Tab&&"SUMMARIZING"===this._Title,data:i,state:r,actions:n,onStudy:this._onStuding,onSetNavi:this._onSetNavi}),u.createElement(b.default,{view:this.props.state.videoPopup,data:i,state:r,actions:n,onClosed:this._offVideo}),u.createElement(g.default,{view:this.props.state.viewStoryBook,data:i,state:r,actions:n,onClosed:this._offStoryBook}))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([_.observable],w.prototype,"_Title",void 0),c([_.observable],w.prototype,"_Tab",void 0),c([_.observable],w.prototype,"_btn_disable",void 0),w=c([l.observer],w),t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(2),h=n(4),v=n(3),y=n(5),b=n(14),g=n(18),w=n(17),E=n(1),k=n(11),S=n(8),C=n(7),x=n(9),O=n(20),T=n(15),P=n(49),N=n(10).default,A=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._on=!1,e._displayMode="1",e._bndW=0,e._bndH=0,e._bndW_p=0,e._bndH_p=0,e._refCanvas=function(t){!e._canvas&&t&&(e._canvas=t,e._ctx=e._canvas.getContext("2d"))},e._onResize=function(t,n){e._bndW=t,e._bndH=n,e._draw()},e._toggle=function(){e._displayMode="1"===e._displayMode?"2":"1"},e}return u(t,f.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;h.delay(function(){e._on=!0,e._draw()},500),this._displayMode=this.props.displayMode}},{key:"componentDidUpdate",value:function(){var e=this;this._on||h.delay(function(){e._on=!0,e._draw()},500)}},{key:"_draw",value:function(){this._bndW<=0||this._bndH<=0||this._bndW===this._bndW_p&&this._bndH===this._bndH_p||this._canvas&&this._ctx&&(this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._canvas.width=this._bndW,this._canvas.height=this._bndH,w.drawBalloon(this._ctx,15,5,this._bndW-20,this._bndH-10,5,35,10,this.props.color),this._bndW_p=this._bndW,this._bndH_p=this._bndH)}},{key:"render",value:function(){var e=this.props,t=e.color,n=e.thumb,r=e.avatar,i=(e.displayMode,e.msg);return f.createElement("div",{className:"msg-item "+t+(this._on?" on":"")},f.createElement("img",{src:"2"===this._displayMode?r:n,onClick:this._toggle}),f.createElement("div",{className:"text"},f.createElement("canvas",{ref:this._refCanvas}),f.createElement("div",{className:"s_text"},i),f.createElement(O.default,{handleWidth:!1,handleHeight:!0,onResize:this._onResize})))}}]),t}();_([E.observable],A.prototype,"_on",void 0),_([E.observable],A.prototype,"_displayMode",void 0),A=_([m.observer],A);var D=function(e){function t(e){var n;return r(this,t),(n=s(this,c(t).call(this,e)))._jsxs=[],n._zoom=!1,n._retCnt=0,n._numOfStudent=0,n._prog=0,n._speaker=!1,n._opt=!0,n._rcalNum=0,n._bAudioPlay=!1,n._swiper=null,n._clickZoom=function(){v.App.pub_playBtnTab(),n._zoom||n.resetSwiper(),n._zoom=!n._zoom,n.props.actions.setNavi(!n._zoom,!n._zoom)},n._onSound=function(){n.props.view&&(n._speaker||(n._bAudioPlay=!0,v.App.pub_play(v.App.data_url+n.props.data.audio,n._onSoundComplete)))},n._onSoundComplete=function(){n._bAudioPlay=!1,v.App.pub_stop()},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._onWarmup=function(e){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.view&&!(this._prog<1)){t.next=2;break}return t.abrupt("return");case 2:n=null,r=0;case 4:if(!(r<v.App.students.length)){t.next=11;break}if(v.App.students[r].id!==e.id){t.next=8;break}return n={thumb:v.App.students[r].thumb,avatar:v.App.students[r].avatar,displayMode:v.App.students[r].displayMode,id:e.id,color:e.color,msg:e.msg},t.abrupt("break",11);case 8:r++,t.next=4;break;case 11:if(n){t.next=13;break}return t.abrupt("return");case 13:if(0!==this.props.returns.length){t.next=17;break}for(;this._jsxs.length>0;)this._jsxs.pop();t.next=24;break;case 17:i=0;case 18:if(!(i<this.props.returns.length)){t.next=24;break}if(this.props.returns[i].id!==e.id){t.next=21;break}return t.abrupt("return");case 21:i++,t.next=18;break;case 24:return this._jsxs.push(f.createElement(A,Object.assign({},n))),this.props.returns.push(n),C.addStudentForStudentReportType6(e.id),this._retCnt=this.props.returns.length,t.next=30,S.wait(100);case 30:this._swiper&&(this._swiper.wrapperEl.scrollHeight<=this._swiper.height?this._opt=!0:this._opt=!1,this._swiper.update(),this._swiper.slideTo(this._retCnt-1));case 31:case"end":return t.stop()}},t,this)}))},n._onSend=function(){if(n.props.view&&!(n._prog>0)){v.App.pub_playToPad(),n._retCnt=0,n._numOfStudent=0,n._prog=1;var e={msgtype:"warmup_send",idx:n.props.idx};C.sendPAD(10,e),v.App.pub_reloadStudents(function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view&&1===this._prog){e.next=2;break}return e.abrupt("return");case 2:return this._numOfStudent=v.App.students.length,this.props.actions.setWarmupFnc(this._onWarmup),e.next=6,S.wait(500);case 6:if(this.props.view&&1===this._prog){e.next=8;break}return e.abrupt("return");case 8:this._prog=2;case 9:case"end":return e.stop()}},e,this)}))})}},n.resetSwiper=function(){n._swiper&&(n._swiper.update(),n._swiper.slideTo(0)),h.delay(function(){n._swiper&&(n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize())},300)},n._clickReturn=function(){v.App.pub_playBtnTab();for(var e=[],t=0;t<n.props.returns.length;t++)e.push(n.props.returns[t].id);C.startStudentReportProcess(6,e)},n._jsxs.push(f.createElement("div",{className:"swiper-no-swiping no-swiping-bg"})),n}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view||"content"===this.props.viewDiv&&"content"!==e.viewDiv?(this._zoom=!1,this._rcalNum++,this._swiper&&(this._swiper.update(),this._swiper.slideTo(0)),h.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},300),0===this.props.returns.length&&(this._prog=0,this._retCnt=0,this._numOfStudent=0)):!this.props.view&&e.view&&(this._zoom=!1,this._rcalNum--,this._swiper&&(this._swiper.update(),this._swiper.slideTo(0)),h.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},300),this._bAudioPlay&&(this._bAudioPlay=!1,v.App.pub_stop())),this.props.videoZoom&&!e.videoZoom&&this.resetSwiper()}},{key:"render",value:function(){var e,t,n=this.props,r=(n.idx,n.view),i=n.data,o=n.state,s=n.warmupType,a=n.returns;return 1===s?(e=f.createElement("div",{className:"img-box"+(this._zoom?" zoom":"")},f.createElement("div",null,f.createElement("div",null,f.createElement("div",null,f.createElement("img",{src:v.App.data_url+i.image,draggable:!1}),f.createElement(y.ToggleBtn,{className:"btn_zoom",onClick:this._clickZoom}))))),t="image"):t="video",f.createElement("div",{className:"warmup "+t,style:{display:r?"":"none"}},f.createElement("div",{className:"return_cnt_box white",onClick:this._clickReturn,style:{display:this._prog>=2?"":"none"}},f.createElement("div",null,this._retCnt,"/",this._numOfStudent)),f.createElement("div",{className:"speakerbox"},f.createElement("div",{className:"speaker"},f.createElement("div",null,f.createElement("img",{src:"/content/digenglish_lib/B/rw_comprehension/teacher/images/speaker_icon.png",draggable:!1,onClick:this._onSound}),f.createElement("div",{className:"audio"},f.createElement(b.default,{minSize:28,maxSize:33,maxLineNum:2,rcalcNum:this._rcalNum,view:r,onClick:this._onSound,textAlign:"left"},i.question))))),e,f.createElement("div",{className:"line"}),f.createElement("div",{className:"conversation"+(0===a.length?" swiper-no-swiping":"")},f.createElement(N,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0,noSwiping:this._opt,followFinger:!0,noSwipingClass:"swiper-no-swiping"},this._jsxs.map(function(e,t){return f.createElement("div",{key:t},e)}))),f.createElement(k.default,{view:r&&this._prog<2&&!o.videoPopup&&0===this.props.returns.length,type:"teacher",sended:!1,originY:0,onSend:this._onSend}))}}]),t}();_([E.observable],D.prototype,"_zoom",void 0),_([E.observable],D.prototype,"_retCnt",void 0),_([E.observable],D.prototype,"_numOfStudent",void 0),_([E.observable],D.prototype,"_prog",void 0),_([E.observable],D.prototype,"_speaker",void 0),_([E.observable],D.prototype,"_opt",void 0),_([E.observable],D.prototype,"_rcalNum",void 0),D=_([m.observer],D);var R=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments))).m_player=new T.MPlayer(new T.MConfig(!0)),e._curIdx_tgt=0,e._video_zoom=!1,e._onPage=function(t){e._curIdx_tgt!==t&&(v.App.pub_playBtnPage(),e._curIdx_tgt=t,e.props.actions.setWarmupFnc(null),C.sendPAD(0,null),e.props.onStudy(""))},e._onVideoZoomed=function(){e._video_zoom=!0},e}return u(t,f.Component),o(t,[{key:"_setNavi",value:function(){var e=this;this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(function(){0===e._curIdx_tgt?e.props.actions.gotoDirection():(v.App.pub_stop(),v.App.pub_playBtnPage(),e._curIdx_tgt=e._curIdx_tgt-1,e.props.actions.setWarmupFnc(null),C.sendPAD(0,null),e.props.onStudy(""))},function(){e._curIdx_tgt>=e.props.data.warmup.length-1?e.props.onSetNavi("COMPREHENSION","PASSAGE"):(v.App.pub_stop(),v.App.pub_playBtnPage(),e._curIdx_tgt=e._curIdx_tgt+1,e.props.actions.setWarmupFnc(null),C.sendPAD(0,null),e.props.onStudy(""))})}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?this._setNavi():!this.props.view&&e.view,this.props.inview&&!e.inview?(this._curIdx_tgt=0,C.sendPAD(0,null),this.props.onStudy(""),this._setNavi(),this.props.state.isNaviBack&&(this._curIdx_tgt=this.props.data.warmup.length-1,this.props.state.isNaviBack=!1)):!this.props.inview&&e.inview&&this.props.actions.setWarmupFnc(null),this._video_zoom&&(this._video_zoom=!1),this.props.videoPopup&&!e.videoPopup?(this.m_player.bPlay&&this.m_player.pause(),this._video_zoom=!1):!this.props.videoPopup&&e.videoPopup&&(this._video_zoom=!0),this.props.inview&&e.inview&&(!this.props.videoPopup&&e.videoPopup?this._setNavi():!this.props.viewStoryBook&&e.viewStoryBook&&this._setNavi())}},{key:"render",value:function(){var e,t,n=this,r=this._curIdx_tgt,i=this.props,o=i.view,s=i.inview,a=i.data,c=i.state,u=i.actions;2===a.warmup_type?(t=" video",e=f.createElement("div",{className:"video_container"},f.createElement(P.default,{view:o&&s,player:this.m_player,data:a,onZoomed:this._onVideoZoomed}))):t=" image";var l=c.warmup_returns;return f.createElement(f.Fragment,null,f.createElement("div",{className:"WARMUP"+t,style:s?void 0:x.NONE},f.createElement("div",{className:"nav"},a.warmup.length>1&&f.createElement("div",{className:"btn_page_box"},a.warmup.length>1&&a.warmup.map(function(e,t){return f.createElement(g.default,{key:t,on:t===r,idx:t,onClick:n._onPage})}))),a.warmup.map(function(e,t){return f.createElement(D,{key:t,idx:t,warmupType:a.warmup_type,viewDiv:c.viewDiv,view:s&&r===t,data:e,state:c,actions:u,returns:l[t],videoZoom:n._video_zoom})}),e))}}]),t}();_([E.observable],R.prototype,"_curIdx_tgt",void 0),_([E.observable],R.prototype,"_video_zoom",void 0),R=_([m.observer],R),t.default=R},function(e,t,n){"use strict";var r=n(48);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),d=n(4),f=n(2),m=n(1),h=n(19),v=n(5),y=n(3),b=n(22);function g(e,t){for(var n=.01*Math.round(t/.01),r=0,i=e.length;r<i;r++){var o=e[r];if(n>=o.dms_start&&n<=o.dms_end)return r;if(n<o.dms_start)break}return-1}function w(e,t){var n=Math.round(t/1e3),r=Math.round(e/1e3),i=Math.floor(r/60),o=Math.floor(i/60),s="";return i%=60,o>0||n>=3600?(s=o+":",s+=i>=10?i+":":"0"+i+":"):n>=600?s+=i>=10?i+":":"0"+i+":":s=i+":",s+=(r%=60)>=10?r:"0"+r}var E=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments))).m_dragging=!1,e.m_bgW=0,e.m_s=0,e.m_dragLeft=0,e.m_dragLeft_s=0,e._seek=d.throttle(function(t){if(!e.props.disable){var n=e.props.player;n.seek(n.duration*t/100)}},300,{leading:!1}),e._refBG=function(t){!e.m_bg&&t&&(e.m_bg=t)},e._start=function(t,n){if(e.m_bg&&!e.props.disable&&!(e.props.player.duration<=0||(e.m_bgW=e.m_bg.getBoundingClientRect().width,e.m_bgW<=0))){var r=100*n.x/e.m_bgW;r<0?r=0:r>100&&(r=100),e.m_dragLeft_s=r,e.m_dragLeft=r,e.m_s=n.x,e.m_dragging=!0}},e._drag=function(t,n){if(e.m_dragging&&!e.props.disable){var r=e.m_dragLeft_s+100*(n.x-e.m_s)/e.m_bgW;r<0?r=0:r>100&&(r=100),e.m_dragLeft=r,e.props.player.bPlay||e._seek(r)}},e._stop=function(t,n){if(e.m_dragging&&!e.props.disable){e.m_dragging=!1;var r=e.props.player;r.seek(r.duration*e.m_dragLeft/100)}},e}return c(t,_.Component),o(t,[{key:"render",value:function(){var e=this.props.player,t=0,n=e.duration;n>0&&(t=e.viewTime/n*100);var r=0,i=this.m_dragLeft;return r=this.m_dragging?i:t,_.createElement(_.Fragment,null,_.createElement("div",{className:"prog_box"},_.createElement(h.DraggableCore,{onDrag:this._drag,onStart:this._start,onStop:this._stop},_.createElement("div",{className:"prog_bg",ref:this._refBG},_.createElement("div",{className:"prog_bar",style:{width:t+"%"}}),_.createElement("div",{className:"prog_tmp"}),_.createElement(v.ToggleBtn,{className:"prog_btn",style:{left:r+"%"}})))),_.createElement("div",{className:"video_time",style:{width:(e.duration>=6e5?100:115)+"px"}},_.createElement("span",null,w(e.viewTime,e.duration))," / ",_.createElement("span",null,w(e.duration,e.duration))))}}]),t}();p([m.observable],E.prototype,"m_dragLeft",void 0),E=p([f.observer],E);var k=function(e){function t(){return r(this,t),s(this,a(t).apply(this,arguments))}return c(t,_.Component),o(t,[{key:"render",value:function(){var e=this.props.player;return _.createElement("div",{className:"control"},_.createElement("div",{className:"control_left"},_.createElement(v.ToggleBtn,{className:"btn_play_pause",on:this.props.isPlay,onClick:this.props.togglePlay}),_.createElement(v.ToggleBtn,{className:"btn_stop",onClick:this.props.stopClick}),_.createElement(v.ToggleBtn,{className:"btn_prev",onClick:this.props.prevClick}),_.createElement(v.ToggleBtn,{className:"btn_next",onClick:this.props.nextClick})),_.createElement("div",{className:"control_top"},_.createElement("div",null,_.createElement(E,{player:e,disable:this.props.disable}))),_.createElement("div",{className:"control_right"},_.createElement(v.ToggleBtn,{className:"btn_subscript",on:this.props.viewCaption,onClick:this.props.toggleCaption}),_.createElement(v.ToggleBtn,{className:"btn_audio",onClick:this.props.toggleMute,on:e.muted}),_.createElement(v.ToggleBtn,{className:"btn_fullscreen",onClick:this.props.toggleFullscreen}),_.createElement(v.ToggleBtn,{className:"btn_fullscreen_off",onClick:this.props.toggleFullscreen})))}}]),t}();k=p([f.observer],k);var S=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments)))._viewEng=!0,e._viewTrans=!0,e._toggleEng=function(){e._viewEng=!e._viewEng},e._toggleTrans=function(){e._viewTrans=!e._viewTrans},e}return c(t,_.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view&&(this._viewEng=!0,this._viewTrans=!0)}},{key:"render",value:function(){var e,t=this.props,n=t.view,r=t.script;return r?(e=this._viewEng?r.dms_eng:_.createElement(_.Fragment,null,""),this._viewTrans?r.dms_kor[y.App.lang]:_.createElement(_.Fragment,null,"")):(e=_.createElement(_.Fragment,null,""),_.createElement(_.Fragment,null,"")),_.createElement("div",{className:"caption_box",style:{display:n?"":"none"}},_.createElement("div",{className:"caption_eng"},_.createElement("span",null,e),_.createElement(v.ToggleBtn,{className:"btn_eng",on:this._viewEng,onClick:this._toggleEng})))}}]),t}();p([m.observable],S.prototype,"_viewEng",void 0),p([m.observable],S.prototype,"_viewTrans",void 0),S=p([f.observer],S),t.CaptionBox=S;var C=function(e){function t(e){var n;return r(this,t),(n=s(this,a(t).call(this,e))).m_viewCaption=!1,n.m_curIdx=-1,n._player_inittime=0,n._refBox=function(e){!n.m_box&&e&&(n.m_box=e)},n._refVideo=function(e){if(e){var t=n.props.player;if(!t.media){t.mediaInited(e);var r=n.props.data.warmup_scripts;t.addOnTime(function(e){var t=g(r,e/=1e3);n.m_curIdx!==t&&(n.m_curIdx=t)})}}},n._clickVideo=function(){var e=n.props.player;y.App.pub_playBtnTab(),e.bPlay?e.pause():((e.currentTime>=e.duration||e.currentTime<n._player_inittime)&&e.seek(1e3*n._player_inittime),e.play())},n._toggleFullscreen=function(){y.App.pub_playBtnTab(),document.fullscreenElement===n.m_box||document.webkitFullscreenElement===n.m_box?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),n.props.onZoomed&&n.props.onZoomed()):n.m_box.requestFullscreen?n.m_box.requestFullscreen():n.m_box.webkitRequestFullscreen&&n.m_box.webkitRequestFullscreen()},n._prevClick=function(){y.App.pub_playBtnTab(),n.m_curIdx=-1;var e=n.props.player,t=n.props.data.warmup_scripts,r=e.currentTime/1e3,i=g(t,r);if(i>=0)if(i>0){var o=t[i-1];n._player_inittime>o.dms_start?e.seek(1e3*n._player_inittime):e.seek(1e3*o.dms_start)}else e.seek(1e3*n._player_inittime);else for(var s=t.length-1;s>=0;s--){if(r>t[s].dms_start){n._player_inittime>t[s].dms_start?e.seek(1e3*n._player_inittime):e.seek(1e3*t[s].dms_start);break}0===s&&e.seek(1e3*n._player_inittime)}},n._nextClick=function(){y.App.pub_playBtnTab(),n.m_curIdx=-1;var e=n.props.player,t=n.props.data.warmup_scripts,r=e.currentTime/1e3,i=g(t,r);if(i>=0)if(i<t.length-1){var o=t[i+1];e.seek(1e3*o.dms_start)}else e.seek(e.duration);else for(var s=0,a=t.length;s<a;s++){if(r<t[s].dms_start){e.seek(1e3*t[s].dms_start);break}s===a-1&&e.seek(e.duration)}},n._toggleMute=function(){y.App.pub_playBtnTab();var e=n.props.player;e.setMuted(!e.muted)},n._togglePlay=function(){y.App.pub_playBtnTab();var e=n.props.player;e.bPlay?e.pause():((e.currentTime>=e.duration||e.currentTime<n._player_inittime)&&e.seek(1e3*n._player_inittime),e.play())},n._stopClick=function(){y.App.pub_playBtnTab(),n.props.player.gotoAndPause(1e3*n._player_inittime)},n._toggleCaption=function(){y.App.pub_playBtnTab(),n.m_viewCaption=!n.m_viewCaption},n._player_inittime=e.data.warmup_video_start,n}return c(t,_.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.player,r=t.view;r&&!e.view?(n.myState<1&&n.load(y.App.data_url+this.props.data.warmup_video),n.bPlay&&n.pause(),this.m_curIdx=-1,n.seek(1e3*this._player_inittime)):!r&&e.view&&(n.bPlay&&n.pause(),this.m_curIdx=-1,n.seek(1e3*this._player_inittime))}},{key:"render",value:function(){var e,t=this.props,n=t.player,r=t.data.warmup_scripts;this.m_viewCaption&&this.m_curIdx>=0&&(e=r[this.m_curIdx]);var i=5===n.myState||1===n.myState,o=(n.bPlay,n.bPlay);return _.createElement("div",{className:"video_box",ref:this._refBox},_.createElement("div",{className:"video"},_.createElement("video",{controls:!1,ref:this._refVideo,onClick:this._clickVideo}),_.createElement(b.Loading,{view:i}),_.createElement(S,{view:this.m_viewCaption,script:e})),_.createElement(k,{player:n,disable:!1,isPlay:o,toggleFullscreen:this._toggleFullscreen,togglePlay:this._togglePlay,stopClick:this._stopClick,prevClick:this._prevClick,nextClick:this._nextClick,viewCaption:this.m_viewCaption,toggleCaption:this._toggleCaption,toggleMute:this._toggleMute}))}}]),t}();p([m.observable],C.prototype,"m_viewCaption",void 0),p([m.observable],C.prototype,"m_curIdx",void 0),C=p([f.observer],C),t.default=C},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(4),h=n(2),v=n(3),y=n(7),b=n(5),g=n(18),w=n(8),E=n(1),k=n(12),S=n(11),C=n(9),x=n(15),O=n(23),T=n(51),P=n(10).default,N=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments))).m_view=!1,e._swiper=null,e._refSwiper=function(t){!e._swiper&&t&&(e._swiper=t.swiper)},e._onClose=function(){v.App.pub_playBtnTab(),e.m_view=!1},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view?(this.m_view=!0,this._swiper&&this._swiper.slideTo(0,0),m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize(),t._swiper.slideTo(0,0))},500)):!this.props.view&&e.view&&(this.m_view=!1)}},{key:"render",value:function(){var e=this.props,t=(e.view,e.scripts);return f.createElement(k.CoverPopup,{className:"trans_popup",view:this.props.view&&this.m_view,onClosed:this.props.onClosed},f.createElement("span",{className:"title"},"TRANSLATION"),f.createElement(b.ToggleBtn,{className:"btn_close",onClick:this._onClose}),f.createElement("div",{className:"trans_script"},f.createElement(P,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},t.map(function(e,t){return f.createElement("div",{key:t,className:"script_eng"},e.dms_eng,f.createElement("div",null,e.dms_kor.ko))}))))}}]),t}();_([E.observable],N.prototype,"m_view",void 0),_([E.observable],N.prototype,"_swiper",void 0),N=_([h.observer],N);var A=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments))).m_view=!1,e._onClose=function(){v.App.pub_playBtnTab(),e.m_view=!1},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?this.m_view=!0:!this.props.view&&e.view&&(this.m_view=!1)}},{key:"render",value:function(){var e;return e="READALOUD"===this.props.type?"READ ALONG":"SHADOWING"===this.props.type?"LISTEN & REPEAT":"QNA"===this.props.type?"Q & A":this.props.type,f.createElement(k.CoverPopup,{className:"passage_popup "+this.props.type,view:this.props.view&&this.m_view,onClosed:this.props.onClosed},f.createElement("span",null,e),f.createElement(b.ToggleBtn,{className:"btn_close",onClick:this._onClose}),f.createElement("div",{className:"popup_content"},f.createElement("span",null,"Read along together."),f.createElement("span",null,"Listen and repeat."),f.createElement("span",null,"Do you have any questions?")),f.createElement(S.default,{view:this.props.view,type:"teacher",sended:!1,originY:0,onSend:this.props.onSend}))}}]),t}();_([E.observable],A.prototype,"m_view",void 0),A=_([h.observer],A);var D=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments))).m_view=!1,e._onClose=function(){v.App.pub_playBtnTab(),e.m_view=!1},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?this.m_view=!0:!this.props.view&&e.view&&(this.m_view=!1)}},{key:"render",value:function(){var e=this.props.passage;return f.createElement(k.CoverPopup,{className:"img_passage",view:this.m_view,onClosed:this.props.onClosed},f.createElement("img",{src:v.App.data_url+e.image,draggable:!1}),f.createElement(b.ToggleBtn,{className:"btn_close",onClick:this._onClose}))}}]),t}();_([E.observable],D.prototype,"m_view",void 0),D=_([h.observer],D);var R=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._clickReturn=function(){e.props.viewReturn&&(v.App.pub_playBtnTab(),y.startStudentReportProcess(6,e.props.qnaRet.users))},e._onClick=function(t){if(t.target&&t.target instanceof HTMLElement){var n=t.target;if(n.classList&&n.classList.contains("ret-num"))return}e.props.onChoose(e.props.script)},e}return u(t,f.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.script,n=e.curSeq,r=e.qnaRet,i=e.retCnt,o=e.viewReturn,s=["script_line",t.seq===n?"on":""];return f.createElement("span",{id:"script_"+t.seq,className:s.join(" "),onClick:this._onClick},f.createElement("span",{onClick:this._clickReturn,className:"ret-num",style:{display:o&&r.num>0?"":"none"}},r.num),f.createElement("span",{className:"ret-cnt",style:{display:"none"}},i),f.createElement("span",{dangerouslySetInnerHTML:{__html:t.dms_passage}}))}}]),t}();R=_([h.observer],R);var B=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._player=new x.MPlayer(new x.MConfig(!1)),n._swiper=null,n._curIdx=0,n._curSeq=-1,n._zoom=!1,n._pass_pop="off",n._studyDiv="off",n._trans=!1,n._prog=0,n._studyProg=0,n._retCnt=0,n._numOfStudent=0,n._audioOn=!1,n._countdown=new O.TimerState(3),n._viewCountDown=!1,n._yourturn=-1,n._ytNext=-1,n._infos=[],n._retUsers=[],n._opt=!0,n._refAudio=function(e){e&&!n._player.media&&(n._player.mediaInited(e),n._player.load(v.App.data_url+n.props.data.audio),n._player.addOnTime(function(e){if("READALOUD"===n._studyDiv){var t=n._infos[n._curIdx].scripts;e/=1e3;for(var r=-1,i=t.length,o=0;o<i;o++){var s=t[o];if(e>=s.audio_start&&e<=s.audio_end){r=s.seq;break}}if(r>=0&&r!==n._curSeq){n._curSeq=r;var a={msgtype:"focusidx",idx:r};y.sendPAD(10,a),n._transAt(r)}}else if(("off"===n._studyDiv||"QNA"===n._studyDiv)&&n._audioOn){var c=n.props.data.scripts;e/=1e3;for(var u=-1,l=-1,p=c.length,_=0;_<p;_++){var d=c[_];if(e>=d.audio_start&&e<=d.audio_end){u=d.seq,l=d.passage_page;break}}if(u>=0&&u!==n._curSeq){l>=0&&l>n._curIdx+1&&(n._curIdx=l-1,n._swiper&&(n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize())),n._curSeq=u;var f={msgtype:"focusidx",idx:u};y.sendPAD(10,f),n._transAt(u)}}}),n._player.addOnPlayEnd(function(){if("READALOUD"===n._studyDiv){y.sendPAD(10,{msgtype:"dialogue_end"})}else if("SHADOWING"===n._studyDiv&&n._handleYourTurn(!0))return;n._audioOn=!1,n._curSeq=-1}),n._player.addOnPlayEndTemp(function(){if("READALOUD"===n._studyDiv){n._curSeq=-1;y.sendPAD(10,{msgtype:"dialogue_end"})}else if("SHADOWING"===n._studyDiv){if(n._curSeq<0)return;n._handleYourTurn(!1)}else n._audioOn&&(n._audioOn=!1),n._curSeq=-1}),n._player.addOnState(function(e,t){if("SHADOWING"===n._studyDiv||"READALOUD"===n._studyDiv){var r={msgtype:"SHADOWING"===n._studyDiv&&n._yourturn>=0?"playing":6!==e&&n._player.bPlay?"playing":"paused"};y.sendPAD(10,r)}}))},n._onPage=function(e){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.studying){t.next=2;break}return t.abrupt("return");case 2:if(!(e!==this._curIdx&&e>=0&&e<this._infos.length)){t.next=10;break}return v.App.pub_playBtnPage(),this._initAll(),this._curIdx=e,t.next=8,w.wait(300);case 8:this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize()),this._swiper&&(this._swiper.wrapperEl.scrollHeight<=this._swiper.height?this._opt=!0:this._opt=!1);case 10:case"end":return t.stop()}},t,this)}))},n._clickReturn=function(){v.App.pub_playBtnTab(),y.startStudentReportProcess(6,n._retUsers)},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._onSend=function(){if(n.props.view&&n.props.inview&&0===n._prog){for(n._prog=1,v.App.pub_playToPad(),n._retCnt=0;n._retUsers.length>0;)n._retUsers.pop();var e={msgtype:"passage_send",idx:n._curIdx};y.sendPAD(10,e),v.App.pub_reloadStudents(function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view&&this.props.inview){e.next=4;break}return e.abrupt("return");case 4:if(1===this._prog){e.next=6;break}return e.abrupt("return");case 6:return this._numOfStudent=v.App.students.length,e.next=9,w.wait(600);case 9:if(this.props.view&&this.props.inview){e.next=13;break}return e.abrupt("return");case 13:if(1===this._prog){e.next=15;break}return e.abrupt("return");case 15:this._prog=2;case 16:case"end":return e.stop()}},e,this)}))})}},n._clickTrans=function(){v.App.pub_playBtnTab(),n._trans=!n._trans;var e={msgtype:"view_trans",idx:n._trans?1:0};y.sendPAD(10,e)},n._offTrans=function(){n._trans=!1;var e={msgtype:"view_trans",idx:n._trans?1:0};y.sendPAD(10,e)},n._clickZoom=function(){v.App.pub_playBtnTab(),n._zoom=!n._zoom,n.props.actions.setNaviView(!1)},n._offZoom=function(){n._zoom=!1,n._setNavi()},n._onPopupClosed=function(){n._pass_pop="off","off"===n._studyDiv&&n.props.actions.setNaviView(!0)},n._onReadClick=function(){if(n.props.view&&n.props.inview&&2===n._prog)if("READALOUD"===n._studyDiv){v.App.pub_playBtnTab(),n._initStudy(),n._studyDiv="off";y.sendPAD(10,{msgtype:"dialogue_end"}),n.props.actions.setNaviView(!0)}else"off"===n._pass_pop&&(v.App.pub_playBtnTab(),n._initStudy(),n._pass_pop="READALOUD",n.props.actions.setNaviView(!1))},n._onShadowClick=function(){if(n.props.view&&n.props.inview&&2===n._prog)if("SHADOWING"===n._studyDiv){v.App.pub_playBtnTab(),n._initStudy(),n._studyDiv="off";y.sendPAD(10,{msgtype:"dialogue_end"}),n.props.actions.setNaviView(!0)}else"off"===n._pass_pop&&(v.App.pub_playBtnTab(),n._initStudy(),n._pass_pop="SHADOWING",n.props.actions.setNaviView(!1))},n._onQAClick=function(){if(n.props.view&&n.props.inview&&2===n._prog)if("QNA"===n._studyDiv){v.App.pub_playBtnTab(),n._initStudy(),n._studyDiv="off";y.sendPAD(10,{msgtype:"dialogue_end"}),n.props.actions.setNaviView(!0)}else"off"===n._pass_pop&&(v.App.pub_playBtnTab(),n._initStudy(),n._pass_pop="QNA",n.props.actions.setNaviView(!1))},n._onAudio=function(){if("READALOUD"!==n._studyDiv&&"SHADOWING"!==n._studyDiv)if(v.App.pub_playBtnTab(),n._audioOn=!n._audioOn,n._player.bPlay&&n._player.pause(),n._audioOn){n._curSeq=-1;var e=n._infos[n._curIdx].passage;n._player.gotoAndPlay(1e3*e.start,1e3*e.end,1),n._swiper&&(n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize())}else n._curSeq=-1,n._swiper&&(n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize())},n._onChoose=function(e){if("READALOUD"!==n._studyDiv&&"SHADOWING"!==n._studyDiv){n._audioOn&&(n._audioOn=!1);var t=n._curSeq;n._curSeq=e.seq,n._transAt(n._curSeq),v.App.pub_playBtnTab(),n._curSeq===t&&n._player.bPlay?(n._player.pause(),n._curSeq=-1):n._player.gotoAndPlay(1e3*e.audio_start,1e3*e.audio_end,1)}},n._studySend=function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view&&this.props.inview){e.next=4;break}return e.abrupt("return");case 4:if(2===this._prog){e.next=8;break}return e.abrupt("return");case 8:if("off"===this._studyDiv){e.next=12;break}return e.abrupt("return");case 12:if(0===this._studyProg){e.next=14;break}return e.abrupt("return");case 14:if(v.App.pub_playToPad(),"READALOUD"!==this._pass_pop){e.next=19;break}t="readaloud_send",e.next=30;break;case 19:if("SHADOWING"!==this._pass_pop){e.next=23;break}t="shadowing_send",e.next=30;break;case 23:if("QNA"!==this._pass_pop){e.next=29;break}for(t="qna_send",n=this._infos[this._curIdx].qnaRets,r=0;r<n.length;r++){for(i=n[r];i.users.length>0;)i.users.pop();i.num=0}e.next=30;break;case 29:return e.abrupt("return");case 30:for(this._retCnt=0;this._retUsers.length>0;)this._retUsers.pop();return this._studyProg=1,this._studyDiv=this._pass_pop,this.props.onStudy("QNA"===this._pass_pop?"ex_video":"all"),o={msgtype:t,idx:this._curIdx},y.sendPAD(10,o),e.next=39,w.wait(500);case 39:if(this.props.view&&this.props.inview){e.next=43;break}return e.abrupt("return");case 43:if(2===this._prog){e.next=47;break}return e.abrupt("return");case 47:if(1===this._studyProg){e.next=49;break}return e.abrupt("return");case 49:if(this._studyProg=2,this._pass_pop="off",this._numOfStudent=v.App.students.length,"READALOUD"!==this._studyDiv&&"SHADOWING"!==this._studyDiv){e.next=66;break}return this._viewCountDown=!0,this._countdown.reset(),e.next=57,w.wait(300);case 57:if(this.props.view&&this.props.inview){e.next=61;break}return e.abrupt("return");case 61:if(2===this._prog){e.next=63;break}return e.abrupt("return");case 63:"READALOUD"!==this._studyDiv&&"SHADOWING"!==this._studyDiv||this._countdown.start(),e.next=67;break;case 66:"QNA"===this._studyDiv&&this.props.actions.setQNAFnc(this._onQNA);case 67:case"end":return e.stop()}},e,this)}))},n._onQNA=function(e){if("QNA"===n._studyDiv){for(var t=-1,r=0;r<v.App.students.length;r++)if(v.App.students[r].id===e.id){t=r;break}if(!(t<0||n._retUsers.indexOf(e.id)>=0)){for(var i=n._infos[n._curIdx].qnaRets,o=0;o<e.returns.length;o++){var s=e.returns[o];if(s<i.length){var a=i[s].users;a.indexOf(e.id)<0&&a.push(e.id),i[s].num=a.length}}n._retUsers.push(e.id),y.addStudentForStudentReportType6(e.id),n._retCnt=n._retUsers.length}}},n._countStart=function(){},n._countZero=function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._viewCountDown=!1,this.props.view&&this.props.inview){e.next=5;break}return e.abrupt("return");case 5:if(2===this._prog){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,w.wait(300);case 9:if(this.props.view&&this.props.inview){e.next=13;break}return e.abrupt("return");case 13:if(2===this._prog){e.next=15;break}return e.abrupt("return");case 15:"READALOUD"===this._studyDiv?(this._curSeq=-1,t=this._infos[this._curIdx].passage,this._player.gotoAndPlay(1e3*t.start,1e3*t.end,1)):"SHADOWING"===this._studyDiv&&(n=this._infos[this._curIdx].scripts[0],this._curSeq=n.seq,this._curSeq>=0&&this._transAt(this._curSeq),r={msgtype:"focusidx",idx:n.seq},y.sendPAD(10,r),this._player.gotoAndPlay(1e3*n.audio_start,1e3*n.audio_end,1));case 16:case"end":return e.stop()}},e,this)}))};for(var i=e.data.passage,o=e.data.scripts,u=0;u<i.length;u++){for(var l=i[u],p={passage:l,scripts:[],qnaRets:[]},_=0;_<o.length;_++)o[_].passage_page===l.page&&(p.scripts.push(o[_]),p.qnaRets.push({num:0,users:[]}));n._infos.push(p)}return n}return u(t,f.Component),o(t,[{key:"_handleYourTurn",value:function(e){var t=this;if(this._curSeq<0)return!1;for(var n=this._infos[this._curIdx].scripts,r=-1,i=0;i<n.length;i++)if(n[i].seq===this._curSeq){r=i;break}if(r<0)return!1;var o=n[r],s=r<n.length-1?n[r+1]:null,a=1900*(o.audio_end-o.audio_start),c={msgtype:"view_yourturn",idx:o.seq};y.sendPAD(10,c),this._yourturn=m.delay(function(){t._yourturn=-1,"SHADOWING"===t._studyDiv&&m.delay(function(){if("SHADOWING"===t._studyDiv)if(s&&!e){t._curSeq=s.seq,t._curSeq>=0&&t._transAt(t._curSeq);var n={msgtype:"focusidx",idx:s.seq};y.sendPAD(10,n),t._player.gotoAndPlay(1e3*s.audio_start,1e3*s.audio_end,1)}else{t._curSeq=-1;y.sendPAD(10,{msgtype:"dialogue_end"})}},300)},a);return y.sendPAD(10,{msgtype:"playing"}),!0}},{key:"_transAt",value:function(e){if(this._swiper&&this._swiper.wrapperEl){var t=document.getElementById("script_box"),n=document.getElementById("script-bnd"),r=document.getElementById("script_"+e);if(t&&r&&n){var i=t.getBoundingClientRect(),o=n.getBoundingClientRect(),s=i.bottom-i.top-(o.bottom-o.top);if(!(s>=0)){var a=r.getBoundingClientRect();if(a.top<i.top+82){var c=this._swiper.translate+(i.top+82-a.top);c>0&&(c=0),this._swiper.wrapperEl.style.transitionDuration="300ms",this._swiper.setTranslate(c)}else if(a.bottom>i.bottom-82){var u=this._swiper.translate-(a.bottom-(i.bottom-82));u<s&&(u=s),this._swiper.wrapperEl.style.transitionDuration="300ms",this._swiper.setTranslate(u)}}}}}},{key:"_initAll",value:function(){this._pass_pop="off",this._prog=0,this._initStudy(),y.sendPAD(0,null)}},{key:"_initStudy",value:function(){for(this._zoom=!1,this._studyDiv="off",this._trans=!1,this._studyProg=0,this._retCnt=0;this._retUsers.length>0;)this._retUsers.pop();this._audioOn=!1,this._curSeq=-1,this._countdown.pause(),this._countdown.reset(),this._viewCountDown=!1,this._yourturn>=0&&(clearTimeout(this._yourturn),this._yourturn=-1),this._player.bPlay&&this._player.pause(),this._swiper&&this._swiper.slideTo(0),this.props.onStudy(""),this.props.actions.setQNAFnc(null)}},{key:"_setNavi",value:function(){var e=this;"off"!==this._studyDiv?this.props.actions.setNaviView(!1):this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(function(){return d(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._curIdx){e.next=5;break}this.props.state.isNaviBack=!0,this.props.onSetNavi("COMPREHENSION","WARMUP"),e.next=11;break;case 5:return v.App.pub_playBtnPage(),this._initAll(),this._curIdx=this._curIdx-1,e.next=10,w.wait(300);case 10:this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.wrapperEl.scrollHeight<=this._swiper.height?this._opt=!0:this._opt=!1);case 11:case"end":return e.stop()}},e,this)}))},function(){return d(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._curIdx>=this._infos.length-1)){e.next=4;break}this.props.onSetNavi("COMPREHENSION","QUESTION"),e.next=10;break;case 4:return v.App.pub_playBtnPage(),this._initAll(),this._curIdx=this._curIdx+1,e.next=9,w.wait(300);case 9:this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.wrapperEl.scrollHeight<=this._swiper.height?this._opt=!0:this._opt=!1);case 10:case"end":return e.stop()}},e,this)}))})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view?(this._initAll(),this._curIdx=0):!this.props.view&&e.view&&(this._player.bPlay&&this._player.pause(),this._audioOn&&(this._audioOn=!1)),this.props.videoPopup&&!e.videoPopup?(this.props.state.isVideoStudied&&(this.props.state.isVideoStudied=!1),this._player.pause(),this._audioOn=!1,this._curSeq=-1):!this.props.videoPopup&&e.videoPopup&&this.props.state.isVideoStudied&&(this._initAll(),this._curIdx=0,m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},300)),this.props.inview&&!e.inview?(this._initAll(),this._setNavi(),this.props.state.isNaviBack&&(this._curIdx=this._infos.length-1,this.props.state.isNaviBack=!1),m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize(),t._swiper&&(t._swiper.wrapperEl.scrollHeight<=t._swiper.height?t._opt=!0:t._opt=!1))},300)):!this.props.inview&&e.inview&&(this._player.bPlay&&this._player.pause(),this._audioOn&&(this._audioOn=!1)),this.props.inview&&e.inview&&(!this.props.videoPopup&&e.videoPopup?this._setNavi():!this.props.viewStoryBook&&e.viewStoryBook&&this._setNavi())}},{key:"render",value:function(){var e=this,t=this.props.inview,n=this._curIdx,r=this._infos[n],i=r.scripts,o=r.qnaRets;return f.createElement("div",{className:"PASSAGE",style:t?void 0:C.NONE},f.createElement("div",{className:"nav"},f.createElement("div",{className:"btn_page_box"},this._infos.map(function(t,r){return f.createElement(g.default,{key:r,on:r===n,idx:r,onClick:e._onPage})})),f.createElement("div",{className:"right"},f.createElement("div",{className:"return_cnt_box white",style:"QNA"===this._studyDiv&&this._studyProg>=2?void 0:C.NONE,onClick:this._clickReturn},f.createElement("div",null,this._retCnt,"/",this._numOfStudent)),f.createElement(b.ToggleBtn,{disabled:"READALOUD"===this._studyDiv||"SHADOWING"===this._studyDiv,className:"btn_img",onClick:this._clickZoom}),f.createElement(b.ToggleBtn,{disabled:"READALOUD"===this._studyDiv||"SHADOWING"===this._studyDiv,className:"btn_audio_drop",on:this._audioOn,onClick:this._onAudio}))),f.createElement("audio",{controls:!1,autoPlay:!1,ref:this._refAudio}),f.createElement("div",{id:"script_box",className:"script_box"},f.createElement(P,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0,noSwiping:this._opt,followFinger:!0,noSwipingClass:"swiper-no-swiping"},f.createElement("div",{id:"script-bnd",className:"script-bnd"},i.map(function(t,n){return f.createElement(R,{key:t.seq,curSeq:e._curSeq,script:t,retCnt:e._retCnt,qnaRet:o[n],viewReturn:"QNA"===e._studyDiv,onChoose:e._onChoose})}))),f.createElement(O.CountDown2,{state:this._countdown,view:this._viewCountDown,onStart:this._countStart,onComplete:this._countZero}),f.createElement(T.default,{className:"yourturn",view:this._yourturn>=0,start:this._yourturn>=0})),f.createElement("div",{className:"popup_btns"},f.createElement(b.ToggleBtn,{className:"btn_listen_repeat",disabled:this._prog<2||"READALOUD"===this._studyDiv||"QNA"===this._studyDiv,on:"SHADOWING"===this._pass_pop||"SHADOWING"===this._studyDiv,onClick:this._onShadowClick}),f.createElement(b.ToggleBtn,{className:"btn_readalong",disabled:this._prog<2||"SHADOWING"===this._studyDiv||"QNA"===this._studyDiv,on:"READALOUD"===this._pass_pop||"READALOUD"===this._studyDiv,onClick:this._onReadClick}),f.createElement(b.ToggleBtn,{className:"btn_qna",disabled:this._prog<2||"SHADOWING"===this._studyDiv||"READALOUD"===this._studyDiv,on:"QNA"===this._pass_pop||"QNA"===this._studyDiv,onClick:this._onQAClick})),f.createElement(S.default,{view:t&&this._prog<=1&&!this.props.state.videoPopup,type:"teacher",sended:!1,originY:0,onSend:this._onSend}),f.createElement(D,{view:!0===this._zoom,passage:r.passage,onClosed:this._offZoom}),f.createElement(A,{type:this._pass_pop,view:"off"!==this._pass_pop,onClosed:this._onPopupClosed,onSend:this._studySend}),f.createElement(N,{view:!0===this._trans,scripts:i,onClosed:this._offTrans}))}}]),t}();_([E.observable],B.prototype,"_curIdx",void 0),_([E.observable],B.prototype,"_curSeq",void 0),_([E.observable],B.prototype,"_zoom",void 0),_([E.observable],B.prototype,"_pass_pop",void 0),_([E.observable],B.prototype,"_studyDiv",void 0),_([E.observable],B.prototype,"_trans",void 0),_([E.observable],B.prototype,"_prog",void 0),_([E.observable],B.prototype,"_studyProg",void 0),_([E.observable],B.prototype,"_retCnt",void 0),_([E.observable],B.prototype,"_numOfStudent",void 0),_([E.observable],B.prototype,"_audioOn",void 0),_([E.observable],B.prototype,"_viewCountDown",void 0),_([E.observable],B.prototype,"_yourturn",void 0),_([E.observable],B.prototype,"_ytNext",void 0),_([E.observable],B.prototype,"_opt",void 0),B=_([h.observer],B),t.default=B},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e)))._svg=null,n._refSVG=function(e){!n._svg&&e&&(n._svg=e,n._svg.setCurrentTime(0),n.props.start&&n._svg.animationsPaused()?n._svg.unpauseAnimations():n.props.start||n._svg.animationsPaused()||n._svg.pauseAnimations())},n._className=e.className,n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentWillUpdate",value:function(e){if(this.props.view!==e.view||this.props.start!==e.start){var t=[];t.push(e.className),e.view||t.push("hide"),this._className=t.join(" ")}}},{key:"componentDidUpdate",value:function(e){this.props.start&&!e.start?this._svg&&(this._svg.setCurrentTime(0),this._svg.animationsPaused()&&this._svg.unpauseAnimations()):!this.props.start&&e.start&&this._svg&&(this._svg.animationsPaused()||this._svg.pauseAnimations())}},{key:"render",value:function(){return u.createElement("div",{className:this._className},u.createElement("svg",{ref:this._refSVG,imageRendering:"auto",baseProfile:"basic",version:"1.1",x:"0px",y:"0px",width:"460",height:"560",viewBox:"0 0 460 560",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},u.createElement("g",{overflow:"visible"},u.createElement("g",{mask:"url(#mask_ut)"},u.createElement("g",{transform:"translate(58 62)",opacity:"1"},u.createElement("animate",{attributeName:"opacity",dur:"2.533s",keyTimes:"0;.25;1",values:"0;1;1",fill:"freeze"}),u.createElement("image",{overflow:"visible",xlinkHref:"".concat("/content/digenglish_lib/","images/yourturn/girl.png"),height:"632",width:"357",transform:"translate(0 -33.5)"}))),u.createElement("mask",{id:"mask_ut"},u.createElement("g",null,u.createElement("g",null,u.createElement("g",null,u.createElement("g",null,u.createElement("path",{fill:"#FFF",stroke:"none",d:"M50.05 433.25L51 459.5 163.85 456.1 429.15 456.1 429.15 13 50.05 13 50.05 433.25Z",fillOpacity:"1"}))),u.createElement("animate",{attributeName:"display",fill:"freeze",repeatCount:"1",dur:"2.533s",keyTimes:"0;.75;1",values:"none;inline;inline"})),u.createElement("g",{display:"none"},u.createElement("g",null,u.createElement("g",null,u.createElement("path",{fill:"#FFF",stroke:"none",d:"M50 433.25L50.9 459.45 163.75 456.1 429.1 456.1 429.1 13 50 13 50 433.25Z",fillOpacity:"1"}))),u.createElement("animate",{attributeName:"display",fill:"freeze",repeatCount:"1",dur:"2.533s",keyTimes:"0;.75;1",values:"inline;none;none"})))),u.createElement("g",{transform:"translate(19.75 413.05)",opacity:"1"},u.createElement("animateTransform",{attributeName:"transform",additive:"replace",type:"translate",dur:"2.533s",keyTimes:"0;.51299;.579;.63199;.632;.697;.74999;.75;1",values:"225.1,483.05;225.1,483.05;225.009,483.051;225.009,483.051;225.1,483.05;225.009,483.051;225.009,483.051;225.1,483.05;225.1,483.05",fill:"freeze"}),u.createElement("animateTransform",{attributeName:"transform",additive:"sum",type:"scale",dur:"2.533s",keyTimes:"0;.51299;.579;.63199;.632;.697;.74999;.75;1",values:"1,1;1,1;1.1,1.1;1.1,1.1;1,1;1.1,1.1;1.1,1.1;1,1;1,1",fill:"freeze"}),u.createElement("animateTransform",{attributeName:"transform",additive:"sum",type:"translate",dur:"2.533s",keyTimes:"0;.51299;.579;.63199;.632;.697;.74999;.75;1",values:"-205.35,-70;-205.35,-70;-205.2,-70.05;-205.2,-70.05;-205.35,-70;-205.2,-70.05;-205.2,-70.05;-205.35,-70;-205.35,-70",fill:"freeze"}),u.createElement("animate",{attributeName:"opacity",dur:"2.533s",keyTimes:"0;.25;1",values:"0;1;1",fill:"freeze"}),u.createElement("image",{overflow:"visible",xlinkHref:"".concat("/content/digenglish_lib/","images/yourturn/ut.png"),height:"140",width:"410",transform:"translate(0 .05)"})))))}}])&&r(n.prototype,a),c&&r(n,c),t}();p=c([l.observer],p),t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(4),h=n(2),v=n(3),y=n(7),b=n(5),g=n(1),w=n(11),E=n(53),k=n(12),S=n(9),C=n(18),x=(n(24),n(8)),O=n(14),T=n(54),P=n(10).default;var N=function(e){function t(e){var n;return r(this,t),(n=s(this,c(t).call(this,e)))._clickReturn=function(e){v.App.pub_playBtnTab(),y.startStudentReportProcess(6,e)},n._onClick=function(e){n.props.viewAnswer||n.props.onClick(n.props.idx,e)},n._onQuestion=function(){v.App.pub_play(v.App.data_url+n.props.question.audio,function(e){})},n}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){!this.props.view&&e.view&&v.App.pub_stop()}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.idx,i=t.question,o=t.ret,s=t.viewAnswer,a=t.selected,c=-1;s&&((c=o.percent)<0?c=0:c>100&&(c=100));var u="btn_choice",l="btn_choice",p="btn_choice",_="btn_choice";return s&&(1===i.answer?u+=" correct":2===i.answer?l+=" correct":3===i.answer?p+=" correct":4===i.answer&&(_+=" correct")),f.createElement("div",{className:"choice-item",key:r,style:n?void 0:S.NONE},f.createElement("div",{className:"correct_rate_box",style:s?void 0:S.NONE},f.createElement(E.CorrectBar,{className:"correct_rate",preview:-1,result:c})),f.createElement("div",{className:"quizs_box"},f.createElement("div",null,f.createElement(O.default,{view:n,maxLineNum:2,maxSize:38,minSize:36,lineHeight:120,textAlign:"left",onClick:this._onQuestion},i.question))),f.createElement("div",{className:"choice_box"},f.createElement(T.default,{className:u,num:1,on:s?1===i.answer:1===a,disabled:!1,onClick:this._onClick},f.createElement(O.default,{view:n,maxLineNum:1,lineHeight:120,minSize:28,maxSize:32,textAlign:"left"},i.choice_1)),f.createElement("span",{style:s?void 0:S.HIDE,onClick:function(){return e._clickReturn(o.c1)}},o.c1.length)),f.createElement("div",{className:"choice_box"},f.createElement(T.default,{className:l,num:2,on:s?2===i.answer:2===a,disabled:!1,onClick:this._onClick},f.createElement(O.default,{view:n,maxLineNum:1,lineHeight:120,minSize:28,maxSize:32,textAlign:"left"},i.choice_2)),f.createElement("span",{style:s?void 0:S.HIDE,onClick:function(){return e._clickReturn(o.c2)}},o.c2.length)),f.createElement("div",{className:"choice_box"},f.createElement(T.default,{className:p,num:3,on:s?3===i.answer:3===a,disabled:!1,onClick:this._onClick},f.createElement(O.default,{view:n,maxLineNum:1,lineHeight:120,minSize:28,maxSize:32,textAlign:"left"},i.choice_3)),f.createElement("span",{style:s?void 0:S.HIDE,onClick:function(){return e._clickReturn(o.c3)}},o.c3.length)),f.createElement("div",{className:"choice_box",style:{display:""===i.choice_4?"none":void 0}},f.createElement(T.default,{className:_,num:4,on:s?4===i.answer:4===a,disabled:!1,onClick:this._onClick},f.createElement(O.default,{view:n,maxLineNum:1,lineHeight:120,minSize:28,maxSize:32,textAlign:"left"},i.choice_4)),f.createElement("span",{style:s?void 0:S.HIDE,onClick:function(){return e._clickReturn(o.c4)}},o.c4.length)))}}]),t}();N=_([h.observer],N);var A=function(e){function t(e){var n;return r(this,t),(n=s(this,c(t).call(this,e))).m_view=!1,n._swiper=null,n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._onClose=function(){n.m_view=!1},n}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view?(this.m_view=!0,this._swiper&&this._swiper.slideTo(0,0),m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize(),t._swiper.slideTo(0,0))},500)):!this.props.view&&e.view&&(this.m_view=!1)}},{key:"render",value:function(){var e=this.props,t=(e.view,e.questions.hint);return f.createElement(k.CoverPopup,{className:"clue_popup",view:this.props.view&&this.m_view,onClosed:this.props.onClosed},f.createElement("span",{className:"title"},"CLUE"),f.createElement(b.ToggleBtn,{className:"btn_close",onClick:this._onClose}),f.createElement("div",{className:"clue_script"},f.createElement(P,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},f.createElement("div",{className:"clue_question"},f.createElement("div",{className:"icon_question"}),this.props.idx+1,". ",this.props.questions.question),f.createElement("div",{className:"script"},f.createElement("div",{className:"icon_clue"}),f.createElement("span",{dangerouslySetInnerHTML:{__html:t}})))))}}]),t}();_([g.observable],A.prototype,"m_view",void 0),_([g.observable],A.prototype,"_swiper",void 0),A=_([h.observer],A);var D=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._curIdx=0,n._retCnt=0,n._numOfStudent=0,n._clue=!1,n._prog=0,n._viewAnswer=!1,n._selected=[],n._returns=[],n._retUsers=[],n._onPage=function(e){e!==n._curIdx&&(v.App.pub_playBtnPage(),n._curIdx=e)},n._clickClue=function(){n._prog<2||n._viewAnswer&&(v.App.pub_playBtnTab(),n._clue=!n._clue)},n._offClue=function(){return n._clue=!1},n._clickAnswer=function(){if(!(n._prog<2||n._viewAnswer)){v.App.pub_playBtnTab(),n.props.actions.setQuestionFnc(null);y.sendPAD(10,{msgtype:"question_end"}),n._prog=3,n._viewAnswer=!0,n.props.onStudy(""),n.props.actions.setNavi(!0,!0)}},n._clickReturn=function(){v.App.pub_playBtnTab(),y.startStudentReportProcess(6,n._retUsers)},n._onSend=function(){if(n.props.view&&n.props.inview&&!(n._prog>0)){n._prog=1,n._viewAnswer=!1;for(var e=0;e<n._returns.length;e++){for(var t=n._returns[e];t.c1.length>0;)t.c1.pop();for(;t.c2.length>0;)t.c2.pop();for(;t.c3.length>0;)t.c3.pop();for(;t.c4.length>0;)t.c4.pop();t.percent=-1}for(n._retCnt=0;n._retUsers.length>0;)n._retUsers.pop();v.App.pub_playToPad();y.sendPAD(10,{msgtype:"question_send"}),n.props.onStudy("ex_video"),v.App.pub_reloadStudents(function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view&&this.props.inview){e.next=4;break}return e.abrupt("return");case 4:if(1===this._prog){e.next=6;break}return e.abrupt("return");case 6:return this._numOfStudent=v.App.students.length,e.next=9,x.wait(500);case 9:if(this.props.view&&this.props.inview){e.next=13;break}return e.abrupt("return");case 13:if(1===this._prog){e.next=15;break}return e.abrupt("return");case 15:this._prog=2,this.props.actions.setQuestionFnc(this._onReturn),this.props.actions.setNavi(!1,!1);case 18:case"end":return e.stop()}},e,this)}))})}},n._onReturn=function(e){if(!(n._prog<2||n._viewAnswer)){for(var t=-1,r=0;r<v.App.students.length;r++)if(v.App.students[r].id===e.id){t=r;break}if(!(t<0||n._retUsers.indexOf(e.id)>=0)){n._retUsers.push(e.id),y.addStudentForStudentReportType6(e.id);for(var i=n.props.data.question,o=0;o<i.length;o++){var s=i[o],a=n._returns[o],c=e.returns[o].answer;a&&(1===c?a.c1.push(e.id):2===c?a.c2.push(e.id):3===c?a.c3.push(e.id):4===c&&a.c4.push(e.id),1===s.answer?a.percent=Math.round(100*a.c1.length/n._numOfStudent):2===s.answer?a.percent=Math.round(100*a.c2.length/n._numOfStudent):3===s.answer?a.percent=Math.round(100*a.c3.length/n._numOfStudent):4===s.answer&&(a.percent=Math.round(100*a.c4.length/n._numOfStudent)))}n._retCnt=n._retUsers.length}}},n._onMc=function(e,t){n._viewAnswer||(n._selected[e]=t)};for(var i=e.data.question,o=0;o<i.length;o++)n._returns[o]={c1:[],c2:[],c3:[],c4:[],percent:-1},n._selected[o]=0;return n}return u(t,f.Component),o(t,[{key:"_setNavi",value:function(){var e=this;this.props.actions.setNaviView(!0),1===this._prog||2===this._prog?this.props.actions.setNavi(!1,!1):this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(function(){0===e._curIdx?(e.props.state.isNaviBack=!0,e.props.onSetNavi("COMPREHENSION","PASSAGE")):(v.App.pub_playBtnPage(),e._curIdx=e._curIdx-1)},function(){e._curIdx>=e.props.data.question.length-1?e.props.onSetNavi("VISUALIZING","GRAPHICORANIZER"):(v.App.pub_playBtnPage(),e._curIdx=e._curIdx+1)})}},{key:"_init",value:function(){if(this._curIdx=0,this._clue=!1,!this._viewAnswer){for(this._prog=0,this._retCnt=0,this._numOfStudent=0;this._retUsers.length>0;)this._retUsers.pop();for(var e=0;e<this._returns.length;e++){for(var t=this._returns[e];t.c1.length>0;)t.c1.pop();for(;t.c2.length>0;)t.c2.pop();for(;t.c3.length>0;)t.c3.pop();for(;t.c4.length>0;)t.c4.pop();t.percent=-1}for(var n=0;n<this._selected.length;n++)this._selected[n]=0}y.sendPAD(0,null)}},{key:"componentDidUpdate",value:function(e){this.props.videoPopup&&!e.videoPopup?this.props.state.isVideoStudied&&(this.props.state.isVideoStudied=!1):!this.props.videoPopup&&e.videoPopup&&this.props.state.isVideoStudied&&this._init(),this.props.inview&&!e.inview?(this._init(),this._setNavi(),this.props.state.isNaviBack&&(this._curIdx=this.props.data.question.length-1,this.props.state.isNaviBack=!1)):!this.props.inview&&e.inview&&this.props.actions.setQuestionFnc(null),this.props.inview&&e.inview&&(!this.props.videoPopup&&e.videoPopup?this._setNavi():!this.props.viewStoryBook&&e.viewStoryBook&&this._setNavi())}},{key:"render",value:function(){var e=this,t=this._curIdx,n=this.props,r=(n.view,n.inview),i=n.data;return f.createElement("div",{className:"QUESTION",style:r?void 0:S.NONE},f.createElement("div",{className:"nav"},f.createElement("div",{className:"btn_page_box"},i.question.map(function(n,r){return f.createElement(C.default,{key:r,on:r===t,idx:r,onClick:e._onPage})})),f.createElement("div",{className:"right"},f.createElement("div",{className:"return_cnt_box white",onClick:this._clickReturn,style:this._prog>=2?void 0:S.NONE},f.createElement("div",null,this._retCnt,"/",this._numOfStudent)),f.createElement(b.ToggleBtn,{className:"btn_answer",on:this._viewAnswer,view:this._prog>=2,onClick:this._clickAnswer}),f.createElement(b.ToggleBtn,{className:"btn_clue",on:this._clue,view:this._prog>=2&&this._viewAnswer,onClick:this._clickClue}))),i.question.map(function(n,i){return f.createElement(N,{key:i,idx:i,view:r&&i===t,question:n,viewAnswer:e._viewAnswer,ret:e._returns[i],selected:e._selected[i],onClick:e._onMc})}),f.createElement(w.default,{view:r&&this._prog<2&&!this.props.state.videoPopup,type:"teacher",sended:!1,originY:0,onSend:this._onSend}),i.question.map(function(n,r){return f.createElement(A,{key:r,view:e._clue&&r===t,questions:n,idx:t,onClosed:e._offClue})}))}}]),t}();_([g.observable],D.prototype,"_curIdx",void 0),_([g.observable],D.prototype,"_retCnt",void 0),_([g.observable],D.prototype,"_numOfStudent",void 0),_([g.observable],D.prototype,"_clue",void 0),_([g.observable],D.prototype,"_prog",void 0),_([g.observable],D.prototype,"_viewAnswer",void 0),_([g.observable],D.prototype,"_selected",void 0),D=_([h.observer],D),t.default=D},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(0),_=function(e){function t(){return i(this,t),a(this,c(t).apply(this,arguments))}return u(t,p.Component),s(t,[{key:"render",value:function(){var e=this.props.percent;return p.createElement("div",{className:"stand_bar",style:{display:e<0?"none":""}},p.createElement("div",{className:"prog_bnd"},p.createElement("div",{className:"prog_bar",style:{width:e<0?"0%":e+"%"}})),p.createElement("div",{className:"data_percent"},e<0?"":e+"%"))}}]),t}();t.StandBar=_;var d=function(e){function t(){return i(this,t),a(this,c(t).apply(this,arguments))}return u(t,p.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.preview,r=e.result;return p.createElement("div",{className:t},p.createElement("span",{className:"title",style:{display:n<0?"none":""}},"Pre-class"),p.createElement("div",{className:"progress_bar",style:{display:n<0?"none":""}},p.createElement("span",{className:"colorA",style:{width:n+"%"}}),p.createElement("span",{className:"data_percent"},n,"%")),p.createElement("span",{className:"title",style:{display:r<0?"none":""}},"In-class"),p.createElement("div",{className:"progress_bar",style:{display:r<0?"none":""}},p.createElement("span",{className:"colorB",style:{width:r+"%"}}),p.createElement("span",{className:"data_percent"},r,"%")))}}]),t}();t.CorrectBar=d;var f=function(e){function t(){return i(this,t),a(this,c(t).apply(this,arguments))}return u(t,p.Component),s(t,[{key:"render",value:function(){return p.createElement(p.Fragment,null,p.createElement("div",{className:"progress_box"},p.createElement("span",{className:"title on"},"SOUND"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data on",style:{width:"30%"}}),p.createElement("span",{className:"data_percent on"},"30%")),p.createElement("span",{className:"title"},"MEANING"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data",style:{width:"60%"}}),p.createElement("span",{className:"data_percent"},"60%")),p.createElement("span",{className:"title"},"SPELLING"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data",style:{width:"50%"}}),p.createElement("span",{className:"data_percent"},"50%")),p.createElement("span",{className:"title"},"SENTENCE"),p.createElement("div",{className:"progress_bar"},p.createElement("span",{className:"data",style:{width:"90%"}}),p.createElement("span",{className:"data_percent"},"90%"))))}}]),t}();t.Progress=f},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(5),l=n(3),p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,s(t).apply(this,arguments)))._onClick=function(){e.props.disabled||(l.App.pub_playBtnTab(),e.props.onClick(e.props.num))},e}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c.Component),n=t,(r=[{key:"render",value:function(){return c.createElement(u.ToggleBtn,{className:this.props.className+" btn-mc-"+this.props.num,on:this.props.on,onClick:this._onClick,disabled:this.props.disabled},this.props.children)}}])&&i(n.prototype,r),p&&i(n,p),t}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?c(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(4),h=n(1),v=n(2),y=n(3),b=n(7),g=n(5),w=n(8),E=n(17),k=n(12),S=n(11),C=n(9),x=n(56),O=n(59),T=n(63),P=n(10).default,N={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!0,noSwipingClass:"swiper-no-swiping",followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},A=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments))).m_view=!1,e._sheetpage="",e._prog=0,e._onKeyboard=function(){e.props.view&&0===e._prog&&"keyboard"!==e._sheetpage&&(y.App.pub_playBtnTab(),e._sheetpage="keyboard")},e._onPentool=function(){e.props.view&&0===e._prog&&"pentool"!==e._sheetpage&&(y.App.pub_playBtnTab(),e._sheetpage="pentool")},e._onSend=function(){return d(c(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view){e.next=4;break}return e.abrupt("return");case 4:if(0===this._prog){e.next=8;break}return e.abrupt("return");case 8:if(""!==this._sheetpage){e.next=10;break}return e.abrupt("return");case 10:return y.App.pub_playToPad(),this._prog=1,e.next=14,w.wait(500);case 14:if(this.props.view){e.next=18;break}return e.abrupt("return");case 18:if(1===this._prog){e.next=20;break}return e.abrupt("return");case 20:this._prog=2,this.props.onSend(this._sheetpage);case 22:case"end":return e.stop()}},e,this)}))},e._onClose=function(){y.App.pub_playBtnTab(),e.m_view=!1},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this.m_view=!0,this._sheetpage="",this._prog=0):!this.props.view&&e.view&&(this.m_view=!1,this._prog=0)}},{key:"render",value:function(){return f.createElement(k.CoverPopup,{className:"sheet_popup",view:this.m_view,onClosed:this.props.onClosed},f.createElement("span",{className:"title"},"NEW SHEET"),f.createElement(g.ToggleBtn,{className:"btn_close",onClick:this._onClose}),f.createElement("div",null,f.createElement("span",{className:"content"},"Make your own graphic organizer."),f.createElement("div",{className:"sheet_btns"},f.createElement(g.ToggleBtn,{className:"btn_pentool",on:"pentool"===this._sheetpage,onClick:this._onPentool}),f.createElement(g.ToggleBtn,{className:"btn_keyboard",on:"keyboard"===this._sheetpage,onClick:this._onKeyboard}))),f.createElement(S.default,{view:this.props.view&&""!==this._sheetpage&&this._prog<2,type:"teacher",sended:!1,originY:0,preventUpWhenView:!0,onSend:this._onSend}))}}]),t}();_([h.observable],A.prototype,"m_view",void 0),_([h.observable],A.prototype,"_sheetpage",void 0),_([h.observable],A.prototype,"_prog",void 0),A=_([v.observer],A);var D=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments))).m_view=!1,e._onClose=function(){y.App.pub_playBtnTab(),e.m_view=!1},e._refSwiper=function(t){!e.m_swiper&&t&&(e.m_swiper=t.swiper)},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this;""!==this.props.className&&""===e.className?(this.m_view=!0,this.m_swiper&&(this.m_swiper.slideTo(0,0),m.delay(function(){if(t.m_swiper){t.m_swiper.update(),t.m_swiper.scrollbar&&t.m_swiper.scrollbar.updateSize();var e=t.m_swiper.wrapperEl;e.children[0].clientHeight>e.clientHeight?(e.classList.remove("swiper-no-swiping"),t.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.remove("swiper-no-swiping")):(e.classList.add("swiper-no-swiping"),t.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.add("swiper-no-swiping"))}},100))):""===this.props.className&&""!==e.className&&(this.m_view=!1)}},{key:"render",value:function(){var e=this.props,t=(e.className,e.prog),n=e.graphic,r=e.renderCnt;return f.createElement(k.CoverPopup,{className:"table_popup",view:this.m_view,onClosed:this.props.onClosed},f.createElement(P,Object.assign({},N,{ref:this._refSwiper}),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===t,disableSelect:3===t,inview:""!==this.props.className,graphic:n,className:this.props.className+" zoom-in",headerColor:this.props.headerColor,maxWidth:1030,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:r,onClickBtn:this._onClose,onChange:this.props.onChange}))))}}]),t}();_([h.observable],D.prototype,"m_view",void 0),D=_([v.observer],D);var R=function(e){function t(e){var n;return r(this,t),(n=s(this,a(t).call(this,e)))._retCnt=0,n._numOfStudent=0,n._numOfStudent_sheet=0,n._returns=[],n._sheet=!1,n._sheetpage="",n._table="",n._table_head_color=null,n._prog=0,n._renderCnt=0,n._refSwiper=function(e){if(!n.m_swiper&&e){n.m_swiper=e.swiper;var t=n.m_swiper.wrapperEl;t.children[0].clientHeight>=t.clientHeight?(t.classList.remove("swiper-no-swiping"),n.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.remove("swiper-no-swiping")):(t.classList.add("swiper-no-swiping"),n.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.add("swiper-no-swiping"))}},n._clickReturn=function(){y.App.pub_playBtnTab(),b.startStudentReportProcess(6,n._returns)},n._onReturn=function(e){n.props.inview&&(2===n._prog&&(n._returns.indexOf(e.id)>=0||m.find(y.App.students,{id:e.id})&&(n._returns.push(e.id),b.addStudentForStudentReportType6(e.id),n._retCnt=n._returns.length)))},n._onSend=function(){if(n.props.inview&&0===n._prog){for(n._prog=1,n._sheetpage="";n._returns.length>0;)n._returns.pop();y.App.pub_playToPad();b.sendPAD(10,{msgtype:"graphic_send"}),n.props.actions.setGraphFnc(n._onReturn),n.props.onStudy("ex_video"),y.App.pub_reloadStudents(function(){return d(c(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.inview){e.next=4;break}return e.abrupt("return");case 4:if(1===this._prog){e.next=6;break}return e.abrupt("return");case 6:return this._retCnt=0,this._numOfStudent=y.App.students.length,e.next=10,w.wait(600);case 10:if(this.props.inview){e.next=14;break}return e.abrupt("return");case 14:if(1===this._prog){e.next=16;break}return e.abrupt("return");case 16:this._prog=2,this.props.actions.setNavi(!1,!1);case 18:case"end":return e.stop()}},e,this)}))})}},n._done="",n._onAnswer=function(){if(n.props.inview&&2===n._prog){y.App.pub_playBtnTab(),n._prog=3,n.props.actions.setGraphFnc(null),n.props.onStudy("");b.sendPAD(10,{msgtype:"graphic_end"}),n._done=" done",n.props.actions.setNavi(!0,!0)}},n._onSendSheet=function(e){if(n.props.inview&&""===n._sheetpage){n.props.onStudy("");var t={msgtype:"keyboard"===e?"keyboard_send":"pentool_send"};b.startStudentReportProcess("keyboard"===e?2:3,null,"C"),b.sendPAD(10,t),n._sheetpage=e,n._sheet=!1,y.App.pub_reloadStudents(function(){n._numOfStudent_sheet=y.App.students.length})}},n._clickSheet=function(){y.App.pub_playBtnTab(),n._sheet=!n._sheet,n._sheet&&n.props.actions.setNavi(!1,!1)},n._offSheet=function(){n._sheet=!1,n.props.actions.setNavi(!0,!0)},n._closeKeyboard=function(){if(y.App.pub_playBtnTab(),n._sheetpage="",n.props.actions.setGraphFnc(null),3===n._prog){b.sendPAD(10,{msgtype:"keyboard_end"})}else b.sendPAD(0,null)},n._closePentool=function(){if(y.App.pub_playBtnTab(),n._sheetpage="",n.props.actions.setGraphFnc(null),3===n._prog){b.sendPAD(10,{msgtype:"pentool_end"})}else b.sendPAD(0,null)},n._clickZoom=function(e,t,r){n._table_head_color=r,n._table_graphic=e,n._table=t,n.props.actions.setNaviView(!1),n._renderCnt++},n._tableClosed=function(){n._table="",n.props.actions.setNaviView(!0),n._renderCnt++},n._popupChange=function(e,t){n._renderCnt++},n._table_graphic=e.data.graphic[0],n}return u(t,f.Component),o(t,[{key:"_setNavi",value:function(){var e=this;this.props.actions.setNaviView(!0),1===this._prog||2===this._prog?this.props.actions.setNavi(!1,!1):this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(function(){e.props.state.isNaviBack=!0,e.props.onSetNavi("COMPREHENSION","QUESTION")},function(){e.props.onSetNavi("SUMMARIZING","SUMMARY")})}},{key:"_init",value:function(){var e=this;this.m_swiper&&(this.m_swiper.slideTo(0,0),m.delay(function(){if(e.m_swiper){e.m_swiper.update(),e.m_swiper.scrollbar&&e.m_swiper.scrollbar.updateSize();var t=e.m_swiper.wrapperEl;t.children[0].clientHeight>t.clientHeight?(t.classList.remove("swiper-no-swiping"),e.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.remove("swiper-no-swiping")):(t.classList.add("swiper-no-swiping"),e.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.add("swiper-no-swiping"))}},100)),3!==this._prog&&(this._prog=0,this._retCnt=0,this._numOfStudent=0,this._table="",this._table_head_color=null,this._done="",this.props.data.graphic.forEach(function(e){e.app_drops.forEach(function(e){e.inputed=""})})),this._sheet=!1,this._sheetpage="",this.props.actions.setGraphFnc(null),b.sendPAD(0,null)}},{key:"componentDidUpdate",value:function(e){this.props.videoPopup&&!e.videoPopup?this.props.state.isVideoStudied&&(this.props.state.isVideoStudied=!1):!this.props.videoPopup&&e.videoPopup&&this.props.state.isVideoStudied&&this._prog<3&&this._init(),this.props.inview&&!e.inview?(this._init(),this._setNavi()):!this.props.inview&&e.inview&&this.props.actions.setGraphFnc(null),this.props.inview&&e.inview&&(!this.props.videoPopup&&e.videoPopup?this._setNavi():!this.props.viewStoryBook&&e.viewStoryBook&&this._setNavi())}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=(r.view,r.inview),o=r.data,s=r.actions,a=o.graphic;1===o.visualizing_type?(e="type_1",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],maxWidth:1080,className:"type_1",headerColor:E.TYPE_COM_HEADERS[0],optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"purple",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1})),f.createElement("span",{className:"link_line"}),f.createElement("div",{className:"middle"},f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],maxWidth:530,className:"type_1",headerColor:E.TYPE_COM_HEADERS[1],optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"green",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2})),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[2],maxWidth:530,className:"type_1",headerColor:E.TYPE_COM_HEADERS[1],optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[2],"green",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:3}))),f.createElement("span",{className:"link_line_down"}),f.createElement("div",{className:"bottom"},f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[3],className:"type_1",headerColor:E.TYPE_COM_HEADERS[2],maxWidth:1080,optionBoxPosition:"top",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[3],"purple",E.TYPE_COM_HEADERS[2])},isStudent:!1,idx:4})))):2===o.visualizing_type?(e="type_2",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement("div",{className:"top_left"},f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],className:"type_2",headerColor:E.TYPE_COM_HEADERS[0],maxWidth:500,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"type_2",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1})),f.createElement("div",{className:"icon_arrow"}),f.createElement("div",{className:"top_right"},f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],className:"type_2",headerColor:E.TYPE_COM_HEADERS[1],maxWidth:500,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"type_2",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2}))),f.createElement("span",{className:"link_line"}),f.createElement("div",{className:"middle"},f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[2],className:"type_2",headerColor:E.TYPE_COM_HEADERS[2],maxWidth:700,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[2],"type_2",E.TYPE_COM_HEADERS[2])},isStudent:!1,idx:3}))))):3===o.visualizing_type?(e="type_3",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],className:"type_3",headerColor:E.TYPE_COM_HEADERS[0],maxWidth:361,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"type_3",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1})),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],className:"type_3",headerColor:E.TYPE_COM_HEADERS[1],maxWidth:361,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"type_3",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2})),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[2],className:"type_3",headerColor:E.TYPE_COM_HEADERS[2],maxWidth:361,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[2],"type_3",E.TYPE_COM_HEADERS[2])},isStudent:!1,idx:3}))))):4===o.visualizing_type?(e="type_4",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],className:"type_4",headerColor:E.TYPE_COM_HEADERS[0],maxWidth:1109,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"type_4",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1}),f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],className:"type_4",headerColor:E.TYPE_COM_HEADERS[1],maxWidth:1109,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"type_4",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2})))):5===o.visualizing_type?(e="type_5",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],className:"type_5",headerColor:E.TYPE_COM_HEADERS[0],maxWidth:1109,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"type_5",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1}),f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],className:"type_5",headerColor:E.TYPE_COM_HEADERS[1],maxWidth:1109,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"type_5",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2}),f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[2],className:"type_5",headerColor:E.TYPE_COM_HEADERS[2],maxWidth:1109,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[2],"type_5",E.TYPE_COM_HEADERS[2])},isStudent:!1,idx:3})))):6===o.visualizing_type?(e="type_6",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],className:"type_6",maxWidth:300,optionBoxPosition:"bottom",viewBtn:!1,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"type_6",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1})),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],className:"type_6",maxWidth:300,optionBoxPosition:"bottom",viewBtn:!1,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"type_6",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2})),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[2],className:"type_6",maxWidth:300,optionBoxPosition:"bottom",viewBtn:!1,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[2],"type_6",E.TYPE_COM_HEADERS[2])},isStudent:!1,idx:3}))))):7===o.visualizing_type&&(e="type_7",t=f.createElement(f.Fragment,null,f.createElement("div",{className:"top"},f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[0],className:"type_7",headerColor:E.TYPE_COM_HEADERS[0],maxWidth:470,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[0],"type_7",E.TYPE_COM_HEADERS[0])},isStudent:!1,idx:1})),f.createElement("div",null,f.createElement(T.default,{viewCorrect:3===this._prog,disableSelect:3===this._prog,inview:i,graphic:a[1],className:"type_7",headerColor:E.TYPE_COM_HEADERS[1],maxWidth:470,optionBoxPosition:"bottom",viewBtn:!0,renderCnt:this._renderCnt,onClickBtn:function(){return n._clickZoom(a[1],"type_7",E.TYPE_COM_HEADERS[1])},isStudent:!1,idx:2})))));var c="keyboard"===this._sheetpage||"pentool"===this._sheetpage;this._cont="type_3"===e||"type_6"===e||"type_7"===e?f.createElement("div",{className:"table_box "+e,hidden:c},t):f.createElement(P,Object.assign({id:"table-container"},N,{ref:this._refSwiper}),f.createElement("div",{className:"table_box "+e,hidden:c},t));var u=o.app_graphic_title,l=f.createElement("div",{className:"title"},u);return u.trim()||(l=f.createElement(f.Fragment,null)),f.createElement("div",{className:"GRAPHICORANIZER "+this._sheetpage+this._done,style:i?void 0:C.NONE},f.createElement("div",{className:"nav"},l,f.createElement(g.ToggleBtn,{className:"btn_sheet",on:this._sheet,disabled:2===this._prog,onClick:this._clickSheet}),f.createElement("div",{className:"right",style:{display:this._prog>=2?"":"none"}},f.createElement("div",{className:"return_cnt_box white",onClick:this._clickReturn},f.createElement("div",null,this._retCnt,"/",this._numOfStudent)),f.createElement(g.ToggleBtn,{className:"btn_answer",on:this._prog>=3,onClick:this._onAnswer}))),this._cont,f.createElement(D,{className:this._table,headerColor:this._table_head_color,prog:this._prog,graphic:this._table_graphic,renderCnt:this._renderCnt,onClosed:this._tableClosed,onChange:this._popupChange}),f.createElement(A,{view:this._sheet,onClosed:this._offSheet,onSend:this._onSendSheet}),f.createElement("div",{className:"pentool"},f.createElement(x.PentoolSheet,{view:"pentool"===this._sheetpage,numOfStudent:this._numOfStudent_sheet,actions:s,onBack:this._closePentool})),f.createElement("div",{className:"keyboard"},f.createElement(O.KeyboardSheet,{view:"keyboard"===this._sheetpage,numOfStudent:this._numOfStudent_sheet,actions:s,onBack:this._closeKeyboard})),f.createElement(S.default,{view:i&&this._prog<=1&&!this.props.state.videoPopup&&""===this._table&&!this._sheet&&""===this._sheetpage,type:"teacher",sended:!1,originY:0,onSend:this._onSend}))}}]),t}();_([h.observable],R.prototype,"_retCnt",void 0),_([h.observable],R.prototype,"_numOfStudent",void 0),_([h.observable],R.prototype,"_numOfStudent_sheet",void 0),_([h.observable],R.prototype,"_sheet",void 0),_([h.observable],R.prototype,"_sheetpage",void 0),_([h.observable],R.prototype,"_table",void 0),_([h.observable],R.prototype,"_prog",void 0),_([h.observable],R.prototype,"_renderCnt",void 0),R=_([v.observer],R),t.default=R},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=n(4),_=n(3),d=n(7),f=n(5),m=n(1),h=n(57),v=n(58),y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).apply(this,arguments)))._penui=new v.PenUIStore,e._retCnt=0,e._refCanvas=function(t){if(!e._kpen&&t){e._kpen=new h.KPen(t,function(t,n){return!!e.props.view&&(n.erase=e._penui.erase,n.color=e._penui.color,n.thick=e._penui.erase?e._penui.thick_erase:e._penui.thick,!0)},function(e,t){},function(t,n){return!!e._kpen&&(e._penui.setUndoLen(e._kpen.undoLen),!0)})}},e._onReturn=function(t){if(e.props.view&&("pentool"===t.type&&p.find(_.App.students,{id:t.id}))){var n=e._retCnt+1;n>=e.props.numOfStudent&&(n=e.props.numOfStudent),e._retCnt=n}},e._clickReturn=function(){e.props.view&&(_.App.pub_playBtnTab(),d.showStudentReportListPage())},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"clear",value:function(){this._kpen&&(this._kpen.clear(),this._penui.setUndoLen(0),this._penui.setErase(!1))}},{key:"reset",value:function(){this._kpen&&(this._kpen.reset(),this._penui.setUndoLen(0))}},{key:"undo",value:function(){if(this._kpen){this._kpen.undo();var e=this._kpen.undoLen;this._penui.setUndoLen(e),0===e&&this._penui.setErase(!1)}}},{key:"redo",value:function(){}},{key:"canUndo",value:function(){return this._kpen&&this._kpen.undoLen>0}},{key:"canRedo",value:function(){return!1}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._retCnt=0,this.props.actions.setGraphSheetFnc(this._onReturn)):!this.props.view&&e.view&&this.clear()}},{key:"render",value:function(){return u.createElement(u.Fragment,null,u.createElement("div",{className:"draw_box"},u.createElement("canvas",{ref:this._refCanvas,width:980,height:542})),u.createElement("div",{className:"return_cnt_box white",onClick:this._clickReturn},u.createElement("div",null,this._retCnt,"/",this.props.numOfStudent)),u.createElement(v.PenUI,{view:!0,draw:this,store:this._penui,disabled:!1}),u.createElement(f.ToggleBtn,{className:"btn_back",onClick:this.props.onBack}))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([m.observable],y.prototype,"_retCnt",void 0),y=c([l.observer],y),t.PentoolSheet=y},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pid=-1,this._undos=[],this._redos=[],this._ratio=1,this._el=t,t.setAttribute("touch-action","none");var s=t.getContext("2d"),a=t.getAttribute("hidpi"),c=1;if(a&&!/^off|false$/.test(a)){window.devicePixelRatio;var u=s.webkitBackingStorePixelRatio||s.backingStorePixelRatio||1;c=devicePixelRatio/u,s.scale(c,c)}this._ctx=s,this._ratio=c;var l=0,p=0,_=!1,d=null,f=function(e){if(!(o._pid<0||o._pid!==e.pointerId)){try{t.releasePointerCapture(o._pid)}catch(e){}if(o._pid=-1,d){var n=e.offsetX,r=e.offsetY,a=d.path;n===l&&r===p||(a.lineTo(n,r),s.lineTo(n,r),s.stroke(),_=!0),_&&o._undos.push(d),i(e,d),d=null,_=!1}}};t.addEventListener("pointerdown",function(e){if(!(o._pid>=0)){l=e.offsetX,p=e.offsetY;var r=new Path2D;if(n(e,d={idx:-1,erase:!1,color:"",thick:1,path:r})){_=!1,o._pid=e.pointerId;try{t.setPointerCapture(o._pid)}catch(e){}r.moveTo(l,p),s.beginPath(),s.lineCap="round",s.lineJoin="round",s.strokeStyle=d.color,d.erase?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="source-over",s.lineWidth=d.thick,s.moveTo(l,p)}else d=null}}),t.addEventListener("pointermove",function(e){if(o._pid===e.pointerId&&d){var t=e.offsetX,n=e.offsetY;t===l&&n===p||(d.path.lineTo(t,n),s.lineTo(t,n),s.stroke(),l=t,p=n,_=!0,r(e,d))}}),t.addEventListener("pointerup",f),t.addEventListener("pointercancel",f)}var t,n,i;return t=e,(n=[{key:"clear",value:function(){if(this._pid>=0){try{this._el.releasePointerCapture(this._pid)}catch(e){}this._pid=-1}var e=this._el,t=this._ctx,n=this._undos,r=this._redos;for(t.clearRect(0,0,e.width,e.height);n.length>0;)n.pop();for(;r.length>0;)r.pop()}},{key:"reset",value:function(){var e=this._el,t=this._ctx,n=this._undos,r=this._redos;for(t.clearRect(0,0,e.width,e.height);n.length>0;)n.pop();for(;r.length>0;)r.pop()}},{key:"undo",value:function(){if(0===this._undos.length)return null;var e=this._undos.pop();return this._redraw(),this._redos.push(e),e}},{key:"redo",value:function(){if(0===this._redos.length)return null;var e=this._redos.pop();return this._undos.push(e),this._redraw(),e}},{key:"canUndo",value:function(){return this._undos.length>0}},{key:"canRedo",value:function(){return this._redos.length>0}},{key:"toDataURL",value:function(e){if(e){var t=this._el,n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,t.width,t.height),r.drawImage(t,0,0),n.toDataURL()}return this._el.toDataURL()}},{key:"_redraw",value:function(){var e=this._el,t=this._ctx,n=this._undos;if(t.clearRect(0,0,e.width,e.height),0!==n.length)for(var r=0,i=n.length;r<i;r++){var o=n[r];t.strokeStyle=o.color,o.erase?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="source-over",t.lineWidth=o.thick,t.lineCap="round",t.lineJoin="round",t.stroke(o.path)}}},{key:"undoLen",get:function(){return this._undos.length}},{key:"redoLen",get:function(){return this._redos.length}}])&&r(t.prototype,n),i&&r(t,i),e}();t.KPen=i},function(e,t,n){"use strict";function r(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var p=n(0),_=n(1),d=n(2),f=n(5),m=n(3),h=function(){function e(){s(this,e),this.m_color="#000000",this.m_thick=5,this.m_thick_erase=25,this.m_erase=!1,this.m_undoLen=0}return c(e,[{key:"setColor",value:function(e){this.m_color=e}},{key:"setThick",value:function(e){this.m_thick=e}},{key:"setThickErase",value:function(e){this.m_thick_erase=e}},{key:"setErase",value:function(e){this.m_erase=e}},{key:"setUndoLen",value:function(e){this.m_undoLen=e}},{key:"color",get:function(){return this.m_color}},{key:"thick",get:function(){return this.m_thick}},{key:"thick_erase",get:function(){return this.m_thick_erase}},{key:"erase",get:function(){return this.m_erase}},{key:"undoLen",get:function(){return this.m_undoLen}}]),e}();l([_.observable],h.prototype,"m_color",void 0),l([_.observable],h.prototype,"m_thick",void 0),l([_.observable],h.prototype,"m_erase",void 0),l([_.action],h.prototype,"setColor",null),l([_.action],h.prototype,"setErase",null),l([_.observable],h.prototype,"m_undoLen",void 0),l([_.action],h.prototype,"setUndoLen",null),t.PenUIStore=h;var v=function(e){function t(e){var n;return s(this,t),(n=r(this,i(t).call(this,e)))._clickReset=function(e){n.props.draw&&(n.props.draw.reset(),n.props.store.setErase(!1)),m.App.pub_playBtnTab()},n._clickUndo=function(e){n.props.draw&&n.props.draw.undo(),m.App.pub_playBtnTab()},n._clickColor=function(e){var t=e.currentTarget.className;t&&10===t.length&&(t=t.substring(4),n.props.store.setColor("#"+t)),m.App.pub_playBtnTab()},n._clickErase=function(e){n.props.store.setErase(!n.props.store.erase),m.App.pub_playBtnTab()},n._clickThick=function(e){n.props.store.setErase(!1),n.props.store.setThick(5),m.App.pub_playBtnTab()},n._clickThickBold=function(e){n.props.store.setErase(!1),n.props.store.setThick(10),m.App.pub_playBtnTab()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,p.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.store,n=e.disabled;return p.createElement("div",{className:this.props.view?"penui on":"penui"},p.createElement("div",{className:"pen_color"},p.createElement(f.ToggleBtn,{className:"btn_000000",disabled:n||t.erase,on:!t.erase&&"#000000"===t.color,onClick:this._clickColor}),p.createElement(f.ToggleBtn,{className:"btn_1347e9",disabled:n||t.erase,on:!t.erase&&"#1347e9"===t.color,onClick:this._clickColor}),p.createElement(f.ToggleBtn,{className:"btn_ec1919",disabled:n||t.erase,on:!t.erase&&"#ec1919"===t.color,onClick:this._clickColor}),p.createElement(f.ToggleBtn,{className:"btn_30aa01",disabled:n||t.erase,on:!t.erase&&"#30aa01"===t.color,onClick:this._clickColor}),p.createElement(f.ToggleBtn,{className:"btn_fddc00",disabled:n||t.erase,on:!t.erase&&"#fddc00"===t.color,onClick:this._clickColor})),p.createElement("div",{className:"pen_select"},p.createElement(f.ToggleBtn,{disabled:n,on:!n&&!t.erase&&5===t.thick,className:"pen_icon",onClick:this._clickThick}),p.createElement(f.ToggleBtn,{disabled:n,on:!n&&!t.erase&&10===t.thick,className:"pen_thick",onClick:this._clickThickBold})),p.createElement("div",{className:"pen_button"},p.createElement(f.ToggleBtn,{className:"btn_eraser",disabled:n||0===t.undoLen,on:!n&&t.erase,onClick:this._clickErase}),p.createElement(f.ToggleBtn,{className:"btn_undo",disabled:n||0===t.undoLen,onClick:this._clickUndo}),p.createElement(f.ToggleBtn,{className:"btn_reset",disabled:n,onClick:this._clickReset})))}}]),t}();v.defaultProps={disabled:!1},v=l([d.observer],v),t.PenUI=v},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(4),p=n(1),_=n(2),d=n(5),f=n(60),m=n(25),h=n(3),v=n(7),y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e)))._retCnt=0,n._onReturn=function(e){if(n.props.view&&("keyboard"===e.type&&l.find(h.App.students,{id:e.id}))){var t=n._retCnt+1;t>=n.props.numOfStudent&&(t=n.props.numOfStudent),n._retCnt=t}},n._refArea=function(e){!n.m_tarea&&e&&(n.m_tarea=e)},n._onChange=function(e){},n._onDone=function(e){m.state.state="off"},n._clickReturn=function(){n.props.view&&(h.App.pub_playBtnTab(),v.showStudentReportListPage())},m.state.state="on",n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(m.state.state="on",this._retCnt=0,this.props.actions.setGraphSheetFnc(this._onReturn)):!this.props.view&&e.view&&(m.state.state="hide")}},{key:"render",value:function(){return u.createElement(u.Fragment,null,u.createElement(f.KTextArea,{className:m.state.state,ref:this._refArea,view:this.props.view,on:this.props.view,maxLineNum:7,onChange:this._onChange,onDone:this._onDone}),u.createElement("div",{className:"return_cnt_box white",onClick:this._clickReturn},u.createElement("div",null,this._retCnt,"/",this.props.numOfStudent)),u.createElement(m.Keyboard,null),u.createElement(d.ToggleBtn,{className:"btn_back",onClick:this.props.onBack}))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([p.observable],y.prototype,"_retCnt",void 0),y=c([_.observer],y),t.KeyboardSheet=y},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(1),_=n(2),d=n(4),f=n(20),m=n(25),h=n(8),v=n(13);n(62);var y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,o(t).call(this,e))).m_top=0,n.m_cntH=0,n.m_bndH=0,n.m_sTop=0,n.m_sH=0,n.m_pid=-1,n._text="",n._selStart=0,n._selEnd=0,n._lineHeight=0,n._paddingVer=0,n._isSamsungDevice=!1,n._checkLimit=function(){if(!n.m_textarea)return!1;var e=n.m_textarea.value,t=!0;if(n.props.skipEnter&&(t=e.indexOf("/r")<0&&e.indexOf("/n")<0),n.props.maxLength&&n.props.maxLength>0&&e.length>n.props.maxLength&&(t=!1),n.props.maxLineNum&&n.props.maxLineNum>0&&n._lineHeight>0){var r=n.m_textarea.scrollHeight;Math.round((r-n._paddingVer)/n._lineHeight)>n.props.maxLineNum&&(t=!1)}return t?(n._text=e,n._selStart=n.m_textarea.selectionStart,n._selEnd=n.m_textarea.selectionEnd):(n.m_textarea.value=n._text,n.m_textarea.setSelectionRange(n._selStart,n._selEnd),n.props.onLimit&&n.props.onLimit()),t},n._onScroll=function(){n._calc()},n._onChange=function(){n.m_textarea&&(n._checkLimit(),n._calc(),n.props.onChange&&n.props.onChange(n.m_textarea.value))},n._onDone=function(){n.m_textarea&&n.props.onDone&&n.props.onDone(n.m_textarea.value)},n._onResize=function(e,t){n.m_bndH=t,n._calc()},n._onSelect=function(){n.m_textarea&&(n._selStart=n.m_textarea.selectionStart,n._selEnd=n.m_textarea.selectionEnd)},n._detectLineHeight=function(){if(n.m_textarea){var e=window.getComputedStyle(n.m_textarea),t=v.nteUInt(e.fontSize,0),r=e.lineHeight,i=v.nteUInt(r,0);n._paddingVer=v.nteUInt(e.paddingTop,0)+v.nteUInt(e.paddingBottom,0),r&&r.endsWith("%")?n._lineHeight=t*i/100:r&&r.endsWith("px")?n._lineHeight=i:n._lineHeight=i>0?t*i:1.2*t,101===n._lineHeight&&(n._isSamsungDevice=!0)}},n._refArea=function(e){!n.m_textarea&&e&&(n.m_textarea=e,n._detectLineHeight(),n.props.on&&(m.setInputs(n.m_textarea),m.setCallback(n._onChange,null,null,n._onDone)))},n._onFocus=function(e){n.m_textarea&&!n.props.on&&n.m_textarea.blur()},n._onBlur=function(e){n.m_textarea&&n.props.on&&n.m_pid<0&&n._focusArea()},n._refWrap=function(e){!n.m_wrap&&e&&(n.m_wrap=e)},n._refBar=function(e){if(!n.m_bar&&e){n.m_bar=e;var t=function(e){n._releasePID()},r=function(e){if(!n.props.preventScrollByBar&&n.m_textarea&&n.m_bar&&e.pointerId===n.m_pid){var t=n.m_textarea.scrollHeight,r=t-n.m_bndH,i=-r*e.clientY/n.m_bndH,o=.98*n.m_bndH;i>0?i=0:i<-r&&(i=-r),n.m_sTop=-1*i*o/t,n.m_sH=n.m_bndH*o/t,n.m_textarea.scrollTop=-i,n.m_top=i,n.m_cntH=t}};e.addEventListener("pointerdown",function(e){if(!n.props.preventScrollByBar&&!n.props.autoResize&&n.m_textarea&&n.m_bar&&!(n.m_pid>=0)){n.m_pid=e.pointerId;try{n.m_bar.setPointerCapture(n.m_pid)}catch(e){}r(e)}}),e.addEventListener("pointercancel",t),e.addEventListener("pointerup",t),e.addEventListener("pointerleave",t),e.addEventListener("pointermove",r)}},n._calc=d.throttle(function(){if(n.m_textarea&&!(n.m_bndH<=0))if(n._checkLimit())if(n.props.autoResize){n.m_textarea.scrollTop=0,n.m_sTop=0,n.m_sH=0,n.m_top=0,n.m_textarea.style.height="auto";var e=n.m_textarea.scrollHeight;n.m_textarea.style.height=e+"px",n.m_cntH=e}else{var t=n.m_textarea.scrollTop;if(n.props.chkLineHeight&&n._lineHeight>0)t=Math.round(t/n._lineHeight)*n._lineHeight,n.m_textarea.scrollTop=t;t*=-1;var r=n.m_textarea.scrollHeight;if(r>n.m_bndH){var i=.98*n.m_bndH;n.m_sTop=-1*t*i/r,n.m_sH=n.m_bndH*i/r}else n.m_sH=0;n.m_top=t,n.m_cntH=r}else n._calc()},n.props.autoResize?20:10),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"_focusArea",value:function(){return u(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.wait(100);case 2:if(this.m_textarea&&this.props.on){e.next=4;break}return e.abrupt("return");case 4:this.m_textarea.focus();case 5:case"end":return e.stop()}},e,this)}))}},{key:"_releasePID",value:function(){if(this.m_pid>=0&&this.m_bar){try{this.m_bar.releasePointerCapture(this.m_pid)}catch(e){}this.m_pid=-1}}},{key:"componentDidUpdate",value:function(e){this.props.on&&!e.on?this.m_textarea&&(m.setInputs(this.m_textarea),m.setCallback(this._onChange,null,null,this._onDone),this._focusArea(),this._detectLineHeight()):!this.props.on&&e.on&&this._releasePID(),!this.props.view&&e.view?(this._releasePID(),this.m_textarea&&(this.m_textarea.value=""),this._text="",this._selStart=0,this._selEnd=0):this.props.view&&!e.view&&this._detectLineHeight()}},{key:"render",value:function(){var e,t=this.props,n=(t.view,t.autoResize),r=t.className,i=this.props.limitByCode?void 0:this.props.maxLength;return this._isSamsungDevice&&(e={lineHeight:"84px"}),l.createElement("div",{ref:this._refWrap,className:"k-tarea"+(r?" "+r:"")+(n?" auto-resize":"")},l.createElement("div",{className:"k-tarea-bg",style:{top:this.m_top+"px",height:this.m_cntH+"px"}}),l.createElement("textarea",{ref:this._refArea,disabled:!this.props.on,onSelect:this._onSelect,onScroll:this._onScroll,onChange:this._onChange,onFocus:this._onFocus,onBlur:this._onBlur,autoFocus:!1,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",rows:this.props.rows,spellCheck:!1,maxLength:i,style:e},this.props.children),l.createElement("div",{"touch-action":"none",className:"k-tarea-bar",hidden:this.m_sH<=0,ref:this._refBar},l.createElement("div",{className:"k-tarea-drag",style:{top:this.m_sTop+"px",height:this.m_sH+"px",pointerEvents:"none"}})),l.createElement(f.default,{handleWidth:!1,handleHeight:!0,onResize:this._onResize}))}},{key:"value",get:function(){return this.m_textarea?this.m_textarea.value:""}}])&&r(n.prototype,a),c&&r(n,c),t}();c([p.observable],y.prototype,"m_top",void 0),c([p.observable],y.prototype,"m_cntH",void 0),c([p.observable],y.prototype,"m_sTop",void 0),c([p.observable],y.prototype,"m_sH",void 0),y=c([_.observer],y),t.KTextArea=y},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),d=n(4),f=n(1),m=n(2),h=n(5),v=n(3),y=n(10).default,b=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments)))._onClick=function(){e.props.onClick(e.props.text),v.App.pub_playBtnTab()},e}return c(t,_.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.text;e.onClick;return _.createElement("div",{className:t,onClick:this._onClick},n)}}]),t}(),g=2,w=f.observable([0]),E=function(e){function t(e){var n;return r(this,t),(n=s(this,a(t).call(this,e)))._value="",n._on=!1,n._disableSelect=!1,n._viewResult=!1,n._viewCorrect=!1,n._zidx=2,n._onSelect=function(e){n._on&&(n._on=!1,n._disableSelect||(n._value=e,n.props.onChange(e)))},n._toggle=function(){if(v.App.pub_playBtnTab(),n._box){var e=n._box.querySelector(".options-box"),t=n._box.querySelector(".options-box.on");if(e){for(var r=n._box.getBoundingClientRect(),i=n._box.parentElement,o=n.props.className.startsWith("type_6")?"swiper-container":"table-item";i&&!i.className.startsWith(o);)i=i.parentElement;var s=r.bottom,a=i.getBoundingClientRect().bottom,c=e.offsetHeight,u=a-s;if(n._boxPositon=c<u?"bottom":"top",!n.props.className.includes("zoom-in")){var l=(n.props.isStudent?document.querySelector(".s_graphic_result"):document.querySelector(".GRAPHICORANIZER")).querySelector(".top").getBoundingClientRect().top;c>r.top-l&&(n._boxPositon="bottom")}}else n._boxPositon=n.props.boxPositon;if(n._on&&t)n._zidx=2,n._on=!1;else{var p=document.querySelectorAll(".select-box");if(p)for(var _=0;_<p.length;_++){var f=p[_].querySelector(".btn-drop"),m=p[_].querySelector(".options-box");f&&f.classList.remove("on"),m&&m.classList.remove("on")}n._on?(n._on=!1,d.delay(function(){n._zidx=g++,n._on=!0},10)):(n._zidx=g++,n._on=!0)}n.props.idx&&n.props.idx>=0&&(w[0]=n.props.idx)}},n._refBox=function(e){!n._box&&e&&(n._box=e)},n._boxDown=function(e){e&&n._mouseDown(e.nativeEvent)},n._mouseDown=function(e){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n._toggle())},n._boxPositon=e.boxPositon,n}return c(t,_.Component),o(t,[{key:"off",value:function(){v.App.pub_playBtnTab(),this._on=!1}},{key:"clear",value:function(){this._zidx=2,this._value="",this._disableSelect=!1,this._viewResult=!1,this._viewCorrect=!1,this._on=!1}},{key:"setValue",value:function(e){for(var t="",n=0;n<this.props.options.length;n++)if(this.props.options[n]===e){t=e;break}this._value=t}},{key:"setDisableSelect",value:function(e){this._disableSelect=e}},{key:"setViewResult",value:function(e){this._viewResult=e,e&&(this._on=!1)}},{key:"setViewCorrect",value:function(e){e&&(this._value=this.props.correct),this._viewCorrect=e,this._on=!1}},{key:"render",value:function(){var e=this,t=this.props,n=(t.text,t.correct),r=t.options,i=(t.boxPositon,this._value),o="";return this._viewCorrect?i=n:this._viewResult&&(o=this._value===n?"correct":"wrong",i=n),_.createElement("div",{className:"select-box",ref:this._refBox},_.createElement("div",{className:"text-box "+o,onPointerDown:this._boxDown},_.createElement("div",{className:"size-box"},r.map(function(e,t){return _.createElement("div",{key:t},e)})),i),_.createElement(h.ToggleBtn,{className:"btn-drop",on:this._on,onMouseDown:this._mouseDown}),_.createElement("div",{className:"options-box "+this._boxPositon+(this._on?" on":""),style:{zIndex:this._zidx}},r.map(function(t,r){var i="";return e._viewResult?i=t===n?"correct":t===e._value?"on":"wrong":t===e._value&&(i="on"),_.createElement(b,{key:r,className:i,text:t,onClick:e._onSelect})})))}}]),t}();p([f.observable],E.prototype,"_value",void 0),p([f.observable],E.prototype,"_on",void 0),p([f.observable],E.prototype,"_viewResult",void 0),p([f.observable],E.prototype,"_viewCorrect",void 0),E=p([m.observer],E);var k=function(e){function t(e){var n;r(this,t),(n=s(this,a(t).call(this,e))).m_view=!1,n._drop=!1,n.SELECT_KEY=0,n._sbox=[],n._totalNumOfSentnc=0,n._opt=!0,n._refSelect=function(e,t){n._sbox[t]||!e||t<0||(n._sbox[t]=e,n._initSBox())},n._onSelect=function(e,t){var r=n.props.graphic.app_drops;t<r.length&&r[t]&&(r[t].inputed=e),n.props.onChange&&n.props.onChange(e,t)},n._parseBlock=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom",o=e.question.split("<br>"),s=0;return _.createElement(_.Fragment,null,o.map(function(o,a){for(var c,u=new RegExp(/\{(.*?)\}/g),l=u.exec(o),p=0,d="",f=[];l;)l.index>p&&(d=o.substring(p,l.index),c=_.createElement("span",{key:n.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d}}),f.push(c)),d=l[1],s<e.app_drops.length?(f.push(function(o){return _.createElement(E,{key:n.SELECT_KEY++,ref:function(e){return t(e,o)},text:d,correct:e.app_drops[o].correct,options:e.app_drops[o].choices,boxPositon:i,onChange:function(e){return r(e,o)},idx:n.props.idx,className:n.props.className,totalStncNum:n._totalNumOfSentnc,sentncNum:o,isStudent:n.props.isStudent})}(s)),s++):f.push(d),p=u.lastIndex,l=u.exec(o);var m="";return p<o.length&&((d=o.substring(p)).indexOf("_add_")>=0?(m="add",c=_.createElement("span",{key:n.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d.split("_add_")[1]}})):c=_.createElement("span",{key:n.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d}}),f.push(c)),_.createElement("li",{key:a,className:m},_.createElement("div",null,f))}))},n._parseBlock2=function(e){var t=e.title.split("<br>"),n=0;return _.createElement(_.Fragment,null,t.map(function(t,r){for(var i=new RegExp(/\{(.*?)\}/g),o=i.exec(t),s=0,a="",c=[];o;)o.index>s&&(a=t.substring(s,o.index),c.push(a)),a=o[1],n<e.app_drops.length?n++:c.push(a),s=i.lastIndex,o=i.exec(t);return s<t.length&&((a=t.substring(s)).indexOf("_add_")>=0?("add",c.push(a.split("_add_"))):c.push(a)),_.createElement("em",{key:r},c)}))},n._refSwiper=function(e){!n.m_swiper&&e&&(n.m_swiper=e.swiper)};for(var i=e.graphic,o=[i.answer,i.answer2,i.answer3,i.answer4],c=0;c<o.length;c++){if(null==o[c]||0==o[c])return s(n);n._totalNumOfSentnc++}return n}return c(t,_.Component),o(t,[{key:"componentDidMount",value:function(){for(;this._sbox.length>0;)this._sbox.pop();this._jsx=this._parseBlock(this.props.graphic,this._refSelect,this._onSelect,this.props.optionBoxPosition),this._jsx2=this._parseBlock2(this.props.graphic)}},{key:"componentWillReceiveProps",value:function(e){if(e.graphic!==this.props.graphic){for(;this._sbox.length>0;)this._sbox.pop();this._jsx=this._parseBlock(e.graphic,this._refSelect,this._onSelect,this.props.optionBoxPosition),this._jsx2=this._parseBlock2(e.graphic)}}},{key:"_initSBox",value:function(){var e=this,t=this.props.graphic.app_drops;this._sbox.forEach(function(n,r){n&&(n.clear(),r<t.length&&t[r]&&n.setValue(t[r].inputed),n.setDisableSelect(!0===e.props.disableSelect),n.setViewResult(!0===e.props.viewResult),n.setViewCorrect(!0===e.props.viewCorrect))})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.inview&&!e.inview&&this.m_swiper&&(this.m_swiper.slideTo(0,0),d.delay(function(){t.m_swiper&&(t.m_swiper.update(),t.m_swiper.scrollbar&&t.m_swiper.scrollbar.updateSize(),t.m_swiper.wrapperEl.children[0].clientHeight<=t.m_swiper.height?t._opt=!0:t._opt=!1)},100)),this.props.inview&&!e.inview&&this._initSBox(),this.props.renderCnt!==e.renderCnt&&this._initSBox(),this.props.disableSelect!==e.disableSelect&&this._sbox.forEach(function(e,n){e&&e.setDisableSelect(!0===t.props.disableSelect)}),this.props.viewResult!==e.viewResult&&this._sbox.forEach(function(e,n){e&&e.setViewResult(!0===t.props.viewResult)}),this.props.viewCorrect!==e.viewCorrect&&this._sbox.forEach(function(e,n){e&&e.setViewCorrect(!0===t.props.viewCorrect)})}},{key:"render",value:function(){var e={};return this.props.headerColor&&(e.backgroundColor=this.props.headerColor),(this.props.className.startsWith("type_3")||this.props.className.startsWith("type_7"))&&this.props.className.indexOf("zoom-in")<0||this.props.className.startsWith("type_6")?(console.log(this.props.className.indexOf("zoom-in")),this._cont=_.createElement(y,{id:"table-container",ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0,noSwiping:this._opt,followFinger:!0,noSwipingClass:"swiper-no-swiping"},_.createElement("div",{className:"content-box"},_.createElement("div",null,_.createElement("ul",{className:"content"},this._jsx))))):this._cont=_.createElement("div",{className:"content-box"},_.createElement("div",null,_.createElement("ul",{className:"content"},this._jsx))),_.createElement("div",{className:"table-item "+this.props.className,style:{maxWidth:this.props.maxWidth+"px",zIndex:w[0]===this.props.idx?100:0}},_.createElement("div",{className:"head",style:e},_.createElement("span",null,this._jsx2)),this._cont,_.createElement(h.ToggleBtn,{className:"table-item-btn",view:!0===this.props.viewBtn,onClick:this.props.onClickBtn}))}}]),t}();p([f.observable],k.prototype,"m_view",void 0),p([f.observable],k.prototype,"_opt",void 0),k=p([m.inject(),m.observer],k),t.default=k},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(2),h=n(4),v=n(3),y=n(5),b=n(24),g=n(1),w=n(12),E=n(11),k=n(8),S=n(9),C=n(7),x=n(15),O=n(14),T=n(65),P=n(10).default,N=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments))).m_view=!1,e._onClose=function(){v.App.pub_playBtnTab(),e.m_view=!1},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?this.m_view=!0:!this.props.view&&e.view&&(this.m_view=!1)}},{key:"render",value:function(){return f.createElement(w.CoverPopup,{className:"img_popup",view:this.m_view,onClosed:this.props.onClosed},f.createElement("div",null,f.createElement("img",{src:this.props.url}),f.createElement(y.ToggleBtn,{className:"btn_zoom",onClick:this._onClose})))}}]),t}();function A(e,t){var n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,a=new RegExp(/\{(.*?)\}/g),c={key:0},u=[];return e.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>").forEach(function(e,l){if(n){for(var p=a.exec(e),_=0,d="",m=[];p;){p.index>_&&(d=e.substring(_,p.index),m.push(D(d,c,o))),d=p[1];var h=r;h||(h=d),t=i?D(h,c,o):h,s?m.push(f.createElement("span",{key:c.key++,className:n,"data-correct":d},s)):m.push(f.createElement("span",{key:c.key++,className:n,"data-correct":d},t)),_=a.lastIndex,p=a.exec(e)}_<e.length&&("."===(d=e.substring(_))?m.push(D(d,c)):m.push(D(d,c,o))),u[l]=f.createElement(f.Fragment,{key:c.key++},m)}else u[l]=f.createElement(f.Fragment,{key:c.key++},D(e,c,o))}),u}(e,"block",void 0,!0,"word",t);return f.createElement(f.Fragment,null,n.map(function(e,t){return t===n.length-1?e:f.createElement(f.Fragment,{key:t},e,f.createElement("br",null))}))}function D(e,t,n){for(var r=e.split(/\s/g),i=new RegExp(/[\.\!\?\s]/g),o=[],s=0;s<r.length;s++){var a=r[s];if(""!==a){for(var c=[],u=i.exec(a),l=0,p="";u;)u.index>l&&(p=a.substring(l,u.index),c.push(f.createElement("span",{key:t.key++},p))),p=u[0],c.push(p),l=i.lastIndex,u=i.exec(a);l<a.length&&(p=a.substring(l),c.push(f.createElement("span",{key:t.key++},p))),o.push(f.createElement("span",{key:t.key++,className:n},c.map(function(e){return e})))}}return o}_([g.observable],N.prototype,"m_view",void 0),N=_([m.observer],N);var R=function(e){function t(e){var n,i,o;r(this,t),(n=s(this,c(t).call(this,e)))._view=!1,n._hint=!1,n._zoom=!1,n._zoomImgUrl="",n._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},n._viewHint=function(){v.App.pub_playBtnTab(),n._hint=!n._hint,n._swiper&&(n._swiper.slideTo(0,0),n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize()),h.delay(function(){n._swiper&&(n._swiper.slideTo(0,0),n._swiper.update(),n._swiper.scrollbar&&n._swiper.scrollbar.updateSize())},300)},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._onClosepop=function(){v.App.pub_playBtnTab(),n._view=!1},n._refAudio=function(e){!n._btnAudio&&e&&(n._btnAudio=e)},n._onClick=function(){n._btnAudio&&n._btnAudio.toggle()},n._clickZoom1=function(){n._view&&(v.App.pub_playBtnTab(),n._zoomImgUrl=v.App.data_url+n.props.data.img1,n._zoom=!0)},n._clickZoom2=function(){n._view&&(v.App.pub_playBtnTab(),n._zoomImgUrl=v.App.data_url+n.props.data.img2,n._zoom=!0)},n._closedZoom=function(){n._zoom=!1,n._zoomImgUrl=""},n._jsx_sentence=(i=e.data.sentence,o=b.sentence2jsx(i,"block",void 0,!0,"word"),f.createElement(f.Fragment,null,o.map(function(e,t){return t===o.length-1?e:f.createElement(f.Fragment,{key:t},e,f.createElement("br",null))}))),n._jsx_sample=A(e.data.sample,"aaaaaaaaaa"),n._jsx_hint=A(e.data.hint);var a=Math.floor(3*Math.random());return n._character=0===a?"/content/digenglish_lib/B/rw_comprehension/teacher/images/letstalk_bear.png":1===a?"/content/digenglish_lib/B/rw_comprehension/teacher/images/letstalk_boy.png":"/content/digenglish_lib/B/rw_comprehension/teacher/images/letstalk_girl.png",n}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view?(this._view=!0,this._hint=!1,this._zoom=!1,this._zoomImgUrl="",this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize()),h.delay(function(){t._swiper&&(t._swiper.slideTo(0,0),t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},300)):!this.props.view&&e.view&&(this._view=!1,this._zoom=!1,this._zoomImgUrl="",v.App.pub_stop())}},{key:"render",value:function(){var e=this.props,t=(e.view,e.onClosed),n=e.data,r=n.img2&&""!==n.img2?f.createElement("img",{src:v.App.data_url+n.img2,draggable:!1}):void 0;v.App.data_url,n.img1;return f.createElement(f.Fragment,null,f.createElement(w.CoverPopup,{className:"lets_talk",view:this._view,onClosed:t},f.createElement("div",{className:"pop_bg"},f.createElement(y.ToggleBtn,{className:"btn_letstalk_close",onClick:this._onClosepop}),f.createElement(y.ToggleBtn,{className:"btn_hint",on:this._hint,onClick:this._viewHint}),f.createElement("div",{className:"popbox"},f.createElement("div",{className:"image_box"},f.createElement("img",{src:v.App.data_url+n.img1,draggable:!1}),r,f.createElement(y.ToggleBtn,{className:"btn_zoom1"+(void 0!==r?" notonly":""),onClick:this._clickZoom1}),f.createElement(y.ToggleBtn,{className:"btn_zoom2",onClick:this._clickZoom2,view:void 0!==r})),f.createElement("div",{className:"sentence_box"},f.createElement("div",null,f.createElement(T.BtnAudio,{className:"btn_audio",url:v.App.data_url+n.audio,ref:this._refAudio}),f.createElement("div",{className:"question_box",onClick:this._onClick},n.sentence.length>170?f.createElement(O.default,{lineHeight:120,maxLineNum:3,minSize:26,maxSize:34,className:"text",view:!0,textAlign:"left",viewWhenInit:!0},this._jsx_sentence):f.createElement(f.Fragment,null,this._jsx_sentence)))),f.createElement("div",{className:"speechbubble_box"},f.createElement("div",null,f.createElement("div",{className:"char_box"},f.createElement("img",{src:this._character,draggable:!1})),f.createElement("div",{className:"balloon"+(this._hint?" view-hint":"")},f.createElement(P,Object.assign({},this._soption,{ref:this._refSwiper}),f.createElement("div",null,f.createElement("div",{className:"sample"+(this._hint?" hide":"")},this._jsx_sample),f.createElement("div",{className:"hint"+(this._hint?"":" hide")},this._jsx_hint))))))))),f.createElement(N,{url:this._zoomImgUrl,view:this._zoom,onClosed:this._closedZoom}))}}]),t}();_([g.observable],R.prototype,"_view",void 0),_([g.observable],R.prototype,"_hint",void 0),_([g.observable],R.prototype,"_zoom",void 0),_([g.observable],R.prototype,"_zoomImgUrl",void 0),R=_([m.observer],R);var B=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._scripts=[],n._curScritSeq=0,n._clickZoom=function(){v.App.pub_playBtnTab(),n.props.onZoom(v.App.data_url+n.props.summary.image)},n.onScriptClick=function(e){3===n.props.prog&&n.props.onScriptSound(e)},n._onClick=function(){n.props.onSound(n.props.seq)};var i=n._getSentenceJsx();return n._jsx=f.createElement(f.Fragment,null,i.map(function(e,t){return e})),n._curScritSeq=e.curScritSeq,n}return u(t,f.Component),o(t,[{key:"_parseBlock",value:function(e,t,n,r,i,o){for(var s,a,c=new RegExp(/\{(.*?)\}/g),u=c.exec(r),l=0,p=0,_="";u;){u.index>l&&(_=r.substring(l,u.index),s=_.split("<br>"),a=[],s.forEach(function(e,t){t>=s.length-1?a.push(f.createElement("span",{key:"l1_"+t},e)):a.push(f.createElement("span",{key:"l1_"+t},e,f.createElement("br",null)))}),"playing"===i?e.push(f.createElement("span",{key:"sub_"+t+p++,className:i,onClick:this.onScriptClick.bind(this,n)},a.map(function(e){return e}))):e.push(f.createElement("span",{key:"sub_"+t+p++,onClick:this.onScriptClick.bind(this,n)},a.map(function(e){return e})))),_=u[1];var d=o;d||(d=_),s=d.split("<br>"),a=[],s.forEach(function(e,t){t>=s.length-1?a.push(f.createElement("span",{key:t},e)):a.push(f.createElement("span",{key:t},e,f.createElement("br",null)))}),e.push(f.createElement("span",{key:"sub_"+t+p++,className:i,"data-correct":_,onClick:this.onScriptClick.bind(this,n)},a.map(function(e){return e}))),l=c.lastIndex,u=c.exec(r)}l<r.length&&(_=r.substring(l),s=_.split("<br>"),a=[],s.forEach(function(e,t){t>=s.length-1?a.push(f.createElement("span",{key:"l3_"+t},e)):a.push(f.createElement("span",{key:"l3_"+t},e,f.createElement("br",null)))}),"playing"===i?e.push(f.createElement("span",{key:"sub_"+t+p++,className:i,onClick:this.onScriptClick.bind(this,n)},a.map(function(e){return e}))):e.push(f.createElement("span",{key:"sub_"+t+p++,onClick:this.onScriptClick.bind(this,n)},a.map(function(e){return e}))))}},{key:"_getSentenceJsx",value:function(){var e=this,t=[],n="";return n=2===this.props.summary.answer?this.props.summary.choice_2:3===this.props.summary.answer?this.props.summary.choice_3:this.props.summary.choice_1,this.props.scripts.forEach(function(r,i){r.summary_seq===e.props.seq&&(e._curScritSeq>0&&e._curScritSeq===r.seq?(e._parseBlock(t,i,r.seq,r.dms_eng,"playing",n),t.push(" ")):(e._parseBlock(t,i,r.seq,r.dms_eng,"block",n),t.push(" ")))}),t}},{key:"render",value:function(){var e=this.props,t=e.summary,n=e.prog,r=e.curScritSeq;if(this._curScritSeq!==r){this._curScritSeq=r;var i=this._getSentenceJsx();this._jsx=f.createElement(f.Fragment,null,i.map(function(e,t){return e}))}return f.createElement(f.Fragment,null,f.createElement("div",{className:"quiz_box"},f.createElement("div",{className:"img-box"},f.createElement("div",null,f.createElement("img",{src:v.App.data_url+t.image}),f.createElement(y.ToggleBtn,{className:"btn_zoom",onClick:this._clickZoom}))),f.createElement("div",{className:n>=3?"view-correct":"view-summary"},f.createElement(y.ToggleBtn,{className:"btn_summary_audio",draggable:!1,onClick:this._onClick}),f.createElement(O.default,{lineHeight:160,maxLineNum:4,minSize:26,maxSize:26,className:"text",view:!0,textAlign:"left",viewWhenInit:!0},this._jsx))),f.createElement("div",{className:"btn_arrow_down",style:{display:this.props.len===t.seq?"none":""}}))}}]),t}();_([g.observable],B.prototype,"_curScritSeq",void 0);var j=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._prog=0,n._retCnt=0,n._numOfStudent=0,n._zoom=!1,n._letstalk=!1,n._onhint=!1,n._img_url="",n._returns=[],n._player=new x.MPlayer(new x.MConfig(!0)),n._curSummarySeq=0,n._curScritSeq=0,n._scripts=[],n._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!1,hide:!1}},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._refAudio=function(e){!n._player.media&&e&&(n._player.mediaInited(e),n._player.load(v.App.data_url+n._data.summary_audio),n._player.addOnTime(function(e){if(n._curSummarySeq>0){var t=n._scripts[n._curSummarySeq-1];e/=1e3;for(var r=-1,i=t.length,o=0;o<i;o++){var s=t[o];if(e>=s.audio_start&&e<=s.audio_end){r=s.seq;break}}r>=0&&r!==n._curScritSeq&&(n._curScritSeq=r)}}),n._player.addOnPlayEndTemp(function(){n._curSummarySeq=0,n._curScritSeq=0}),n._player.addOnPlayEnd(function(){n._curSummarySeq=0,n._curScritSeq=0}))},n._clickReturn=function(){v.App.pub_playBtnTab(),C.startStudentReportProcess(6,n._returns)},n._clickAnswer=function(){if(n.props.inview&&2===n._prog){v.App.pub_playBtnTab(),n.props.onStudy("");C.sendPAD(10,{msgtype:"summary_end"}),n.props.actions.setSummaryFnc(null),n._prog=3,n.props.actions.setNavi(!0,!0)}},n._onSend=function(){if(n.props.inview&&0===n._prog){for(n._prog=1,n._retCnt=0,n.props.onStudy("ex_video");n._returns.length>0;)n._returns.pop();v.App.pub_playToPad();C.sendPAD(10,{msgtype:"summary_send"}),n.props.actions.setSummaryFnc(n._onReturn),v.App.pub_reloadStudents(function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.inview){e.next=4;break}return e.abrupt("return");case 4:if(1===this._prog){e.next=6;break}return e.abrupt("return");case 6:return this._retCnt=0,this._numOfStudent=v.App.students.length,e.next=10,k.wait(600);case 10:if(this.props.inview){e.next=14;break}return e.abrupt("return");case 14:if(1===this._prog){e.next=16;break}return e.abrupt("return");case 16:this._prog=2,this.props.actions.setNavi(!1,!1);case 18:case"end":return e.stop()}},e,this)}))})}},n._onReturn=function(e){n.props.inview&&(2===n._prog&&(n._returns.indexOf(e.id)>=0||h.find(v.App.students,{id:e.id})&&(n._returns.push(e.id),C.addStudentForStudentReportType6(e.id),n._retCnt=n._returns.length)))},n._clickZoom=function(e){n.props.inview&&(n._zoom||(n._img_url=e,n._zoom=!0))},n._popupClosed=function(){n._zoom=!1},n._onLetsTalk=function(){n._player.bPlay&&(n._player.pause(),n._curSummarySeq=0,n._curScritSeq=0),v.App.pub_playBtnTab(),n._letstalk=!0,n.props.actions.setNaviView(!1)},n._letstalkClosed=function(){n._letstalk=!1,n.props.actions.setNaviView(!0)},n._onScriptSound=function(e){var t=!1;if(n._player.bPlay&&(n._player.pause(),n._curSummarySeq>0&&(n._curSummarySeq=0),n._curScritSeq===e&&(n._curScritSeq=0,t=!0)),!t){for(var r=-1,i=-1,o=n._data.summarizing_scripts,s=0;s<o.length;s++)if(e===o[s].seq){n._curScritSeq=o[s].seq,r=o[s].audio_start,i=o[s].audio_end;break}r>=0&&i>r&&n._player.gotoAndPlay(1e3*r,1e3*i,1)}},n._onAudioSound=function(e){var t=!1;if(n._player.bPlay&&(n._player.pause(),n._curScritSeq>0&&(n._curScritSeq=0),n._curSummarySeq===e&&(n._curSummarySeq=0,t=!0)),!t){for(var r=-1,i=-1,o=n._data.summarizing_scripts,s=0;s<o.length;s++)e===o[s].summary_seq&&(n._curSummarySeq=o[s].summary_seq,-1===r?r=o[s].audio_start:r>o[s].audio_start&&(r=o[s].audio_start),-1===i?i=o[s].audio_end:i<o[s].audio_end&&(i=o[s].audio_end));r>=0&&i>r&&n._player.gotoAndPlay(1e3*r,1e3*i,1)}},n._data=e.actions.getData();for(var i=n._data.summarizing_scripts,o=0;o<i.length;o++)n._scripts[o]=[];for(var u=n._data.summarizing_scripts,l=0,p=0;p<u.length;p++){l+1!==u[p].summary_seq&&l++;var _=u[p];n._scripts[l].push(_)}return n}return u(t,f.Component),o(t,[{key:"_setNavi",value:function(){var e=this;this.props.actions.setNaviView(!0),1===this._prog||2===this._prog?this.props.actions.setNavi(!1,!1):this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(function(){e.props.onSetNavi("VISUALIZING","GRAPHICORANIZER")},function(){e.props.actions.gotoNextBook()})}},{key:"_init",value:function(){var e=this;this._swiper&&(this._swiper.slideTo(0,0),h.delay(function(){e._swiper&&(e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize())},100)),3!==this._prog&&(this._prog=0,this._retCnt=0,this._numOfStudent=0),this._curSummarySeq=0,this._curScritSeq=0,this.props.actions.setSummaryFnc(null),C.sendPAD(0,null)}},{key:"componentDidUpdate",value:function(e){this.props.videoPopup&&!e.videoPopup?this.props.state.isVideoStudied&&(this.props.state.isVideoStudied=!1):!this.props.videoPopup&&e.videoPopup&&this.props.state.isVideoStudied&&this._prog<3&&this._init(),this.props.inview&&!e.inview?(this._init(),this._setNavi()):!this.props.inview&&e.inview&&(this._zoom=!1,this._letstalk=!1,this._onhint=!1,this._curSummarySeq=0,this._curScritSeq=0,this._player.bPlay&&this._player.pause()),this.props.inview&&e.inview&&(!this.props.videoPopup&&e.videoPopup?this._setNavi():!this.props.viewStoryBook&&e.viewStoryBook&&this._setNavi())}},{key:"render",value:function(){var e=this,t=this.props,n=(t.view,t.inview),r=t.data,i=(t.actions,r.letstalk),o=!(""===i.sentence||""===i.audio||""===i.img1||""===i.sample||""===i.hint);return f.createElement("div",{className:"SUMMARY",style:n?void 0:S.NONE},f.createElement(y.ToggleBtn,{className:"btn_lets_talk",view:o,on:this._letstalk,onClick:this._onLetsTalk}),f.createElement("div",{className:"right",style:this._prog>=2?void 0:S.NONE},f.createElement("div",{className:"return_cnt_box white",onClick:this._clickReturn},f.createElement("div",null,this._retCnt,"/",this._numOfStudent)),f.createElement(y.ToggleBtn,{className:"btn_answer",on:this._prog>=3,onClick:this._clickAnswer})),f.createElement("audio",{controls:!1,autoPlay:!1,ref:this._refAudio}),f.createElement(P,Object.assign({},this._soption,{ref:this._refSwiper}),r.summarizing.map(function(t,n){return f.createElement("div",{key:n,className:"summary_box"},f.createElement(B,{seq:n+1,summary:t,scripts:r.summarizing_scripts,curScritSeq:e._curScritSeq,playOn:n+1===e._curSummarySeq,len:r.summarizing.length,prog:e._prog,onZoom:e._clickZoom,onSound:e._onAudioSound,onScriptSound:e._onScriptSound}))})),f.createElement(E.default,{view:n&&this._prog<2&&!this.props.state.videoPopup,type:"teacher",sended:!1,originY:0,onSend:this._onSend}),f.createElement(N,{url:this._img_url,view:this._zoom,onClosed:this._popupClosed}),f.createElement(R,{view:this._letstalk,data:this._data.letstalk,onClosed:this._letstalkClosed}))}}]),t}();_([g.observable],j.prototype,"_prog",void 0),_([g.observable],j.prototype,"_retCnt",void 0),_([g.observable],j.prototype,"_numOfStudent",void 0),_([g.observable],j.prototype,"_zoom",void 0),_([g.observable],j.prototype,"_letstalk",void 0),_([g.observable],j.prototype,"_onhint",void 0),_([g.observable],j.prototype,"_curSummarySeq",void 0),_([g.observable],j.prototype,"_curScritSeq",void 0),j=_([m.observer],j),t.default=j},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(5),_=n(8),d=n(1),f=n(2),m=n(3),h=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=i(t).apply(this,arguments),(e=!r||"object"!==a(r)&&"function"!=typeof r?o(n):r)._playing=!1,e._nPlay=0,e.toggle=function(){e._onDown()},e._onPlay=function(){e._playing=!0,e.props.onPlay&&e.props.onPlay(),m.App.pub_play(e.props.url,e._onPlayEnd)},e._onPlayEnd=function(t){return u(o(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._nPlay>0)){e.next=8;break}if(this._nPlay=this._nPlay-1,!(this._nPlay>0)){e.next=8;break}return this._playing=!1,e.next=6,_.wait(500);case 6:return this._nPlay>0&&this._onPlay(),e.abrupt("return");case 8:this._playing&&(this._playing=!1,this.props.onStop&&this.props.onStop());case 9:case"end":return e.stop()}},e,this)}))},e._onDown=function(){e.props.disabled||(e._playing?(e._playing=!1,m.App.pub_stop(),e.props.onStop&&e.props.onStop()):(e._playing=!0,e.props.onPlay&&e.props.onPlay(),m.App.pub_play(e.props.url,e._onPlayEnd)))},e}var n,c,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"componentWillUnmount",value:function(){this._nPlay=0,this._playing&&(this._playing=!1,m.App.pub_stop())}},{key:"componentDidUpdate",value:function(e){this.props.nPlay!==e.nPlay&&(this._nPlay=this.props.nPlay?this.props.nPlay:0,this._nPlay>0&&!this._playing&&this._onPlay())}},{key:"render",value:function(){return l.createElement(p.ToggleBtn,{className:this.props.className,view:this.props.view,on:this._playing,disabled:this.props.disabled,onMouseDown:this._onDown})}}])&&r(n.prototype,c),d&&r(n,d),t}();c([d.observable],h.prototype,"_playing",void 0),h=c([f.observer],h),t.BtnAudio=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),m=n(4),h=n(2),v=n(1),y=n(19),b=n(15),g=n(5),w=n(3),E=n(7),k=n(12),S=n(22),C=n(8),x=n(11),O=n(9),T=n(23),P=n(14),N=n(10).default;function A(e,t){for(var n=.01*Math.round(t/.01),r=0,i=e.length;r<i;r++){var o=e[r];if(n>=o.dms_start&&n<=o.dms_end)return r;if(n<o.dms_start)break}return-1}function D(e,t){var n=Math.round(t/1e3),r=Math.round(e/1e3),i=Math.floor(r/60),o=Math.floor(i/60),s="";return i%=60,o>0||n>=3600?(s=o+":",s+=i>=10?i+":":"0"+i+":"):n>=600?s+=i>=10?i+":":"0"+i+":":s=i+":",s+=(r%=60)>=10?r:"0"+r}var R=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments))).m_dragging=!1,e.m_bgW=0,e.m_s=0,e.m_dragLeft=0,e.m_dragLeft_s=0,e._seek=m.throttle(function(t){if(!e.props.disable){var n=e.props.player;n.seek(n.duration*t/100)}},300,{leading:!1}),e._refBG=function(t){!e.m_bg&&t&&(e.m_bg=t)},e._start=function(t,n){if(e.m_bg&&!e.props.disable&&!(e.props.player.duration<=0||(e.m_bgW=e.m_bg.getBoundingClientRect().width,e.m_bgW<=0))){var r=100*n.x/e.m_bgW;r<0?r=0:r>100&&(r=100),e.m_dragLeft_s=r,e.m_dragLeft=r,e.m_s=n.x,e.m_dragging=!0}},e._drag=function(t,n){if(e.m_dragging&&!e.props.disable){var r=e.m_dragLeft_s+100*(n.x-e.m_s)/e.m_bgW;r<0?r=0:r>100&&(r=100),e.m_dragLeft=r,e.props.player.bPlay||e._seek(r)}},e._stop=function(t,n){if(e.m_dragging&&!e.props.disable){e.m_dragging=!1;var r=e.props.player;r.seek(r.duration*e.m_dragLeft/100)}},e}return u(t,f.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.player,n=e.checkups,r=0,i=t.duration;i>0&&(r=t.viewTime/i*100);var o=0,s=this.m_dragLeft;return o=this.m_dragging?s:r,f.createElement(f.Fragment,null,f.createElement("div",{className:"prog_box"},f.createElement(y.DraggableCore,{onDrag:this._drag,onStart:this._start,onStop:this._stop},f.createElement("div",{className:"prog_bg",ref:this._refBG},f.createElement("div",{className:"prog_bar",style:{width:r+"%"}}),f.createElement("div",{className:"prog_tmp"}),n.map(function(e,t){var n=i>0?1e3*e.dms_end/i*100:0;return f.createElement("span",{key:t,className:"checkup",style:{left:n+"%"}})}),f.createElement(g.ToggleBtn,{className:"prog_btn",style:{left:o+"%"}})))),f.createElement("div",{className:"video_time",style:{width:(t.duration>=6e5?110:135)+"px"}},f.createElement("span",null,D(t.viewTime,t.duration))," / ",f.createElement("span",null,D(t.duration,t.duration))))}}]),t}();_([v.observable],R.prototype,"m_dragLeft",void 0),R=_([h.observer],R);var B=function(e){function t(){return r(this,t),s(this,c(t).apply(this,arguments))}return u(t,f.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.player,n=e.study,r=e.vpop;return f.createElement("div",{className:"control"},f.createElement("div",{className:"control_left"},f.createElement(g.ToggleBtn,{className:"btn_play_pause",on:this.props.isPlay,onClick:this.props.togglePlay}),f.createElement(g.ToggleBtn,{className:"btn_stop",onClick:this.props.stopClick}),f.createElement(g.ToggleBtn,{className:"btn_prev",onClick:this.props.prevClick}),f.createElement(g.ToggleBtn,{className:"btn_next",onClick:this.props.nextClick})),f.createElement("div",{className:"control_top "+n},f.createElement("div",null,f.createElement(R,{player:t,checkups:this.props.checkups,disable:this.props.disable}))),f.createElement("div",{className:"control_right"},f.createElement(g.ToggleBtn,{className:"btn_subscript "+n,on:this.props.viewCaption,onClick:this.props.toggleCaption}),f.createElement(g.ToggleBtn,{className:"btn_audio",onClick:this.props.toggleMute,on:t.muted}),f.createElement(g.ToggleBtn,{className:"btn_fullscreen",onClick:this.props.toggleFullscreen}),f.createElement(g.ToggleBtn,{className:"btn_fullscreen_off",onClick:this.props.toggleFullscreen})),f.createElement("div",{className:"control_center"},f.createElement(g.ToggleBtn,{className:"btn_v_listen_repeat",on:"SHADOWING"===r||"SHADOWING"===n,disabled:"READALOUD"===n||"CHECKUP"===n,onClick:this.props.shadowingClick}),f.createElement(g.ToggleBtn,{className:"btn_v_readalong",on:"READALOUD"===r||"READALOUD"===n,disabled:"CHECKUP"===n||"SHADOWING"===n,onClick:this.props.readaloudClick}),f.createElement(g.ToggleBtn,{className:"btn_v_checkup",on:"CHECKUP"===r||"CHECKUP"===n,disabled:"READALOUD"===n||"SHADOWING"===n,onClick:this.props.checkupClick})))}}]),t}();B=_([h.observer],B);var j=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._viewEng=!0,e._viewTrans=!0,e._toggleEng=function(){e._viewEng=!e._viewEng},e._toggleTrans=function(){e._viewTrans=!e._viewTrans},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view&&(this._viewEng=!0,this._viewTrans=!0)}},{key:"render",value:function(){var e,t=this.props,n=t.inview,r=t.script;return r?(e=this._viewEng?r.dms_eng:f.createElement(f.Fragment,null,""),this._viewTrans?r.dms_kor[w.App.lang]:f.createElement(f.Fragment,null,"")):(e=f.createElement(f.Fragment,null,""),f.createElement(f.Fragment,null,"")),f.createElement("div",{className:"caption_box",style:{display:n?"":"none"}},f.createElement("div",{className:"caption_eng"},f.createElement("span",null,e),f.createElement(g.ToggleBtn,{className:"btn_eng",on:this._viewEng,onClick:this._toggleEng})))}}]),t}();function I(e,t,n){for(var r=e.split(/\s/g),i=new RegExp(/[\s]/g),o=[],s=0;s<r.length;s++){var a=r[s];if(""!==a){for(var c=[],u=i.exec(a),l=0,p="";u;)u.index>l&&(p=(p=a.substring(l,u.index)).replace(/@@1@@/g,'."').replace(/@@2@@/g,'?"').replace(/@@3@@/g,'!"'),c.push(f.createElement("span",{key:t.key++},p))),p=u[0],c.push(p),l=i.lastIndex,u=i.exec(a);l<a.length&&(p=(p=a.substring(l)).replace(/@@1@@/g,'."').replace(/@@2@@/g,'?"').replace(/@@3@@/g,'!"'),c.push(f.createElement("span",{key:t.key++},p))),o.push(f.createElement("span",{key:t.key++,className:n},c.map(function(e){return e})))}}return o}_([v.observable],j.prototype,"_viewEng",void 0),_([v.observable],j.prototype,"_viewTrans",void 0),j=_([h.observer],j);var M=function(e){function t(e){var n;return r(this,t),(n=s(this,c(t).call(this,e)))._jsx=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=new RegExp(/\{(.*?)\}/g),a={key:0},c=[];return(e=e.replace(/\.\"/g,"@@1@@").replace(/\?\"/g,"@@2@@").replace(/\!\"/g,"@@3@@")).replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>").forEach(function(e,u){if(n){for(var l=s.exec(e),p=0,_="",d=[];l;){l.index>p&&(_=e.substring(p,l.index),d.push(I(_,a,o))),_=l[1];var m=r;m||(m=_),t=i?I(m,a,o):m,d.push(f.createElement("span",{key:a.key++,className:n,"data-correct":_},t)),p=s.lastIndex,l=s.exec(e)}p<e.length&&(_=e.substring(p),d.push(I(_,a,o))),c[u]=f.createElement(f.Fragment,{key:a.key++},d)}else c[u]=f.createElement(f.Fragment,{key:a.key++},I(e,a,o))}),c}(e.script.dms_eng,"closure",void 0,!1,"word"),n}return u(t,f.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.on,n=e.viewScript,r=e.studentturn,i=[],o=[];n&&i.push("view"),t&&i.push("on");var s=i.join(" ");n&&o.push("view"),t&&r&&o.push("on");var a=o.join(" ");return f.createElement(f.Fragment,null,f.createElement("span",null,f.createElement("img",{className:a,src:"/content/digenglish_lib/B/rw_comprehension/teacher/images/arrow_script.png",draggable:!1})),f.createElement("div",{className:s},this._jsx))}}]),t}(),H=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._view=!1,e._prog=0,e._selected=0,e._retCnt=0,e._numOfStudent=0,e._returnUsers=[],e._onClose=function(){w.App.pub_playBtnTab(),e._view=!1},e._onSend=function(){if("off"!==e.props.type&&0===e._prog){if("CHECKUP"===e.props.type){var t={msgtype:"v_checkup_send",idx:e.props.checkupIdx};for(E.sendPAD(10,t),e._retCnt=0;e._returnUsers.length>0;)e._returnUsers.pop()}else if("CHECKUPSET"!==e.props.type){var n={msgtype:"READALOUD"===e.props.type?"v_readaloud_send":"v_shadowing_send"};E.sendPAD(10,n)}e._prog=1,w.App.pub_playToPad(),"CHECKUP"===e.props.type&&e.props.actions.setCheckupFnc(e._onReturn),w.App.pub_reloadStudents(function(){return d(a(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1===this._prog){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C.wait(500);case 4:if(1===this._prog){e.next=6;break}return e.abrupt("return");case 6:this._prog=2,this.props.onSend(this.props.type),"CHECKUP"!==this.props.type?this._view=!1:(this._retCnt=0,this._numOfStudent=w.App.students.length);case 9:case"end":return e.stop()}},e,this)}))})}},e._clickTrue=function(){e._prog>=3||(w.App.pub_playBtnTab(),1===e._selected?e._selected=0:e._selected=1)},e._clickFalse=function(){e._prog>=3||(w.App.pub_playBtnTab(),2===e._selected?e._selected=0:e._selected=2)},e._onReturn=function(t){if(e._view&&m.find(w.App.students,{id:t.id})){e._returnUsers.push(t.id),E.addStudentForStudentReportType6(t.id);var n=e._retCnt+1;n>=e._numOfStudent&&(n=e._numOfStudent),e._retCnt=n}},e._clickReturn=function(){w.App.pub_playBtnTab(),E.startStudentReportProcess(6,e._returnUsers)},e._clickAnswer=function(){if(2===e._prog){w.App.pub_playBtnTab();E.sendPAD(10,{msgtype:"v_checkup_end"}),e._prog=3,e.props.actions.setCheckupFnc(null)}},e}return u(t,f.Component),o(t,[{key:"componentDidUpdate",value:function(e){if("off"!==this.props.type&&"off"===e.type){for(this._view=!0,this._selected=0,this._prog=0,this._retCnt=0,this._numOfStudent=0;this._returnUsers.length>0;)this._returnUsers.pop();this.props.actions.setCheckupFnc(null)}else"off"===this.props.type&&"off"!==e.type&&(this._view=!1,this._selected=0)}},{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.checkupIdx,i=t.data;e="READALOUD"===this.props.type?"READ ALONG":"SHADOWING"===this.props.type?"LISTEN & REPEAT":"CHECKUP"===n||"CHECKUPSET"===n?"CHECK UP":n;var o="",s=0;if("CHECKUP"===n){var a=i.checkup[r];a&&(o=a.question,s=a.answer)}return f.createElement(k.CoverPopup,{className:"v_popup",view:this._view,onClosed:this.props.onClosed},f.createElement("div",null,f.createElement("div",{className:"head"},f.createElement("span",null,e),f.createElement(g.ToggleBtn,{className:"btn_close",onClick:this._onClose})),f.createElement("div",{className:"READALOUD content",style:"READALOUD"===n?void 0:O.NONE},"Read along together."),f.createElement("div",{className:"SHADOWING content",style:"SHADOWING"===n?void 0:O.NONE},"Listen and repeat."),f.createElement("div",{className:"CHECKUPSET content",style:"CHECKUPSET"===n?void 0:O.NONE},"Watch the video and answer."),f.createElement("div",{className:"CHECKUP content",style:"CHECKUP"===n?void 0:O.NONE},f.createElement("div",{className:"question"},f.createElement("span",null,r+1,"."),f.createElement("div",{className:"qtext"},f.createElement(P.default,{view:"CHECKUP"===n,maxLineNum:2,maxSize:44,minSize:36,lineHeight:160,textAlign:"left"},o))),f.createElement("div",{className:"choice-box"},f.createElement(g.ToggleBtn,{className:"btn_true",on:1===this._selected&&this._prog<3||1===s&&3===this._prog,onClick:this._clickTrue}),f.createElement(g.ToggleBtn,{className:"btn_false",on:2===this._selected&&this._prog<3||2===s&&3===this._prog,onClick:this._clickFalse})),f.createElement("div",{className:"return_cnt_box white",style:{display:this._prog>=2?"":"none"},onClick:this._clickReturn},f.createElement("div",null,this._retCnt,"/",this._numOfStudent)),f.createElement(g.ToggleBtn,{className:"btn_answer",view:this._prog>=2,disabled:3===this._prog,onClick:this._clickAnswer}),f.createElement(g.ToggleBtn,{className:"btn_v_next",view:3===this._prog,onClick:this._onClose})),f.createElement(x.default,{view:this._prog<2,type:"teacher",sended:!1,originY:0,onSend:this._onSend})))}}]),t}();_([v.observable],H.prototype,"_view",void 0),_([v.observable],H.prototype,"_prog",void 0),_([v.observable],H.prototype,"_selected",void 0),_([v.observable],H.prototype,"_retCnt",void 0),_([v.observable],H.prototype,"_numOfStudent",void 0),H=_([h.observer],H);var L=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._swiper=null,n._player=new b.MPlayer(new b.MConfig(!0)),n._player_inittime=0,n._countdown=new T.TimerState(3),n._view=!1,n._viewCaption=!1,n._curIdx=-1,n._viewCountDown=!1,n._play=!1,n._vpop="off",n._study="off",n._yourturn=-1,n._checkupIdx=-1,n._curCheckup=-1,n._ytNext=-1,n._checkups=[],n._onClose=function(){console.log("VideoBox close"),n._view=!1,n._player.gotoAndPause(1e3*n._player_inittime)},n._refBox=function(e){!n._box&&e&&(n._box=e)},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._refVideo=function(e){if(e&&!n._player.media){n._player.mediaInited(e);var t=n.props.data.scripts;n._player.addOnTime(function(e){var r=A(t,e/=1e3);if(n._curIdx!==r){if("SHADOWING"===n._study){if(!(n._yourturn<0))return;if(n._curIdx>=0&&n._player.bPlay){var i={msgtype:"view_yourturn",idx:n._curIdx};E.sendPAD(10,i),n._ytNext=r;var o=t[n._curIdx],s=2e3*(o.dms_end-o.dms_start);return n._yourturn=m.delay(function(){if(n._yourturn>=0){n._player.play(),n._curIdx=n._ytNext,n._yourturn=-1;var e={msgtype:"focusidx",idx:n._curIdx};E.sendPAD(10,e),n._curIdx>=0&&n._swiper&&n._swiper.slideTo(0===n._curIdx?0:n._curIdx-1)}},s),void n._player.pause()}if(!n._player.bPlay)return;var a={msgtype:"focusidx",idx:r};E.sendPAD(10,a)}else if("READALOUD"===n._study){var c={msgtype:"focusidx",idx:r};E.sendPAD(10,c)}n._curIdx=r,n._curIdx>=0&&n._swiper&&n._swiper.slideTo(0===n._curIdx?0:n._curIdx-1)}if("CHECKUP"===n._study&&n._player.bPlay){var u=A(n._checkups,e);n._curCheckup!==u&&(n._curCheckup>=0&&(n._player.pause(),n._checkupIdx=n._curCheckup,n._vpop="CHECKUP"),n._curCheckup=u)}}),n._player.addOnState(function(e,t){if("SHADOWING"===n._study||"READALOUD"===n._study){var r={msgtype:"SHADOWING"===n._study&&n._yourturn>=0?"playing":n._viewCountDown?"playing":6!==e&&n._player.bPlay?"playing":"paused"};E.sendPAD(10,r)}})}},n._playClick=function(){n._play=!n._play,n._viewCountDown||"SHADOWING"===n._study||(w.App.pub_playBtnTab(),n._play?n._player.play():n._play||n._player.pause())},n._clickVideo=function(){n._viewCountDown||"SHADOWING"===n._study||(n._player.bPlay?(w.App.pub_playBtnTab(),n._player.pause()):(w.App.pub_playBtnTab(),(n._player.currentTime>=n._player.duration||n._player.currentTime<n._player_inittime)&&n._player.seek(1e3*n._player_inittime),n._player.play()))},n._toggleFullscreen=function(){w.App.pub_playBtnTab(),document.fullscreenElement===n._box||document.webkitFullscreenElement===n._box?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():n._box.requestFullscreen?n._box.requestFullscreen():n._box.webkitRequestFullscreen&&n._box.webkitRequestFullscreen()},n._prevClick=function(){if(!n._viewCountDown){w.App.pub_playBtnTab();var e=n._yourturn;n._yourturn>=0&&(clearTimeout(n._yourturn),n._yourturn=-1);var t=n.props.data.scripts,r=n._player.currentTime/1e3,i=-1,o=!1;if("SHADOWING"===n._study&&e>=0?(n._curIdx>=0&&(i=n._curIdx),o=!0):i=A(t,r),n._curIdx=-1,n._curCheckup=-1,o&&!n._player.bPlay&&n._player.play(),i>=0)if(i>0){var s=t[i-1];n._player_inittime>s.dms_start?n._player.seek(1e3*n._player_inittime):n._player.seek(1e3*s.dms_start)}else n._player.seek(1e3*n._player_inittime);else for(var a=t.length-1;a>=0;a--){if(r>t[a].dms_start){n._player_inittime>t[a].dms_start?n._player.seek(1e3*n._player_inittime):n._player.seek(1e3*t[a].dms_start);break}0===a&&n._player.seek(1e3*n._player_inittime)}}},n._nextClick=function(){if(!n._viewCountDown){w.App.pub_playBtnTab();var e=n._yourturn;n._yourturn>=0&&(clearTimeout(n._yourturn),n._yourturn=-1);var t=n.props.data.scripts,r=n._player.currentTime/1e3,i=-1,o=!1;if("SHADOWING"===n._study&&e>=0?(n._ytNext>=0?i=n._ytNext-1:n._curIdx>=0&&(i=n._curIdx),o=!0):i=A(t,r),n._curIdx=-1,n._curCheckup=-1,o&&!n._player.bPlay&&n._player.play(),i>=0)if(i<t.length-1){var s=t[i+1];n._player.seek(1e3*s.dms_start)}else n._player.seek(n._player.duration);else for(var a=0,c=t.length;a<c;a++){if(r<t[a].dms_start){n._player.seek(1e3*t[a].dms_start);break}a===c-1&&n._player.seek(n._player.duration)}}},n._toggleMute=function(){w.App.pub_playBtnTab(),n._player.setMuted(!n._player.muted)},n._togglePlay=function(){if(!n._viewCountDown){w.App.pub_playBtnTab();var e=n._yourturn;if(n._yourturn>=0&&(clearTimeout(n._yourturn),n._yourturn=-1),"SHADOWING"===n._study){if(e>=0)return void(n._player.bPlay&&n._player.pause());n._ytNext>=0&&(n._curIdx=n._ytNext),n._ytNext=-1;var t={msgtype:"focusidx",idx:n._curIdx};E.sendPAD(10,t)}n._player.bPlay?n._player.pause():((n._player.currentTime>=n._player.duration||n._player.currentTime<n._player_inittime)&&n._player.seek(1e3*n._player_inittime),n._player.play(),n._curIdx>=0&&n._swiper&&n._swiper.slideTo(0===n._curIdx?0:n._curIdx-1))}},n._stopClick=function(){w.App.pub_playBtnTab(),n._player.gotoAndPause(1e3*n._player_inittime),n._curIdx=-1,n._checkupIdx=-1,n._curCheckup=-1,"off"!==n._study&&(n._yourturn>=0&&(clearTimeout(n._yourturn),n._yourturn=-1),n._countdown.pause(),n._countdown.reset(),n._viewCountDown=!1)},n._toggleCaption=function(){w.App.pub_playBtnTab();n._swiper&&n._swiper.activeIndex;n._viewCaption=!n._viewCaption,"READALOUD"===n._study||n._study},n._countStart=function(){},n._countZero=function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._viewCountDown=!1,this.props.view){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,C.wait(300);case 5:if(this.props.view){e.next=7;break}return e.abrupt("return");case 7:"READALOUD"!==this._study&&"SHADOWING"!==this._study||((this._player.currentTime!==this._player_inittime||this._player.currentTime<this._player_inittime)&&this._player.seek(1e3*this._player_inittime),this._player.play(),this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize()));case 8:case"end":return e.stop()}},e,this)}))},n._readaloudClick=function(){"READALOUD"===n._study?(w.App.pub_playBtnTab(),n._clearStudy(),n._player.pause()):"off"===n._study&&(w.App.pub_playBtnTab(),n._vpop="READALOUD",n._player.pause(),n.props.state.isVideoStudied=!0)},n._shadowingClick=function(){"SHADOWING"===n._study?(w.App.pub_playBtnTab(),n._clearStudy(),n._player.pause()):"off"===n._study&&(w.App.pub_playBtnTab(),n._vpop="SHADOWING",n._player.pause(),n.props.state.isVideoStudied=!0)},n._checkupClick=function(){"CHECKUP"===n._study?(w.App.pub_playBtnTab(),n._clearStudy(),n._player.pause()):"CHECKUPSET"===n._study?(w.App.pub_playBtnTab(),n.props.state.isVideoStudied=!1):"off"===n._study&&(w.App.pub_playBtnTab(),n._vpop="CHECKUPSET",n._player.pause(),n.props.state.isVideoStudied=!0)},n._offVideo=function(){if("CHECKUP"===n._vpop){E.sendPAD(10,{msgtype:"v_dialogue_end"}),n._player.play()}n._vpop="off"},n._onSend=function(e){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.view){t.next=4;break}return t.abrupt("return");case 4:if(this._vpop===e){t.next=8;break}return t.abrupt("return");case 8:if("off"!==this._vpop){t.next=10;break}return t.abrupt("return");case 10:if("CHECKUPSET"!==this._vpop){t.next=21;break}return w.App.pub_playBtnTab(),t.next=14,C.wait(300);case 14:this._study="CHECKUP",this._vpop="CHECKUP",this._player.seek(1e3*this._player_inittime),this._player.bPlay||this._player.play(),E.sendPAD(0,null),t.next=22;break;case 21:"CHECKUP"===this._vpop||(this._study=e,this._viewCaption=!1,this._countdown.pause(),this._countdown.reset(),this._viewCountDown=!0,this._viewCaption=!0,this._countdown.start(),this._player.seek(1e3*this._player_inittime),this._curIdx=-1,this._swiper&&this._swiper.slideTo(0,0),n={msgtype:"playing"},E.sendPAD(10,n));case 22:case"end":return t.stop()}},t,this)}))};for(var i=e.data.scripts,o=e.data.checkup,u=0;u<o.length;u++)for(var l=o[u],p=0;p<i.length;p++){var _=i[p];l.seq===_.checkup_num&&n._checkups.push(_)}return n._player_inittime=e.data.video_start,n}return u(t,f.Component),o(t,[{key:"_clearStudy",value:function(){if(this._curIdx=-1,this._checkupIdx=-1,this._curCheckup=-1,"off"!==this._study){this._yourturn>=0&&(clearTimeout(this._yourturn),this._yourturn=-1),this._viewCaption=!1,this._countdown.pause(),this._countdown.reset(),this._viewCountDown=!1,this._study="off";E.sendPAD(10,{msgtype:"v_dialogue_end"})}}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._view=!0,this._player.myState<=1&&this._player.load(w.App.data_url+this.props.data.video),this._player.setMuted(!1),this._player.setMutedTemp(!1),this._viewCaption=!1,this._curIdx=-1,this._countdown.pause(),this._countdown.reset(),this._viewCountDown=!1,this._vpop="off",this._yourturn=-1,this._ytNext=-1,this._study="off",this._checkupIdx=-1,this._curCheckup=-1,this._player.currentTime<this._player_inittime&&this._player.seek(1e3*this._player_inittime),this._player.play()):!this.props.view&&e.view&&("off"!==this._study&&E.sendPAD(0,null),this._view=!1,this._player.gotoAndPause(1e3*this._player_inittime),this._vpop="off",this._viewCaption=!1,this._curIdx=-1,this._countdown.pause(),this._countdown.reset(),this._viewCountDown=!1,this._yourturn>=0&&(clearTimeout(this._yourturn),this._yourturn=-1),this._ytNext=-1,this._player.bPlay&&this._player.pause())}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.view,i=n.data,o=n.actions,s=i.scripts;this._viewCaption&&this._curIdx>=0&&(e=s[this._curIdx]);var a="off"===this._study&&(5===this._player.myState||1===this._player.myState),c=("off"===this._study&&this._player.bPlay,"SHADOWING"===this._study&&this._yourturn>=0||this._player.bPlay),u="READALOUD"===this._study||"SHADOWING"===this._study,l="READALOUD"===this._study||"SHADOWING"===this._study&&this._yourturn>=0;return f.createElement(k.CoverPopup,{className:"video_popup",view:this.props.view&&this._view,onClosed:this.props.onClosed},f.createElement("div",{className:"wrapper",ref:this._refBox},f.createElement("div",{className:"video_box"},f.createElement("div",{className:"video "+this._study},f.createElement("video",{controls:!1,ref:this._refVideo,onClick:this._clickVideo}),f.createElement(N,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},s.map(function(e,n){return f.createElement("div",{key:n,className:"script"+(c?" swiper-no-swiping":"")},f.createElement(M,{key:n,idx:n,on:u&&t._curIdx===n,studentturn:l,script:e,viewScript:u&&t._viewCaption}))})),f.createElement(S.Loading,{view:a}),f.createElement(j,{view:r,inview:!u&&this._viewCaption,script:e}),f.createElement(T.CountDown2,{state:this._countdown,view:this._viewCountDown,onStart:this._countStart,onComplete:this._countZero})),f.createElement(B,{player:this._player,disable:this._viewCountDown||"SHADOWING"===this._study,vpop:this._vpop,study:this._study,isPlay:c,checkups:this._checkups,toggleFullscreen:this._toggleFullscreen,togglePlay:this._togglePlay,stopClick:this._stopClick,prevClick:this._prevClick,nextClick:this._nextClick,viewCaption:this._viewCaption,toggleCaption:this._toggleCaption,toggleMute:this._toggleMute,readaloudClick:this._readaloudClick,shadowingClick:this._shadowingClick,checkupClick:this._checkupClick})),f.createElement(H,{type:this._vpop,data:i,checkupIdx:this._checkupIdx,actions:o,onSend:this._onSend,onClosed:this._offVideo})),f.createElement(g.ToggleBtn,{className:"btn_back",onClick:this._onClose}))}}]),t}();_([v.observable],L.prototype,"_view",void 0),_([v.observable],L.prototype,"_viewCaption",void 0),_([v.observable],L.prototype,"_curIdx",void 0),_([v.observable],L.prototype,"_viewCountDown",void 0),_([v.observable],L.prototype,"_play",void 0),_([v.observable],L.prototype,"_vpop",void 0),_([v.observable],L.prototype,"_study",void 0),_([v.observable],L.prototype,"_yourturn",void 0),L=_([h.observer],L),t.default=L},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=n(1),_=n(5),d=n(3),f=n(12),m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,o(t).apply(this,arguments))).m_view=!1,e.m_curIdx=0,e._onClose=function(){d.App.pub_playBtnTab(),e.m_view=!1,e.m_curIdx=0,e.props.onClosed()},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.view&&!e.view){this.m_view=!0,this.m_curIdx=0;var n=this.props.data.storybook;this.props.actions.setNaviView(!0),this.props.actions.setNavi(0!==this.m_curIdx,!(this.m_curIdx>=n.length-1)),this.props.actions.setNaviFnc(function(){0!==t.m_curIdx&&(t.m_curIdx--,t.props.actions.setNavi(0!==t.m_curIdx,!(t.m_curIdx>=n.length-1)))},function(){t.m_curIdx>=n.length-1||(t.m_curIdx++,t.props.actions.setNavi(0!==t.m_curIdx,!(t.m_curIdx>=n.length-1)))})}else!this.props.view&&e.view&&(this.m_view=!1,this.m_curIdx=0)}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.data.storybook,r=-1*this.m_curIdx*1280;return u.createElement(f.CoverPopup,{className:"t-storybook",view:t&&this.m_view,onClosed:this.props.onClosed},u.createElement("div",{className:"page-wrapper",style:{left:r+"px"}},n.map(function(e,t){return u.createElement("div",{key:t},u.createElement("div",{className:"page"},u.createElement("img",{src:d.App.data_url+e.image})))})),u.createElement(_.ToggleBtn,{className:"btn_back",onClick:this._onClose}))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([p.observable],m.prototype,"m_view",void 0),c([p.observable],m.prototype,"m_curIdx",void 0),m=c([l.observer],m),t.default=m},function(e,t,n){}]);