!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=26)}([function(e,t){e.exports=React},function(e,t){e.exports=mobxReact},function(e,t){e.exports=mobx},function(e,t,n){e.exports=n(45)()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),i=n(7);function s(e){if(!e)return e;e.displayMode=""+e.displayMode=="2"?"2":"1";var t=e.thumb?e.thumb:"";return(t.startsWith("static/")||""===t)&&(t=t.endsWith("w.jpg")?"".concat("/content/digenglish_lib/","/images/default_member_w.jpg"):"".concat("/content/digenglish_lib/","/images/default_member_m.jpg")),e.thumb=t,e}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"pub_init",value:function(){var t=navigator.userAgent;e._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),e._tempBnd=document.createElement("div"),e._tempBnd.style.display="none",e._tempEl=document.createElement("div"),e._tempBnd.appendChild(e._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",function(t){document.body.appendChild(e._tempBnd)}):document.body.appendChild(e._tempBnd)}},{key:"pub_load",value:function(t,n,r,o,i,a){e._lesson=o,e._book=r,e._nextBook=i,e._prevBook=a,e._students=[],t&&t.forEach(function(t,n){e._students[n]=s(t)}),e._student=s(n)}},{key:"pub_reloadStudents",value:function(t){i.getStudents(function(n,r){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop();for(var o=0,i=n.length;o<i;o++)e.isDvlp?e._students[o]=s(n[o]):e._students[o]=s({id:n[o].id,name:n[o].name,thumb:n[o].defaultThumbnail,avatar:n[o].profileThumbnail,nickname:n[o].nickName,displayMode:n[o].displayMode,inited:!0}),e._students_inited.push(n[o].id);t()})}},{key:"pub_parseStyle",value:function(t){return e._tempEl.style.cssText=t,e._tempEl.style}},{key:"pub_initAudio",value:function(){e._common_audio=document.getElementById("common_audio"),e._ding_audio=document.getElementById("ding_audio"),e._dingend_audio=document.getElementById("dingend_audio"),e._btn_audio=document.getElementById("btn_audio"),e._correct_audio=document.getElementById("correct_audio"),e._wrong_audio=document.getElementById("wrong_audio"),e._topad_audio=document.getElementById("topad_audio"),e._goodjob_audio=document.getElementById("goodjob_audio"),e._btn_back_audio=document.getElementById("btn_back_audio"),e._btn_page_audio=document.getElementById("btn_page_audio"),e._card_audio=document.getElementById("card_audio"),e._popup_audio=document.getElementById("popup_audio"),e._flips_audio=document.getElementById("card_flips"),e._clock_audio=document.getElementById("clock_audio"),e._write_audio=document.getElementById("write_audio"),e._like_bubble_audio=document.getElementById("like_bubble"),e._all_btn_click_audio=document.getElementById("all_btn_click")}},{key:"pub_playAllBtnClick",value:function(){e._all_btn_click_audio&&(e._all_btn_click_audio.currentTime=0,e._all_btn_click_audio.play())}},{key:"pub_playLikeBubble",value:function(){e._like_bubble_audio&&(e._like_bubble_audio.currentTime=0,e._like_bubble_audio.play())}},{key:"pub_playWrite",value:function(){e._write_audio&&(e._write_audio.currentTime=0,e._write_audio.play())}},{key:"pub_playClock",value:function(){e._clock_audio&&(e._clock_audio.currentTime=4.5,e._clock_audio.play())}},{key:"pub_playFlips",value:function(){e._flips_audio&&(e._flips_audio.currentTime=0,e._flips_audio.play())}},{key:"pub_playPopup",value:function(){e._popup_audio&&(e._popup_audio.currentTime=0,e._popup_audio.play())}},{key:"pub_playCard",value:function(){e._card_audio&&(e._card_audio.currentTime=0,e._card_audio.play())}},{key:"pub_playBtnPage",value:function(){e._btn_page_audio&&(e._btn_page_audio.currentTime=0,e._btn_page_audio.play())}},{key:"pub_playBtnBack",value:function(){e._btn_back_audio&&(e._btn_back_audio.currentTime=0,e._btn_back_audio.play())}},{key:"pub_playGoodjob",value:function(){e._goodjob_audio&&(e._goodjob_audio.currentTime=0,e._goodjob_audio.play())}},{key:"pub_playDing",value:function(){e._ding_audio&&(e._ding_audio.currentTime=0,e._ding_audio.play())}},{key:"pub_playDingend",value:function(){e._dingend_audio&&(e._dingend_audio.currentTime=0,e._dingend_audio.play())}},{key:"pub_playToPad",value:function(){e._topad_audio&&(e._topad_audio.currentTime=0,e._topad_audio.play())}},{key:"pub_playBtnTab",value:function(){e._btn_audio&&(e._btn_audio.currentTime=0,e._btn_audio.play())}},{key:"pub_playCorrect",value:function(){e._correct_audio&&(e._correct_audio.currentTime=0,e._correct_audio.play())}},{key:"pub_playWrong",value:function(){e._wrong_audio&&(e._wrong_audio.currentTime=0,e._wrong_audio.play())}},{key:"pub_playStudentBubble",value:function(){var e=document.getElementById("student_bubble");e&&(e.currentTime=0,e.paused&&e.play())}},{key:"pub_stop",value:function(){null!=e._common_audio.onended&&e._common_audio.onended.call(e._common_audio,new Event("ended")),e._common_audio.oncanplaythrough=null,isNaN(e._common_audio.duration)||e._common_audio.paused||e._common_audio.pause()}},{key:"pub_play",value:function(t,n){e.pub_stop(),t=o.nteString(t,"");var r=o.nteString(e._common_audio.getAttribute("src"),"");if(""!==t||""!==r){""!==t&&r!==t&&(e._common_audio.src=t);var i=function t(r){e._common_audio.onended=null,null!==n&&n(!0),e._common_audio.removeEventListener("error",t)};e._common_audio.onended=function(t){e._common_audio.onended=null,null!==n&&n(!!t),e._common_audio.removeEventListener("error",i)},e._common_audio.addEventListener("error",i),isNaN(e._common_audio.duration)?(e._common_audio.oncanplaythrough=function(t){0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.play(),e._common_audio.oncanplaythrough=null},e._common_audio.load()):(0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.oncanplaythrough=null,e._common_audio.play())}else null!=n&&n(!0)}},{key:"pub_set",value:function(t,n,r){e._isDvlp=n,e._lang=r,i.set(n)}},{key:"pub_addInitedStudent",value:function(t){for(var n=!0,r=0,o=e._students_inited.length;r<o;r++){e._students_inited[r]===t.id&&(n=!1)}n&&e._students_inited.push(t.id);var i=e._start_idx>0&&e._students.length>0&&e._students_inited.length>=e._students.length;return i&&(window.clearTimeout(e._start_idx),e._start_idx=-1),i}},{key:"pub_start",value:function(t){0===e._students.length||e._students_inited.length>=e._students.length?t():e._start_idx=window.setTimeout(t,2e3)}},{key:"pub_clear",value:function(){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop()}},{key:"isMobile",get:function(){return e._isMobile}},{key:"tempEl",get:function(){return e._tempEl}},{key:"students",get:function(){return e._students}},{key:"student",get:function(){return e._student}},{key:"lang",get:function(){return e._lang}},{key:"isDvlp",get:function(){return e._isDvlp}},{key:"data_url",get:function(){return e._data_url}},{key:"lesson",get:function(){return e._lesson}},{key:"book",get:function(){return e._book}},{key:"nextBook",get:function(){return e._nextBook}},{key:"prevBook",get:function(){return e._prevBook}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();a._isMobile=!1,a._students=[],a._students_inited=[],a._student=null,a._lang="ko",a._isDvlp=!1,a._data_url="../data/",a._lesson="",a._book="",a._nextBook=!1,a._prevBook=!1,a._start_idx=-1,a.isStarted=!1,t.App=a},function(e,t){e.exports=_},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.wait=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){o.delay(t,e)}));case 1:case"end":return t.stop()}},t)}))},t.getTimeStr=function(e,t){var n=Math.round(t/1e3),r=Math.round(e/1e3),o=Math.floor(r/60),i=Math.floor(o/60),s="";return o%=60,i>0||n>=3600?(s=i+":",s+=o>=10?o+":":"0"+o+":"):n>=600?s+=o>=10?o+":":"0"+o+":":s=o+":",s+=(r%=60)>=10?r:"0"+r},t.getBounds=function(e){var t={left:0,top:0,width:0,height:0};if(!e)return t;try{var n=e.getBoundingClientRect();t.left=n.left,t.top=n.top,t.width=n.width,t.height=n.height}catch(e){}var r=e.ownerDocument,o=r.body,i=r.documentElement;t.left=t.left-(i.clientLeft||o.clientLeft||0),t.top=t.top-(i.clientTop||o.clientTop||0);var s=r.defaultView;return t.left+=s.pageXOffset||i.scrollLeft||o.scrollLeft,t.top+=s.pageYOffset||i.scrollTop||o.scrollTop,t}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=!1;t.set=function(e){i=e},t.finishContentPage=function(){if(!i)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,n){if(!i)try{window.tsoc_o.startStudentReportProcess(e,t,n)}catch(e){}},t.hideStudentReportUI=function(){if(!i)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!i)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!i)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!i)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!i)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,n){if(!i)try{window.psoc_o.uploadStudentReport(e,t,n)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||i)if(6!==e||i)if(7!==e||i){if(8===e)if(i)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(i)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,n){var r={type:t,data:n};if(i)try{window.top.tsoc_o.sendPADToID(e,r)}catch(e){}else try{window.tsoc_o.sendPADToID(e,r)}catch(e){}},t.sendPAD=function(e,t){var n={type:e,data:t};if(i)try{window.top.tsoc_o.sendAll(n)}catch(e){}else try{window.tsoc_o.sendAll(n)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){var n={type:e,data:t};if(i)try{window.opener.tsoc_o.sendTeacher(n)}catch(e){}else try{window.psoc_o.sendTeacher(n)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e){try{window.psoc_o.uploadImageToServer(e)}catch(e){}},t.getStudents=function(e){if(i)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(){if(!i)try{window.psoc_o.startCamera()}catch(e){}},t.startCustomCamera=function(e){if(!i)try{window.psoc_o.startCustomCamera(e)}catch(e){}},t.stopCamera=function(){if(!i)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(){if(!i)try{window.psoc_o.switchCamera()}catch(e){}},t.startVideoRecord=function(){if(!i)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!i)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!i)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.getPreviewResult=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewResult(function(e){n||(n=!0,t(e))},e),o.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewDmsResult=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewDmsResult(function(e){n||(n=!0,t(e))},e),o.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewResultClass=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewResultClass(function(e){n||(n=!0,t(e))},e),o.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))},t.getPreviewResultMember=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewResultMember(function(e){n||(n=!0,t(e))},e),o.delay(function(){n||(n=!0,t([]))},5e3)}}));case 1:case"end":return t.stop()}},t)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HIDE={opacity:0,pointerEvents:"none"};t.HIDE_ANI={opacity:0,pointerEvents:"none",transitionProperty:"opacity",transitionDuration:"0.6s"};t.NONE={display:"none"}},function(e,t,n){"use strict";function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),_=n(2),m=n(1),y=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).m_pID=-1,n._inited=n._inited.bind(u(n)),n._onClick=n._onClick.bind(u(n)),n}return l(t,h.Component),s(t,[{key:"_inited",value:function(e){var t=this;!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",function(n){if(!(t.m_pID>=0)){if(t.m_pID=n.pointerId,!t.props.disableCapture)try{e.setPointerCapture(t.m_pID)}catch(e){}t.props.onMouseDown&&t.props.onMouseDown(n)}}),e.addEventListener("pointerup",function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseUp&&t.props.onMouseUp(n)}}),e.addEventListener("pointerleave",function(n){if(t.props.disableCapture){if(t.m_pID!==n.pointerId)return;try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1}t.props.onMouseLeave&&t.props.onMouseLeave(n)}),e.addEventListener("pointercancel",function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseLeave&&t.props.onMouseLeave(n)}}))}},{key:"_onClick",value:function(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}},{key:"componentDidUpdate",value:function(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}]),t}();d([_.observable],y.prototype,"m_pID",void 0);var v=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).m_on=!1,n.m_on=!0===e.on,n}return l(t,y),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),h.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n},this.props.children)}}]),t}();d([_.observable],v.prototype,"m_on",void 0),v=d([m.observer],v),t.ToggleBtn=v;var b=function(e){function t(e){return o(this,t),a(this,c(t).call(this,e))}return l(t,v),s(t,[{key:"play",value:function(){var e=this;this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,function(t){e.m_on&&(e.m_on=!1,e.props.onPause&&e.props.onPause(t))}))}},{key:"_onClick",value:function(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),r(c(t.prototype),"_onClick",this).call(this,e)}}]),t}();d([_.action],b.prototype,"play",null),d([_.action],b.prototype,"_onClick",null),b=d([m.observer],b),t.AudioBtn=b;var g=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).m_on=!1,n.m_on=!0===e.on,n}return l(t,y),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),h.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n,src:this.props.src,useMap:this.props.useMap})}}]),t}();d([_.observable],g.prototype,"m_on",void 0),g=d([m.observer],g),t.ImgBtn=g},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=n(1),f=n(44),d=n(12),h=.3,_=.5,m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=o(this,i(t).call(this,e))).m_btnH=0,n.m_max=0,n.m_sy=-1,n.m_vy=-1,n.m_time=-1,n.m_bSend=!1,n.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},n._ref=function(e){if(!(n.m_max>0)&&e){e.setAttribute("touch-action","none");var t=window.getComputedStyle(e),r=d.nteFloat(t.height,0),o=d.nteFloat(t.bottom,0);r>0&&(n.m_btnH=r,n.m_max=r+o+10,n.props.view||(n.m_state.y=n.m_max))}},n._down=function(e){n.m_state.isOn||n.m_state.disabled||(n.m_state.y=n.props.originY,n.m_state.alpha=1,n.m_state.tDur=0,n.m_state.aDur=0,n.m_state.isOn=!0,n.m_vy=0,n.m_time=Date.now())},n._start=function(e,t){n.m_sy=t.y,n.m_bSend=!0},n._drag=function(e,t){if(n.m_state.isOn&&!n.m_state.disabled){var r=t.y-n.m_sy;"teacher"===n.props.type?(t.deltaY<-1?n.m_bSend=!1:t.deltaY>=0&&(n.m_bSend=!0),r<0&&(r=0)):(t.deltaY>1?n.m_bSend=!1:t.deltaY<=0&&(n.m_bSend=!0),r>0&&(r=0)),!1===n.props.preventDrag&&(n.m_state.y=r+n.props.originY);var o=Date.now();n.m_vy=t.deltaY/(o-n.m_time),n.m_time=o}},n._stop=function(e,t){if(n.m_state.isOn&&!n.m_state.disabled)if(n.m_bSend){var r=n.m_vy*_*1e3,o=t.y-n.m_sy;"teacher"===n.props.type?(r<n.m_btnH?r=n.m_btnH:r>4*n.m_btnH&&(r=4*n.m_btnH),o<0&&(o=0)):(-1*r<n.m_btnH?r=-n.m_btnH:-1*r>4*n.m_btnH&&(r=-4*n.m_btnH),o>0&&(o=0)),n.m_state.tDur=_,n.m_state.aDur=_,n.m_state.alpha=0,n.m_state.y=o+r+n.props.originY,n.props.onSend()}else n.m_state.isOn=!1,n.m_state.tDur=h,n.m_state.aDur=0,n.m_state.y=n.props.originY},e.sended?(n.m_state.alpha=0,n.m_state.disabled=!0):e.view?(n.m_state.y=e.originY,n.m_state.alpha=1,n.m_state.tDur=h,n.m_state.aDur=0,n.m_state.isOn=!1,n.m_state.disabled=!1):e.view||(n.m_state.y=e.originY,n.m_state.alpha=0,n.m_state.tDur=h,n.m_state.aDur=h,n.m_state.isOn=!1,n.m_state.disabled=!0),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=h):(this.m_state.tDur=h,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=h,this.m_state.aDur=h,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=h,this.m_state.aDur=0)}},{key:"render",value:function(){var e=this.m_state,t=e.y,n=e.tDur,r=e.aDur,o=e.alpha,i=e.isOn,s=e.disabled,a={transform:"translateY(".concat(t,"px)"),transition:"transform ".concat(n,"s, opacity ").concat(r/2,"s ").concat(r/2,"s"),opacity:o,pointerEvents:s||!this.props.view?"none":"auto"},c=[];return"pad"===this.props.type?c.push("fel_toteacher"):c.push("fel_topad"),i&&c.push("on"),u.createElement(f.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},u.createElement("button",{ref:this._ref,className:c.join(" "),style:a}))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([l.observable],m.prototype,"m_state",void 0),m=c([p.observer],m),t.default=m},function(e,t){e.exports=ReactIdSwiper},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);Date.now||(Date.now=function(){return(new Date).getTime()});var o=0;function i(){return s().toString(36)}function s(){var e=Date.now();return e>o?o=e:o+=1,o}t.getUnic=i,t.getUnicNum=s,t.getUnicUrl=function(e){if(!e)return"";var t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+i():t+"?t="+i()),t},t.nteUInt=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return isNaN(e)||e<0?t:Math.round(e);var n=parseInt(String(e),10);return isNaN(n)||n<0?t:n},t.nteInt=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return Math.round(e);var n=parseInt(String(e),10);return isNaN(n)?t:n},t.nteFloat=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return e;var n=parseFloat(String(e));return isNaN(n)?t:n},t.nteString=function(e,t){return r.isNullOrUndefined(e)?t:String(e)},t.nteBool=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isBoolean(e))return e;var n=String(e);return"true"===n||"false"!==n&&t},t.intToHTMLcolor=function(e){var t=e-0,n=(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16);return n="#000000".substring(0,7-n.length)+n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){var t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}var n=[];return n.push(e),n}return[]},t.getDateStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",t=new Date,n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate();return n+e+(r<10?"0"+r:""+r)+e+(o<10?"0"+o:""+o)},t._toStringTimestamp=function(e){var t=e.getFullYear(),n=e.getMonth()+1+"";parseInt(n,10)<10&&(n="0"+n);var r=e.getDate()+"";return parseInt(r,10)<10&&(r="0"+r),t+"-"+n+"-"+r+" "+e.toTimeString().substr(0,8)}},function(e,t,n){"use strict";function r(e,t,n,r,o){if(!(!e||e<=0||e>4)){var i={answer:e,correct:"",choices:[],inputed:""};return 1===e?i.correct=t:2===e?i.correct=n:3===e?i.correct=r:4===e&&(i.correct=o),i.correct&&""!==i.correct?t&&""!==t?(i.choices[0]=t,n&&""!==n?(i.choices[1]=n,r&&""!==r?(i.choices[2]=r,o&&""!==o&&(i.choices[3]=o),i):i):null):null:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.COLORS=["pink","green","orange","purple"],function(e){e[e.TYPE_1=1]="TYPE_1",e[e.TYPE_2=2]="TYPE_2",e[e.TYPE_3=3]="TYPE_3",e[e.TYPE_4=4]="TYPE_4",e[e.TYPE_5=5]="TYPE_5",e[e.TYPE_6=6]="TYPE_6",e[e.TYPE_7=7]="TYPE_7"}(t.VisualType||(t.VisualType={})),function(e){e[e.IMAGE=1]="IMAGE",e[e.VIDEO=2]="VIDEO"}(t.WarmupType||(t.WarmupType={})),t.TYPE_COM_HEADERS=["#A677DC","#1CC1AD","#4f7ad1"],t.TYPE3_HEADERS=["#b07ae1","#1cc9af","#4f7ad1","#4f7ad1"],t.initData=function(e){if(e.app_graphic_title=e.graphic[0].title,e.graphic.shift(),1===e.visualizing_type)for(;e.graphic.length>4;)e.graphic.pop();else if(4===e.visualizing_type||7===e.visualizing_type)for(;e.graphic.length>2;)e.graphic.pop();else for(;e.graphic.length>3;)e.graphic.pop();for(var t=0;t<e.graphic.length;t++){var n=e.graphic[t];n.app_drops=[];var o=r(n.answer,n.choice_1,n.choice_2,n.choice_3,n.choice_4);o&&(n.app_drops[0]=o,(o=r(n.answer2,n.choice2_1,n.choice2_2,n.choice2_3,n.choice2_4))&&(n.app_drops[1]=o,(o=r(n.answer3,n.choice3_1,n.choice3_2,n.choice3_3,n.choice3_4))&&(n.app_drops[2]=o,(o=r(n.answer4,n.choice4_1,n.choice4_2,n.choice4_3,n.choice4_4))&&(n.app_drops[3]=o))))}return e};var o=c(206,116,225,1),i=c(34,205,172,1),s=c(255,186,0,1),a=c(116,113,236,1);function c(e,t,n,r){return{r:e,g:t,b:n,a:r}}function u(e){var t=e.r,n=e.g,r=e.b,o=e.a;return"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,")")}t.drawBalloon=function(e,t,n,r,l,p,f,d,h,_,m,y,v){var b;b=p<t?1.5*(t-p):1.5*(p-(t+r)),_||(_=0),m||(m=5),y||(y=2),v||(v=c(0,0,0,.2));var g,w=(_>0||_<0||m>0||m<0||y>0)&&v.a>0;(g="green"===h?i:"orange"===h?s:"purple"===h?a:o).a=1,e.lineCap="butt",e.lineJoin="miter",e.strokeStyle="transparent",e.fillStyle=u(g);var E=e.createLinearGradient(0,0,0,l);E.addColorStop(0,"rgba(255, 255, 255, 1)"),E.addColorStop(1,"rgba(255, 255, 255, 0)");var x=e.createLinearGradient(0,0,0,l);g.a=.4,x.addColorStop(0,u(g)),g.a=1,x.addColorStop(1,u(g)),e.beginPath(),e.moveTo(t+r,n+l-d),d>0&&e.arc(t+r-d,n+l-d,d,0,Math.PI/2),e.lineTo(t+d,n+l),d>0&&e.arc(t+d,n+l-d,d,Math.PI/2,Math.PI),p<t&&(e.lineTo(t,f+b/2),e.lineTo(p,f),e.lineTo(t,f-b/2)),e.lineTo(t,n+d),d>0&&e.arc(t+d,n+d,d,Math.PI,3*Math.PI/2),e.lineTo(t+r-d,n),d>0&&e.arc(t+r-d,n+d,d,3*Math.PI/2,2*Math.PI),p>t&&(e.lineTo(t+r,f-b/2),e.lineTo(p,f),e.lineTo(t+r,f+b/2),e.closePath()),e.closePath(),w?(e.shadowColor=u(v),e.shadowBlur=y,e.shadowOffsetX=_,e.shadowOffsetY=m,e.fill(),e.globalCompositeOperation="destination-out",e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),e.globalCompositeOperation="source-over",e.fillStyle=E,e.fill(),e.fillStyle=x,e.fill()):(e.globalCompositeOperation="source-over",e.fillStyle=E,e.fill(),e.fillStyle=x,e.fill()),e.globalCompositeOperation="source-over"}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),d=n(2),h=n(1),_=n(5),m=n(12),y=n(9);n(47);var v=20,b=9,g=8,w=13,E=48,x=49,k=50,S=51,O=52,P=53,C=54,j=55,T=56,R=57,N=65,D=90,I=188,A=222,M=190,L=32,B=-1,H=0,z=null,q=null,F=null,U=-1,W=-1,Y=null,V=null,G=null,J=null,$=null;var K=function e(){u(this,e),this.state="hide",this.capslock=!1,this.disableDone=!1};p([d.observable],K.prototype,"state",void 0),p([d.observable],K.prototype,"capslock",void 0),p([d.observable],K.prototype,"disableDone",void 0);var X=new K;t.state=X;var Z=_.throttle(function(){if(!(U<0))if(F)if(0===U)F.done();else{var e=ee(U,X.capslock);F.keyDown(U,e)}else if(z){if(document.activeElement!==z&&z.focus(),0===U)return void(J?J():"on"===X.state&&(X.state="off"));if(U===w&&$)return void $();var t=m.nteInt(z.selectionStart,-1),n=m.nteInt(z.selectionEnd,-1);if(t<0||n<0)return;var r=ee(U,X.capslock),o=z.value,i=o.substring(0,t),s=o.substring(n);U===g&&t>0&&(i=i.substring(0,i.length-1));var a=i+r+s;z.value=a;var c=(i+r).length;z.setSelectionRange(c,c),Y&&Y(a)}else if(q){document.activeElement!==q&&q.focus();var u=m.nteInt(q.selectionStart,-1),l=m.nteInt(q.selectionEnd,-1);if(u<0||l<0||U<0)return;var p=q.value,f=p.length,d=ee(U,X.capslock);if(0===U)return void(J&&J());if(U===w)return void($&&$());if(U===b)return void(V&&V());if(U===g){if(0===u&&0===l)return void(G&&G())}else if(W>0){if(f>W)return q.value=p.substring(0,W),q.selectionStart=W,void(q.selectionEnd=W);if(f===W&&u===W&&l===W)return void(V&&V())}var h,_=p.substring(0,u),y=p.substring(l),v=(_+d).length;if(U===g)u>0&&u===l&&(_=_.substring(0,_.length-1)),h=_+y,v=_.length,q.value=h,q.selectionStart=v,q.selectionEnd=v,Y&&Y(h);else{var E=(h=_+d+y).length;W>0&&E>W&&(h=h.substring(0,W)),E=h.length,(v=(_+d).length)>E&&(v=E),q.value=h,q.selectionStart=v,q.selectionEnd=v,Y&&Y(h),W>0&&v>=E&&V&&V()}}},60),Q=function e(t){U<0?Z.cancel():(H>30&&Z(),H++,B=window.requestAnimationFrame(e))};function ee(e,t){var n;return e===L?" ":e===b?"\t":e===w?"\n":e===g?"":e===I?t?"-":",":e===A?t?'"':"'":e===M?t?"?":".":e>=N&&e<=D?(n=String.fromCharCode(e),t?n:n.toLowerCase()):t?e===E?")":e===x?"!":e===k?"@":e===S?"#":e===O?"$":e===P?"%":e===C?"^":e===j?"&":e===T?"*":e===R?"(":"":String.fromCharCode(e)}t.setCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Y=e,G=t,V=n,J=r,$=o},t.setInputs=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&"keyDown"in(t=e)&&"done"in t?(F=e,q=null,z=null):e instanceof HTMLTextAreaElement?(z=e,q=null,F=null):e instanceof HTMLInputElement?(q=e,z=null,F=null):(q=null,z=null,F=null,U=-1),W=n};var te=function(e){function t(e){var n;return u(this,t),(n=i(this,s(t).call(this,e)))._keyDown=function(){n.props.keyCode!==v?(B>=0&&(window.cancelAnimationFrame(B),B=-1),Z.cancel(),U=n.props.keyCode,Z(),H=0,B=window.requestAnimationFrame(Q)):X.capslock=!X.capslock},n._keyUp=function(){H=0,B>=0&&(window.cancelAnimationFrame(B),B=-1),Z.cancel(),U=-1},n._leave=function(){H=0,B>=0&&(window.cancelAnimationFrame(B),B=-1),Z.cancel(),U=-1},n}return a(t,f.Component),o(t,[{key:"render",value:function(){return f.createElement(y.ToggleBtn,{className:this.props.className,onMouseDown:this._keyDown,onMouseUp:this._keyUp,onMouseLeave:this._leave,disableCapture:!0,on:this.props.on},this.props.children)}}]),t}(),ne=function(e){function t(){var e;return u(this,t),(e=i(this,s(t).apply(this,arguments)))._on=function(){"off"===X.state&&(X.state="on")},e._off=function(){"on"===X.state&&(X.state="off")},e}return a(t,f.Component),o(t,[{key:"render",value:function(){var e=X.state,t=X.capslock,n=X.disableDone;return f.createElement("div",{className:"keyboard-box "+e+(t?" uppercase":"")},f.createElement("div",null,f.createElement(te,{className:"s",keyCode:x},ee(x,t)),f.createElement(te,{className:"s",keyCode:k},ee(k,t)),f.createElement(te,{className:"s",keyCode:S},ee(S,t)),f.createElement(te,{className:"s",keyCode:O},ee(O,t)),f.createElement(te,{className:"s",keyCode:P},ee(P,t)),f.createElement(te,{className:"s",keyCode:C},ee(C,t)),f.createElement(te,{className:"s",keyCode:j},ee(j,t)),f.createElement(te,{className:"s",keyCode:T},ee(T,t)),f.createElement(te,{className:"s",keyCode:R},ee(R,t)),f.createElement(te,{className:"s",keyCode:E},ee(E,t)),f.createElement(te,{className:"s",keyCode:I},ee(I,t)),f.createElement(te,{className:"s",keyCode:A},ee(A,t)),f.createElement(te,{className:"s",keyCode:M},ee(M,t)),f.createElement(te,{className:"s key_back",keyCode:g})),f.createElement("div",null,f.createElement(te,{className:"m alpha",keyCode:81},ee(81,t)),f.createElement(te,{className:"m alpha",keyCode:87},ee(87,t)),f.createElement(te,{className:"m alpha",keyCode:69},ee(69,t)),f.createElement(te,{className:"m alpha",keyCode:82},ee(82,t)),f.createElement(te,{className:"m alpha",keyCode:84},ee(84,t)),f.createElement(te,{className:"m alpha",keyCode:89},ee(89,t)),f.createElement(te,{className:"m alpha",keyCode:85},ee(85,t)),f.createElement(te,{className:"m alpha",keyCode:73},ee(73,t)),f.createElement(te,{className:"m alpha",keyCode:79},ee(79,t)),f.createElement(te,{className:"m alpha",keyCode:80},ee(80,t)),f.createElement(te,{className:"b key_shift",on:X.capslock,keyCode:v})),f.createElement("div",null,f.createElement(te,{className:"m alpha",keyCode:N},ee(N,t)),f.createElement(te,{className:"m alpha",keyCode:83},ee(83,t)),f.createElement(te,{className:"m alpha",keyCode:68},ee(68,t)),f.createElement(te,{className:"m alpha",keyCode:70},ee(70,t)),f.createElement(te,{className:"m alpha",keyCode:71},ee(71,t)),f.createElement(te,{className:"m alpha",keyCode:72},ee(72,t)),f.createElement(te,{className:"m alpha",keyCode:74},ee(74,t)),f.createElement(te,{className:"m alpha",keyCode:75},ee(75,t)),f.createElement(te,{className:"m alpha",keyCode:76},ee(76,t)),f.createElement(te,{className:"b key_enter",keyCode:w})),f.createElement("div",null,f.createElement(te,{className:"m alpha",keyCode:D},ee(D,t)),f.createElement(te,{className:"m alpha",keyCode:88},ee(88,t)),f.createElement(te,{className:"m alpha",keyCode:67},ee(67,t)),f.createElement(te,{className:"m alpha",keyCode:86},ee(86,t)),f.createElement(te,{className:"m alpha",keyCode:66},ee(66,t)),f.createElement(te,{className:"m alpha",keyCode:78},ee(78,t)),f.createElement(te,{className:"m alpha",keyCode:77},ee(77,t)),f.createElement(te,{className:"b key_space",keyCode:L}),f.createElement(te,{className:"b done"+(n?" dis":""),keyCode:0})),f.createElement(y.ToggleBtn,{className:"key_hide",onClick:this._off}),f.createElement(y.ToggleBtn,{className:"key_view",onClick:this._on}))}}]),t}();ne=p([h.observer],ne),t.Keyboard=ne},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(2),p=n(1),f=n(17),d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=o(this,i(t).call(this,e)))._div=null,n._bndW=0,n._width=0,n._fontSize=0,n._myW=0,n._numOfLine=0,n._ref=function(e){!n._div&&e&&(n._div=e,n.props.onRef&&n.props.onRef(e))},n._aniFrame=function(e){n._canCalc()&&(n._calc(),window.requestAnimationFrame(n._aniFrame))},n._resized=function(e,t){n._myW=e,window.requestAnimationFrame(n._aniFrame)},n._fontSize=n.props.maxSize?n.props.maxSize:0,n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"_canCalc",value:function(){return!!this.props.view&&(!(this._myW<=0)&&(!!this._div&&!(this._width>0)))}},{key:"_calc",value:function(){if(this._canCalc()&&this._div){var e=this._div.getBoundingClientRect(),t=this._myW-e.width;if(!(t<-1||t>1)){var n=this._div.childNodes;if(0!==n.length){var r=0,o=-100,i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=0;n.forEach(function(e,t){var n=0,c=0;if(e instanceof HTMLElement){var u=e,l=window.getComputedStyle(u);if("absolute"===l.position);else if("inline"===l.display){var p=l.marginRight?parseInt(l.marginRight,10):0,f=l.marginLeft?parseInt(l.marginLeft,10):0;isNaN(p)&&(p=0),isNaN(f)&&(f=0);for(var d=u.getClientRects(),h=0;h<d.length;h++){var _=d.item(h);if(_){var m=_.top,y=_.bottom,v=_.left-f,b=_.right+p;0===a?(o=(m+y)/2,r=1):(o<m||o>y)&&(o=(m+y)/2,r++),i=Math.min(i,v),s=Math.max(s,b),a++}}}else{var g=u.getBoundingClientRect(),w=l.marginRight?parseInt(l.marginRight,10):0,E=l.marginLeft?parseInt(l.marginLeft,10):0;isNaN(w)&&(w=0),isNaN(E)&&(E=0),n=w,c=E;var x=g.top,k=g.bottom,S=g.left-c,O=g.right+n;k-x>0&&(0===a?(o=(x+k)/2,r=1):(o<x||o>k)&&(o=(x+k)/2,r++),i=Math.min(i,S),s=Math.max(s,O),a++)}}else{var P=document.createRange();P.selectNodeContents(e);for(var C=P.getClientRects(),j=0;j<C.length;j++){var T=C.item(j);if(T){var R=T.top,N=T.bottom,D=T.left,I=T.right;0===a?(o=(R+N)/2,r=1):(o<R||o>N)&&(o=(R+N)/2,r++),i=Math.min(i,D),s=Math.max(s,I),a++}}}}),this._numOfLine=r;var c=this.props.maxLineNum?this.props.maxLineNum:1;if(c<1&&(c=1),r>c){var u=this.props.minSize?this.props.minSize:0;this._fontSize>0&&u>0&&this._fontSize>u?this._fontSize--:this._width=Math.ceil(s-i+2)}else a>0&&(this._width=Math.ceil(s-i+2))}}}}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)):!this.props.view&&e.view&&(this._width=0),this.props.view&&this.props.rcalcNum&&this.props.rcalcNum!==e.rcalcNum&&(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)),0===this._fontSize&&this.props.maxSize&&(this._fontSize=this.props.maxSize)}},{key:"render",value:function(){var e,t=this.props.className,n={whiteSpace:"normal"};return this._fontSize>0&&(n.fontSize=this._fontSize+"px"),this.props.lineHeight&&(n.lineHeight=this.props.lineHeight+"%"),this._width>0?(n.width=this._width+"px",n.display="inline-block",e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e):(n.width="100%",n.display="inline-block",this.props.viewWhenInit||(n.opacity=.01),e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e),u.createElement(u.Fragment,null,u.createElement("div",{ref:this._ref,className:t,style:n,onClick:this.props.onClick},this.props.children,u.createElement(f.default,{handleWidth:!0,handleHeight:!0,onResize:this._resized})))}}])&&r(n.prototype,a),c&&r(n,c),t}();c([l.observable],d.prototype,"_width",void 0),c([l.observable],d.prototype,"_fontSize",void 0),d=c([p.observer],d),t.default=d},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(18),s=n(24),a=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r},c=n(3);var u=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},l=n(25),p="object"==typeof self&&self&&self.Object===Object&&self,f=l.a||p||Function("return this")(),d=function(){return f.Date.now()},h=f.Symbol,_=Object.prototype,m=_.hasOwnProperty,y=_.toString,v=h?h.toStringTag:void 0;var b=function(e){var t=m.call(e,v),n=e[v];try{e[v]=void 0;var r=!0}catch(e){}var o=y.call(e);return r&&(t?e[v]=n:delete e[v]),o},g=Object.prototype.toString;var w=function(e){return g.call(e)},E="[object Null]",x="[object Undefined]",k=h?h.toStringTag:void 0;var S=function(e){return null==e?void 0===e?x:E:k&&k in Object(e)?b(e):w(e)};var O=function(e){return null!=e&&"object"==typeof e},P="[object Symbol]";var C=function(e){return"symbol"==typeof e||O(e)&&S(e)==P},j=NaN,T=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,D=/^0o[0-7]+$/i,I=parseInt;var A=function(e){if("number"==typeof e)return e;if(C(e))return j;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(T,"");var n=N.test(e);return n||D.test(e)?I(e.slice(2),n?2:8):R.test(e)?j:+e},M="Expected a function",L=Math.max,B=Math.min;var H=function(e,t,n){var r,o,i,s,a,c,l=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(M);function _(t){var n=r,i=o;return r=o=void 0,l=t,s=e.apply(i,n)}function m(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-l>=i}function y(){var e=d();if(m(e))return v(e);a=setTimeout(y,function(e){var n=t-(e-c);return f?B(n,i-(e-l)):n}(e))}function v(e){return a=void 0,h&&r?_(e):(r=o=void 0,s)}function b(){var e=d(),n=m(e);if(r=arguments,o=this,c=e,n){if(void 0===a)return function(e){return l=e,a=setTimeout(y,t),p?_(e):s}(c);if(f)return a=setTimeout(y,t),_(c)}return void 0===a&&(a=setTimeout(y,t)),s}return t=A(t)||0,u(n)&&(p=!!n.leading,i=(f="maxWait"in n)?L(A(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=o=a=void 0},b.flush=function(){return void 0===a?s:v(d())},b},z="Expected a function";var q=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(z);return u(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),H(e,t,{leading:r,maxWait:t,trailing:o})},F={debounce:H,throttle:q},U=function(e){return F[e]},W=function(e){return"function"==typeof e},Y=function(){return"undefined"==typeof window};function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,$(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"render",value:function(){return this.props.children}}])&&G(n.prototype,o),i&&G(n,i),t}();function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){function t(e){var n,o,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,c=ee(t).call(this,e),n=!c||"object"!==Z(c)&&"function"!=typeof c?te(o):c,re(te(n),"cancelHandler",function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)}),re(te(n),"rafClean",function(){n.raf&&n.raf.cancel&&(n.raf.cancel(),n.raf=null)}),re(te(n),"toggleObserver",function(e){var t=n.getElement();t&&n.resizeObserver[e]&&n.resizeObserver[e](t)}),re(te(n),"getElement",function(){var e=n.props.querySelector;if(!Y()){if(e)return document.querySelector(e);var t=n.element&&Object(i.findDOMNode)(n.element);if(t)return t.parentElement}}),re(te(n),"createUpdater",function(){return n.rafClean(),n.raf=a(function(e){var t=e.width,r=e.height,o=n.props.onResize;W(o)&&o(t,r),n.setState({width:t,height:r})}),n.raf}),re(te(n),"createResizeHandler",function(e){var t=n.state,r=t.width,o=t.height,i=n.props,s=i.handleWidth,a=i.handleHeight;if(s||a){var c=n.createUpdater();e.forEach(function(e){var t=e&&e.contentRect||{},i=t.width,u=t.height,l=s&&r!==i||a&&o!==u;!n.skipOnMount&&l&&!Y()&&c({width:i,height:u}),n.skipOnMount=!1})}}),re(te(n),"onRef",function(e){n.element=e}),re(te(n),"getRenderType",function(){var e=n.props,t=e.render,o=e.children;return W(t)?"renderProp":W(o)?"childFunction":Object(r.isValidElement)(o)?"child":Array.isArray(o)?"childArray":"parent"}),re(te(n),"getTargetComponent",function(){var e=n.props,t=e.render,o=e.children,i=e.nodeType,s=n.state,a={width:s.width,height:s.height};switch(n.getRenderType()){case"renderProp":return Object(r.cloneElement)(t(a),{key:"resize-detector"});case"childFunction":return Object(r.cloneElement)(o(a));case"child":return Object(r.cloneElement)(o,a);case"childArray":return o.map(function(e){return Object(r.cloneElement)(e,a)});default:return Object(r.createElement)(i)}});var u=e.skipOnMount,l=e.refreshMode,p=e.refreshRate,f=e.refreshOptions;n.state={width:void 0,height:void 0},n.skipOnMount=u,n.raf=null,n.element=null,n.unmounted=!1;var d=U(l);return n.resizeHandler=d?d(n.createResizeHandler,p,f):n.createResizeHandler,n.resizeObserver=new s.a(n.resizeHandler),n}var n,c,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,r["PureComponent"]),n=t,(c=[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return o.a.createElement(X,{ref:this.onRef},this.getTargetComponent())}}])&&Q(n.prototype,c),u&&Q(n,u),t}();oe.propTypes={handleWidth:c.bool,handleHeight:c.bool,skipOnMount:c.bool,refreshRate:c.number,refreshMode:c.string,refreshOptions:Object(c.shape)({leading:c.bool,trailing:c.bool}),querySelector:c.string,onResize:c.func,render:c.func,children:c.any,nodeType:c.node},oe.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,onResize:null,render:void 0,children:null,nodeType:"div"};var ie=oe;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ce(this,ue(i).apply(this,arguments))}var s,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(i,r.Component),s=i,(a=[{key:"render",value:function(){return o.a.createElement(ie,t,o.a.createElement(e,this.props))}}])&&ae(s.prototype,a),c&&ae(s,c),i}()};n.d(t,"withResizeDetector",function(){return pe});t.default=ie},function(e,t){e.exports=ReactDOM},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),c=r[n];n<i;c=r[++n])_(c)||!g(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,s={};function a(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return y(o)||(o=l(e,o,r)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}(e,n);if(i)return i;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(x(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return p(n)}var u,g="",k=!1,S=["{","}"];(d(n)&&(k=!0,S=["[","]"]),x(n))&&(g=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(g=" "+RegExp.prototype.toString.call(n)),w(n)&&(g=" "+Date.prototype.toUTCString.call(n)),E(n)&&(g=" "+p(n)),0!==s.length||k&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=k?function(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)P(t,String(s))?i.push(f(e,t,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(e,t,n,r,o,!0))}),i}(e,n,r,a,s):s.map(function(t){return f(e,n,r,a,t,k)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,g,S)):S[0]+g+S[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),P(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=_(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function _(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return g(e)&&"[object RegExp]"===k(e)}function g(e){return"object"==typeof e&&null!==e}function w(e){return g(e)&&"[object Date]"===k(e)}function E(e){return g(e)&&("[object Error]"===k(e)||e instanceof Error)}function x(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(v(i)&&(i=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=h,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=g,t.isDate=w,t.isError=E,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(31);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":"),[e.getDate(),O[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(32),t._extend=function(e,t){if(!t||!g(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function j(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t;if("function"!=typeof(t=e[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,r){e?n(e):t(r)});try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=C,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(j,t,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(30))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(2),f=n(1),d=n(5),h=n(17),_=n(15),m=n(6),y=n(12);n(48);var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=o(this,i(t).call(this,e))).m_top=0,n.m_cntH=0,n.m_bndH=0,n.m_sTop=0,n.m_sH=0,n.m_pid=-1,n._text="",n._selStart=0,n._selEnd=0,n._lineHeight=0,n._paddingVer=0,n._isSamsungDevice=!1,n._checkLimit=function(){if(!n.m_textarea)return!1;var e=n.m_textarea.value,t=!0;if(n.props.skipEnter&&(t=e.indexOf("/r")<0&&e.indexOf("/n")<0),n.props.maxLength&&n.props.maxLength>0&&e.length>n.props.maxLength&&(t=!1),n.props.maxLineNum&&n.props.maxLineNum>0&&n._lineHeight>0){var r=n.m_textarea.scrollHeight;Math.round((r-n._paddingVer)/n._lineHeight)>n.props.maxLineNum&&(t=!1)}return t?(n._text=e,n._selStart=n.m_textarea.selectionStart,n._selEnd=n.m_textarea.selectionEnd):(n.m_textarea.value=n._text,n.m_textarea.setSelectionRange(n._selStart,n._selEnd),n.props.onLimit&&n.props.onLimit()),t},n._onScroll=function(){n._calc()},n._onChange=function(){n.m_textarea&&(n._checkLimit(),n._calc(),n.props.onChange&&n.props.onChange(n.m_textarea.value))},n._onDone=function(){n.m_textarea&&n.props.onDone&&n.props.onDone(n.m_textarea.value)},n._onResize=function(e,t){n.m_bndH=t,n._calc()},n._onSelect=function(){n.m_textarea&&(n._selStart=n.m_textarea.selectionStart,n._selEnd=n.m_textarea.selectionEnd)},n._detectLineHeight=function(){if(n.m_textarea){var e=window.getComputedStyle(n.m_textarea),t=y.nteUInt(e.fontSize,0),r=e.lineHeight,o=y.nteUInt(r,0);n._paddingVer=y.nteUInt(e.paddingTop,0)+y.nteUInt(e.paddingBottom,0),r&&r.endsWith("%")?n._lineHeight=t*o/100:r&&r.endsWith("px")?n._lineHeight=o:n._lineHeight=o>0?t*o:1.2*t,101===n._lineHeight&&(n._isSamsungDevice=!0)}},n._refArea=function(e){!n.m_textarea&&e&&(n.m_textarea=e,n._detectLineHeight(),n.props.on&&(_.setInputs(n.m_textarea),_.setCallback(n._onChange,null,null,n._onDone)))},n._onFocus=function(e){n.m_textarea&&!n.props.on&&n.m_textarea.blur()},n._onBlur=function(e){n.m_textarea&&n.props.on&&n.m_pid<0&&n._focusArea()},n._refWrap=function(e){!n.m_wrap&&e&&(n.m_wrap=e)},n._refBar=function(e){if(!n.m_bar&&e){n.m_bar=e;var t=function(e){n._releasePID()},r=function(e){if(!n.props.preventScrollByBar&&n.m_textarea&&n.m_bar&&e.pointerId===n.m_pid){var t=n.m_textarea.scrollHeight,r=t-n.m_bndH,o=-r*e.clientY/n.m_bndH,i=.98*n.m_bndH;o>0?o=0:o<-r&&(o=-r),n.m_sTop=-1*o*i/t,n.m_sH=n.m_bndH*i/t,n.m_textarea.scrollTop=-o,n.m_top=o,n.m_cntH=t}};e.addEventListener("pointerdown",function(e){if(!n.props.preventScrollByBar&&!n.props.autoResize&&n.m_textarea&&n.m_bar&&!(n.m_pid>=0)){n.m_pid=e.pointerId;try{n.m_bar.setPointerCapture(n.m_pid)}catch(e){}r(e)}}),e.addEventListener("pointercancel",t),e.addEventListener("pointerup",t),e.addEventListener("pointerleave",t),e.addEventListener("pointermove",r)}},n._calc=d.throttle(function(){if(n.m_textarea&&!(n.m_bndH<=0))if(n._checkLimit())if(n.props.autoResize){n.m_textarea.scrollTop=0,n.m_sTop=0,n.m_sH=0,n.m_top=0,n.m_textarea.style.height="auto";var e=n.m_textarea.scrollHeight;n.m_textarea.style.height=e+"px",n.m_cntH=e}else{var t=n.m_textarea.scrollTop;if(n.props.chkLineHeight&&n._lineHeight>0)t=Math.round(t/n._lineHeight)*n._lineHeight,n.m_textarea.scrollTop=t;t*=-1;var r=n.m_textarea.scrollHeight;if(r>n.m_bndH){var o=.98*n.m_bndH;n.m_sTop=-1*t*o/r,n.m_sH=n.m_bndH*o/r}else n.m_sH=0;n.m_top=t,n.m_cntH=r}else n._calc()},n.props.autoResize?20:10),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(a=[{key:"_focusArea",value:function(){return u(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.wait(100);case 2:if(this.m_textarea&&this.props.on){e.next=4;break}return e.abrupt("return");case 4:this.m_textarea.focus();case 5:case"end":return e.stop()}},e,this)}))}},{key:"_releasePID",value:function(){if(this.m_pid>=0&&this.m_bar){try{this.m_bar.releasePointerCapture(this.m_pid)}catch(e){}this.m_pid=-1}}},{key:"componentDidUpdate",value:function(e){this.props.on&&!e.on?this.m_textarea&&(_.setInputs(this.m_textarea),_.setCallback(this._onChange,null,null,this._onDone),this._focusArea(),this._detectLineHeight()):!this.props.on&&e.on&&this._releasePID(),!this.props.view&&e.view?(this._releasePID(),this.m_textarea&&(this.m_textarea.value=""),this._text="",this._selStart=0,this._selEnd=0):this.props.view&&!e.view&&this._detectLineHeight()}},{key:"render",value:function(){var e,t=this.props,n=(t.view,t.autoResize),r=t.className,o=this.props.limitByCode?void 0:this.props.maxLength;return this._isSamsungDevice&&(e={lineHeight:"84px"}),l.createElement("div",{ref:this._refWrap,className:"k-tarea"+(r?" "+r:"")+(n?" auto-resize":"")},l.createElement("div",{className:"k-tarea-bg",style:{top:this.m_top+"px",height:this.m_cntH+"px"}}),l.createElement("textarea",{ref:this._refArea,disabled:!this.props.on,onSelect:this._onSelect,onScroll:this._onScroll,onChange:this._onChange,onFocus:this._onFocus,onBlur:this._onBlur,autoFocus:!1,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",rows:this.props.rows,spellCheck:!1,maxLength:o,style:e},this.props.children),l.createElement("div",{"touch-action":"none",className:"k-tarea-bar",hidden:this.m_sH<=0,ref:this._refBar},l.createElement("div",{className:"k-tarea-drag",style:{top:this.m_sTop+"px",height:this.m_sH+"px",pointerEvents:"none"}})),l.createElement(h.default,{handleWidth:!1,handleHeight:!0,onResize:this._onResize}))}},{key:"value",get:function(){return this.m_textarea?this.m_textarea.value:""}}])&&r(n.prototype,a),c&&r(n,c),t}();c([p.observable],v.prototype,"m_top",void 0),c([p.observable],v.prototype,"m_cntH",void 0),c([p.observable],v.prototype,"m_sTop",void 0),c([p.observable],v.prototype,"m_sH",void 0),v=c([f.observer],v),t.KTextArea=v},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(9),l=n(4),p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,s(t).apply(this,arguments)))._onClick=function(){e.props.disabled||(l.App.pub_playBtnTab(),e.props.onClick(e.props.num))},e}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c.Component),n=t,(r=[{key:"render",value:function(){return c.createElement(u.ToggleBtn,{className:this.props.className+" btn-mc-"+this.props.num,on:this.props.on,onClick:this._onClick,disabled:this.props.disabled},this.props.children)}}])&&o(n.prototype,r),p&&o(n,p),t}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),d=n(5),h=n(2),_=n(1),m=n(9),y=n(4),v=n(11).default,b=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments)))._onClick=function(){e.props.onClick(e.props.text),y.App.pub_playBtnTab()},e}return c(t,f.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.text;e.onClick;return f.createElement("div",{className:t,onClick:this._onClick},n)}}]),t}(),g=2,w=h.observable([0]),E=function(e){function t(e){var n;return r(this,t),(n=s(this,a(t).call(this,e)))._value="",n._on=!1,n._disableSelect=!1,n._viewResult=!1,n._viewCorrect=!1,n._zidx=2,n._onSelect=function(e){n._on&&(n._on=!1,n._disableSelect||(n._value=e,n.props.onChange(e)))},n._toggle=function(){if(y.App.pub_playBtnTab(),n._box){var e=n._box.querySelector(".options-box"),t=n._box.querySelector(".options-box.on");if(e){for(var r=n._box.getBoundingClientRect(),o=n._box.parentElement,i=n.props.className.startsWith("type_6")?"swiper-container":"table-item";o&&!o.className.startsWith(i);)o=o.parentElement;var s=r.bottom,a=o.getBoundingClientRect().bottom,c=e.offsetHeight,u=a-s;if(n._boxPositon=c<u?"bottom":"top",!n.props.className.includes("zoom-in")){var l=(n.props.isStudent?document.querySelector(".s_graphic_result"):document.querySelector(".GRAPHICORANIZER")).querySelector(".top").getBoundingClientRect().top;c>r.top-l&&(n._boxPositon="bottom")}}else n._boxPositon=n.props.boxPositon;if(n._on&&t)n._zidx=2,n._on=!1;else{var p=document.querySelectorAll(".select-box");if(p)for(var f=0;f<p.length;f++){var h=p[f].querySelector(".btn-drop"),_=p[f].querySelector(".options-box");h&&h.classList.remove("on"),_&&_.classList.remove("on")}n._on?(n._on=!1,d.delay(function(){n._zidx=g++,n._on=!0},10)):(n._zidx=g++,n._on=!0)}n.props.idx&&n.props.idx>=0&&(w[0]=n.props.idx)}},n._refBox=function(e){!n._box&&e&&(n._box=e)},n._boxDown=function(e){e&&n._mouseDown(e.nativeEvent)},n._mouseDown=function(e){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n._toggle())},n._boxPositon=e.boxPositon,n}return c(t,f.Component),i(t,[{key:"off",value:function(){y.App.pub_playBtnTab(),this._on=!1}},{key:"clear",value:function(){this._zidx=2,this._value="",this._disableSelect=!1,this._viewResult=!1,this._viewCorrect=!1,this._on=!1}},{key:"setValue",value:function(e){for(var t="",n=0;n<this.props.options.length;n++)if(this.props.options[n]===e){t=e;break}this._value=t}},{key:"setDisableSelect",value:function(e){this._disableSelect=e}},{key:"setViewResult",value:function(e){this._viewResult=e,e&&(this._on=!1)}},{key:"setViewCorrect",value:function(e){e&&(this._value=this.props.correct),this._viewCorrect=e,this._on=!1}},{key:"render",value:function(){var e=this,t=this.props,n=(t.text,t.correct),r=t.options,o=(t.boxPositon,this._value),i="";return this._viewCorrect?o=n:this._viewResult&&(i=this._value===n?"correct":"wrong",o=n),f.createElement("div",{className:"select-box",ref:this._refBox},f.createElement("div",{className:"text-box "+i,onPointerDown:this._boxDown},f.createElement("div",{className:"size-box"},r.map(function(e,t){return f.createElement("div",{key:t},e)})),o),f.createElement(m.ToggleBtn,{className:"btn-drop",on:this._on,onMouseDown:this._mouseDown}),f.createElement("div",{className:"options-box "+this._boxPositon+(this._on?" on":""),style:{zIndex:this._zidx}},r.map(function(t,r){var o="";return e._viewResult?o=t===n?"correct":t===e._value?"on":"wrong":t===e._value&&(o="on"),f.createElement(b,{key:r,className:o,text:t,onClick:e._onSelect})})))}}]),t}();p([h.observable],E.prototype,"_value",void 0),p([h.observable],E.prototype,"_on",void 0),p([h.observable],E.prototype,"_viewResult",void 0),p([h.observable],E.prototype,"_viewCorrect",void 0),E=p([_.observer],E);var x=function(e){function t(e){var n;r(this,t),(n=s(this,a(t).call(this,e))).m_view=!1,n._drop=!1,n.SELECT_KEY=0,n._sbox=[],n._totalNumOfSentnc=0,n._opt=!0,n._refSelect=function(e,t){n._sbox[t]||!e||t<0||(n._sbox[t]=e,n._initSBox())},n._onSelect=function(e,t){var r=n.props.graphic.app_drops;t<r.length&&r[t]&&(r[t].inputed=e),n.props.onChange&&n.props.onChange(e,t)},n._parseBlock=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom",i=e.question.split("<br>"),s=0;return f.createElement(f.Fragment,null,i.map(function(i,a){for(var c,u=new RegExp(/\{(.*?)\}/g),l=u.exec(i),p=0,d="",h=[];l;)l.index>p&&(d=i.substring(p,l.index),c=f.createElement("span",{key:n.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d}}),h.push(c)),d=l[1],s<e.app_drops.length?(h.push(function(i){return f.createElement(E,{key:n.SELECT_KEY++,ref:function(e){return t(e,i)},text:d,correct:e.app_drops[i].correct,options:e.app_drops[i].choices,boxPositon:o,onChange:function(e){return r(e,i)},idx:n.props.idx,className:n.props.className,totalStncNum:n._totalNumOfSentnc,sentncNum:i,isStudent:n.props.isStudent})}(s)),s++):h.push(d),p=u.lastIndex,l=u.exec(i);var _="";return p<i.length&&((d=i.substring(p)).indexOf("_add_")>=0?(_="add",c=f.createElement("span",{key:n.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d.split("_add_")[1]}})):c=f.createElement("span",{key:n.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d}}),h.push(c)),f.createElement("li",{key:a,className:_},f.createElement("div",null,h))}))},n._parseBlock2=function(e){var t=e.title.split("<br>"),n=0;return f.createElement(f.Fragment,null,t.map(function(t,r){for(var o=new RegExp(/\{(.*?)\}/g),i=o.exec(t),s=0,a="",c=[];i;)i.index>s&&(a=t.substring(s,i.index),c.push(a)),a=i[1],n<e.app_drops.length?n++:c.push(a),s=o.lastIndex,i=o.exec(t);return s<t.length&&((a=t.substring(s)).indexOf("_add_")>=0?("add",c.push(a.split("_add_"))):c.push(a)),f.createElement("em",{key:r},c)}))},n._refSwiper=function(e){!n.m_swiper&&e&&(n.m_swiper=e.swiper)};for(var o=e.graphic,i=[o.answer,o.answer2,o.answer3,o.answer4],c=0;c<i.length;c++){if(null==i[c]||0==i[c])return s(n);n._totalNumOfSentnc++}return n}return c(t,f.Component),i(t,[{key:"componentDidMount",value:function(){for(;this._sbox.length>0;)this._sbox.pop();this._jsx=this._parseBlock(this.props.graphic,this._refSelect,this._onSelect,this.props.optionBoxPosition),this._jsx2=this._parseBlock2(this.props.graphic)}},{key:"componentWillReceiveProps",value:function(e){if(e.graphic!==this.props.graphic){for(;this._sbox.length>0;)this._sbox.pop();this._jsx=this._parseBlock(e.graphic,this._refSelect,this._onSelect,this.props.optionBoxPosition),this._jsx2=this._parseBlock2(e.graphic)}}},{key:"_initSBox",value:function(){var e=this,t=this.props.graphic.app_drops;this._sbox.forEach(function(n,r){n&&(n.clear(),r<t.length&&t[r]&&n.setValue(t[r].inputed),n.setDisableSelect(!0===e.props.disableSelect),n.setViewResult(!0===e.props.viewResult),n.setViewCorrect(!0===e.props.viewCorrect))})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.inview&&!e.inview&&this.m_swiper&&(this.m_swiper.slideTo(0,0),d.delay(function(){t.m_swiper&&(t.m_swiper.update(),t.m_swiper.scrollbar&&t.m_swiper.scrollbar.updateSize(),t.m_swiper.wrapperEl.children[0].clientHeight<=t.m_swiper.height?t._opt=!0:t._opt=!1)},100)),this.props.inview&&!e.inview&&this._initSBox(),this.props.renderCnt!==e.renderCnt&&this._initSBox(),this.props.disableSelect!==e.disableSelect&&this._sbox.forEach(function(e,n){e&&e.setDisableSelect(!0===t.props.disableSelect)}),this.props.viewResult!==e.viewResult&&this._sbox.forEach(function(e,n){e&&e.setViewResult(!0===t.props.viewResult)}),this.props.viewCorrect!==e.viewCorrect&&this._sbox.forEach(function(e,n){e&&e.setViewCorrect(!0===t.props.viewCorrect)})}},{key:"render",value:function(){var e={};return this.props.headerColor&&(e.backgroundColor=this.props.headerColor),(this.props.className.startsWith("type_3")||this.props.className.startsWith("type_7"))&&this.props.className.indexOf("zoom-in")<0||this.props.className.startsWith("type_6")?(console.log(this.props.className.indexOf("zoom-in")),this._cont=f.createElement(v,{id:"table-container",ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0,noSwiping:this._opt,followFinger:!0,noSwipingClass:"swiper-no-swiping"},f.createElement("div",{className:"content-box"},f.createElement("div",null,f.createElement("ul",{className:"content"},this._jsx))))):this._cont=f.createElement("div",{className:"content-box"},f.createElement("div",null,f.createElement("ul",{className:"content"},this._jsx))),f.createElement("div",{className:"table-item "+this.props.className,style:{maxWidth:this.props.maxWidth+"px",zIndex:w[0]===this.props.idx?100:0}},f.createElement("div",{className:"head",style:e},f.createElement("span",null,this._jsx2)),this._cont,f.createElement(m.ToggleBtn,{className:"table-item-btn",view:!0===this.props.viewBtn,onClick:this.props.onClickBtn}))}}]),t}();p([h.observable],x.prototype,"m_view",void 0),p([h.observable],x.prototype,"_opt",void 0),x=p([_.inject(),_.observer],x),t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function o(e,t,n){for(var o=e.split(/\s/g),i=new RegExp(/[\.\!\?\s]/g),s=[],a=0;a<o.length;a++){var c=o[a];if(""!==c){for(var u=[],l=i.exec(c),p=0,f="";l;)l.index>p&&(f=c.substring(p,l.index),u.push(r.createElement("span",{key:t.key++},f))),f=l[0],u.push(f),p=i.lastIndex,l=i.exec(c);p<c.length&&(f=c.substring(p),u.push(r.createElement("span",{key:t.key++},f))),s.push(r.createElement("span",{key:t.key++,className:n},u.map(function(e){return e})))}}return s}t.parseBlock=function(e,t,n){for(var o=[],i=new RegExp(/\{(.*?)\}/g),s=i.exec(e),a=0,c=0,u="";s;){s.index>a&&(u=e.substring(a,s.index),o.push(u)),u=s[1];var l=n;l||(l=u),o.push(r.createElement("span",{key:c++,className:t,"data-correct":u},l)),a=i.lastIndex,s=i.exec(e)}return a<e.length&&(u=e.substring(a),o.push(u)),o},t.parseUnscramble=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.split(" "),i=!1,s=[],a=0;a<o.length;a++){var c=o[a],u=c.lastIndexOf("{"),l=c.lastIndexOf("}");i?(s[s.length-1]=s[s.length-1]+" "+c,l>u&&(i=!1)):(s.push(c),u>l&&(i=!0))}for(var p=0,f=[],d=n?[]:null,h=0;h<s.length;h++){for(var _=s[h],m=new RegExp(/\{(.*?)\}/g),y=m.exec(_),v=0,b="",g=[];y;)y.index>v&&(b=_.substring(v,y.index),g.push(b)),b=y[1],g.push(r.createElement("span",{key:p++,className:t},b)),d&&d.push(b),v=m.lastIndex,y=m.exec(_);v<_.length&&(b=_.substring(v),g.push(b)),h>0&&f.push(" "),f.push(r.createElement("div",{key:p++},g.map(function(e){return e})))}if(d&&n)for(var w,E=0;(w=d.length)>0;){var x=Math.floor(Math.random()*w);0===E&&0===x&&d.length>1||x<w&&(n.push(d[x]),d.splice(x,1),E++)}return r.createElement(r.Fragment,null,f.map(function(e){return e}))},t.sentence2jsx=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,c=new RegExp(/\{(.*?)\}/g),u={key:0},l=[];return e.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>").forEach(function(e,p){if(n){for(var f=c.exec(e),d=0,h="",_=[];f;){f.index>d&&(h=e.substring(d,f.index),_.push(o(h,u,a))),h=f[1];var m=i;m||(m=h),t=s?o(m,u,a):m,_.push(r.createElement("span",{key:u.key++,className:n,"data-correct":h},t)),d=c.lastIndex,f=c.exec(e)}d<e.length&&(h=e.substring(d),_.push(o(h,u,a))),l[p]=r.createElement(r.Fragment,{key:u.key++},_)}else l[p]=r.createElement(r.Fragment,{key:u.key++},o(e,u,a))}),l}},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=2;var a=20,c=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&u()}function c(){i(a)}function u(){var e=Date.now();if(n){if(e-o<s)return;r=!0}else n=!0,r=!1,setTimeout(c,t);o=e}return u}(this.refresh.bind(this),a)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;c.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},d=b(0,0,0,0);function h(e){return parseFloat(e)||0}function _(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+h(e["border-"+n+"-width"])},0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=f(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=h(i)}return t}(r),i=o.left+o.right,s=o.top+o.bottom,a=h(r.width),c=h(r.height);if("border-box"===r.boxSizing&&(Math.round(a+i)!==t&&(a-=_(r,"left","right")+i),Math.round(c+s)!==n&&(c-=_(r,"top","bottom")+s)),!function(e){return e===f(e).document.documentElement}(e)){var u=Math.round(a+i)-t,l=Math.round(c+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(l)&&(c-=l)}return b(o.left,o.top,a,c)}var y="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return r?y(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):m(e):d}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(){return function(e,t){var n,r,o,i,s,a,c,u=(r=(n=t).x,o=n.y,i=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),p(c,{x:r,y:o,width:i,height:s,top:o,right:r+i,bottom:s+o,left:r}),c);p(this,{target:e,contentRect:u})}}(),E=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),x="undefined"!=typeof WeakMap?new WeakMap:new n,k=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new E(t,n,this);x.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(e){k.prototype[e]=function(){var t;return(t=x.get(this))[e].apply(t,arguments)}});var S=void 0!==o.ResizeObserver?o.ResizeObserver:k;t.a=S}).call(this,n(14))},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(14))},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),o=n(0),i=n(18),s=n(4),a=n(7),c=n(33);r.setConfig({ErrorOverlay:function(e){return o.createElement("div",null)}});var u,l={clear:s.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML},p=!0;u=n(34),p=!1;var f=!1,d=u,h=d.default,_=d.AppProvider,m=d.appContext;l.set=function(e,t,n){s.App.pub_set(e,t,n),m.setData(e)},l.render=function(){s.App.pub_initAudio(),i.render(o.createElement(_,null,o.createElement(h,null)),document.getElementById("wrap"))},p?(l.init=function(e,t,n,r,o){s.App.pub_load(e,null,t,n,r,o)},l.start=function(){f=!0,setTimeout(function(){return m.start()},500)},l.receive=function(e){if(4===e.type){var t=e.data;f?t&&t.id&&""!==t.id&&(s.App.isStarted?a.sendPADToID(t.id,0,null):a.sendPADToID(t.id,1,null)):s.App.pub_addInitedStudent(t)&&(f||(f=!0,m.start()))}else m.receive(e)},l.teachingTool=function(e){}):(l.init=function(e,t,n,r,o){a.disableSoftwareKeyboard(),s.App.pub_load(null,e,t,n,r,o),a.sendTeacher(4,e)},l.receive=function(e){null!=s.App.student&&m.receive(e)},l.notifyUploadToServerResult=function(e){console.log("app_o['notifyUploadToServerResult']"),m.uploaded(e)},l.notify=function(e){m.notify(e)},l.notifyVideoRecord=function(e){m.notifyVideoRecord(e)},l.notifyStartVoice=function(){m.notify("notifyStartVoice")},l.notifyVoiceRecordResult=function(e){m.notifyRecorded(e)},l.notifyTakePicture=function(e,t){m.notifyTakePicture&&m.notifyTakePicture(e,t)}),n(61),e.app_o=l}).call(this,n(14))},function(e,t,n){"use strict";e.exports=n(29)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(0))&&"object"==typeof r&&"default"in r?r.default:r;t.AppContainer=function(e){return o.Children.only(e.children)},t.hot=function(){return function(e){return e}},t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,p=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&d())}function d(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function _(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importHTML=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="document",r.onload=function(e){if(e){var o=r.response;o&&o.body&&o.body.firstElementChild?t(o.body.firstElementChild):o&&o.documentElement?t(o.documentElement):n("error")}},r.onerror=function(e){n(e)},r.send(null)})},t.importLink=function(e,t){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="document",r.onload=function(e){if(e){var n=r.response;t(n)}},r.onerror=function(e){n(e)},r.send(null)})}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(1),p=n(35),f=n(36),d=n(37),h=n(38);t.appContext=h.sContext,t.AppProvider=h.StudentProvider;var _=n(40);n(41),n(42);var m=n(43),y=n(49),v=n(50),b=n(52),g=n(58),w=n(59),E=n(60),x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,i(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.state,n=e.actions,r="direction"===t.viewDiv?0:-1280;return u.createElement(u.Fragment,null,u.createElement("div",{id:"preload_hidden",style:{opacity:0}},u.createElement("span",null,""),u.createElement("span",{style:{fontWeight:"bold"}},"")),u.createElement("div",{className:"content-container"},u.createElement("div",{className:"content-wrapper",style:{left:r+"px"}},u.createElement("div",null,u.createElement(d.default,{className:"video-direction",view:"direction"===t.viewDiv,on:t.directionON,isTeacher:!1,video_url:"/content/digenglish_lib/direction/rw_comprehension.webp",video_frame:125})),u.createElement("div",null,u.createElement(m.default,{view:"content"===t.viewDiv&&"warmup"===t.prog,state:t,actions:n}),u.createElement(y.default,{view:"content"===t.viewDiv&&"passage"===t.prog,viewTrans:t.viewTrans,qnaProg:t.qnaProg,focusSeq:t.focusSeq,state:t,actions:n}),u.createElement(v.default,{view:"content"===t.viewDiv&&"question"===t.prog,state:t,actions:n}),u.createElement(b.default,{view:"content"===t.viewDiv&&"graphic"===t.prog,state:t,actions:n}),u.createElement(g.default,{view:"content"===t.viewDiv&&"summary"===t.prog,state:t,actions:n}),u.createElement(w.default,{view:"content"===t.viewDiv&&"v_script"===t.prog,focusIdx:t.focusIdx,state:t,actions:n}),u.createElement(E.default,{view:"content"===t.viewDiv&&"v_checkup"===t.prog,state:t,actions:n}),u.createElement(_.Loading,{view:t.loading}),u.createElement(f.SVGAni,{className:"goodjob-svg",view:t.goodjob,delay:3e3,data:"".concat("/content/digenglish_lib/","images/goodjob_ls.svg"),onComplete:n.goodjobComplete}),u.createElement(f.SVGEmbed,{className:"eyeon_svg",data:"".concat("/content/digenglish_lib/","images/eyeon_ls.svg"),view:"eyeon"===t.viewDiv||"direction"===t.viewDiv,bPlay:!1})))))}}])&&r(n.prototype,a),c&&r(n,c),t}();x=c([l.observer],x);var k=h.useStudent(function(e){return u.createElement(l.Observer,null,function(){return u.createElement(x,{state:e.state,actions:e.actions})})});t.default=p.hot(k)},function(e,t,n){t.hot=function(e){return e}},function(e,t,n){"use strict";function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),_=n(19),m=n(1),y=n(2),v=n(5),b=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).m_obj=null,n.m_svg=null,n.m_bPlay=!1,n._ref=n._ref.bind(u(n)),n}return l(t,h.Component),s(t,[{key:"_init",value:function(){if(!this.m_svg&&this.m_obj){var e=this.m_obj;null===this.m_svg&&null!==e.contentDocument&&null!==e.contentDocument.firstElementChild&&"svg"===e.contentDocument.firstElementChild.tagName.toLowerCase()&&(this.m_svg=e.contentDocument.firstElementChild)}}},{key:"_ref",value:function(e){var t=this;!this.m_obj&&e&&(this.m_obj=e,null==e.contentDocument||null==e.contentDocument.firstElementChild||"svg"!==e.contentDocument.firstElementChild.tagName.toLowerCase()?e.onload=e.oncanplay=e.onloadeddata=function(e){t.m_svg||(t._init(),t.m_bPlay?t._play(-1):t._pause(-1))}:this._pause(-1))}},{key:"_play",value:function(e){if(this.m_bPlay=!0,this._init(),null!=this.m_svg)try{e>=0&&this.m_svg.setCurrentTime(e),this.m_svg.animationsPaused()&&this.m_svg.unpauseAnimations()}catch(e){}}},{key:"_pause",value:function(e){if(this.m_bPlay=!1,this._init(),null!=this.m_svg)try{e>=0&&this.m_svg.setCurrentTime(e),this.m_svg.animationsPaused()||this.m_svg.pauseAnimations()}catch(e){}}},{key:"componentDidUpdate",value:function(e){if(this.props.bPlay!==e.bPlay||this.props.time!==e.time){var t=_.isUndefined(this.props.time)?-1:this.props.time;this.props.bPlay?this._play(t):this._pause(t)}}},{key:"render",value:function(){var e={};return this.props.view||(e.zIndex=-1,e.visibility="hidden",e.pointerEvents="none"),h.createElement("object",{className:this.props.className,ref:this._ref,data:this.props.data,type:"image/svg+xml",style:e})}}]),t}();t.SVGEmbed=b;var g=function(e){function t(){var e;return o(this,t),(e=a(this,c(t).apply(this,arguments))).m_character=null,e}return l(t,b),s(t,[{key:"_init",value:function(){r(c(t.prototype),"_init",this).call(this),!this.m_character&&this.m_svg&&(this.m_character=this.m_svg.querySelector("#character"),this.m_character&&this.m_character.setAttribute("opacity",this.props.viewCharactor?"1":"0"))}},{key:"componentDidUpdate",value:function(e){r(c(t.prototype),"componentDidUpdate",this).call(this,e),this.m_character&&this.props.viewCharactor!==e.viewCharactor&&this.m_character.setAttribute("opacity",this.props.viewCharactor?"1":"0")}}]),t}();t.SVGBg=g;var w=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).m_play=!1,n}return l(t,h.Component),s(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.view&&!e.view){this.m_play=!0;var n=this.props.delay;n||(n=800),v.delay(function(){t.props.onComplete()},n)}else!this.props.view&&e.view&&(this.m_play=!1)}},{key:"render",value:function(){return h.createElement(b,{className:this.props.className,data:this.props.data,view:this.props.view,time:0,bPlay:this.m_play})}}]),t}();d([y.observable],w.prototype,"m_play",void 0),w=d([m.observer],w),t.SVGAni=w},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(2),f=n(1),d=n(5),h=n(6),_=n(8),m=function(e){function t(e){var n,r,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,s=o(t).call(this,e),(n=!s||"object"!==a(s)&&"function"!=typeof s?i(r):s).m_on=!1,n.m_clipView=!1,n.m_imgDiv=null,n._refImg=function(e){e&&void 0!==n.props.video_url&&""!==n.props.video_url&&(n.m_imgDiv=e,n.m_clipView||d.delay(function(){n.m_imgDiv&&(n.m_clipView=!0)},1250))},n._onClick=function(){n.props.isTeacher&&n._off()},n._off=function(){return u(i(n),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.view||!this.m_on){e.next=6;break}return this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),e.next=5,h.wait(500);case 5:this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd();case 6:case"end":return e.stop()}},e,this)}))},n.m_on=e.view&&e.on,n}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"_on",value:function(){return u(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.m_on=!0;case 1:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}},{key:"render",value:function(){var e=[];return e.push(this.props.className),this.props.view?this.m_on&&e.push("on"):e.push("hide"),l.createElement("div",{className:e.join(" "),onClick:this._onClick},this.props.children,l.createElement("img",{className:"movieclip",src:this.props.video_url,ref:this._refImg,style:this.m_clipView?void 0:_.HIDE}),l.createElement("div",{className:"direction"}))}}])&&r(n.prototype,c),p&&r(n,p),t}();c([p.observable],m.prototype,"m_on",void 0),c([p.observable],m.prototype,"m_clipView",void 0),c([p.action],m.prototype,"_off",void 0),m=c([f.observer],m),t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var d,h,_=n(0),m=n(2),y=n(13),v=n(39);!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.COMPLETE=3]="COMPLETE"}(d||(d={})),t.SENDPROG=d,function(e){e[e.UNMOUNT=0]="UNMOUNT",e[e.YESORNO=1]="YESORNO",e[e.SELECTING=2]="SELECTING",e[e.SENDING=3]="SENDING",e[e.SENDED=4]="SENDED"}(h||(h={})),t.QnaProg=h;var b=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).call(this)))._color="pink",e._uploadedFnc=null,e._isReadAloud=!1,e._isShadowing=!1,e._swapGraphicData=function(){var t=e._data.graphic,n=t[2];e._data.graphic[2]=t[1],e._data.graphic[1]=n},e.uploaded=function(t){"content"===e.state.viewDiv&&"graphic"===e.state.prog&&"pentool"===e.state.graphicSheet&&e._uploadedFnc&&e._uploadedFnc(t)},e.notify=function(e){},e.notifyRecorded=function(e){},e.state.prog="",e.state.qnaProg=0,e.state.warmupidx=0,e.state.passageidx=0,e.state.focusSeq=-1,e.state.focusIdx=-1,e.state.viewTrans=!1,e.state.viewSctiprFocusBG=!1,e.state.questionProg=0,e.state.graphicProg=0,e.state.graphicSheet="",e.state.summaryProg=0,e.state.checkupIdx=0,e.state.checkupProg=0,e.state.isPlay=!1,e.state.isPlay_v=!1,e.state.isTableItemSwapped=!1,e.actions.getData=function(){return e._data},e.actions.getColor=function(){return e._color},e.actions.setUploadedFnc=function(t){return e._uploadedFnc=t},e.actions.swapGraphicData=function(){var t=e._data.graphic,n=t[2];e._data.graphic[2]=t[1],e._data.graphic[1]=n},e.actions.setIsTableItemSwapped=function(){e.state.isTableItemSwapped=!e.state.isTableItemSwapped},e}return u(t,v.StudentContextBase),i(t,[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&(this.state.prog="",this.state.focusIdx=-1,this.state.isPlay_v=!1,this._clearPassage(),this.state.questionProg=0,this.state.graphicProg=0,this.state.graphicSheet="",this.state.summaryProg=0,this.state.checkupIdx=0,this.state.checkupProg=0,this._uploadedFnc=null),a(c(t.prototype),"_setViewDiv",this).call(this,e)}},{key:"_clearPassage",value:function(){this.state.qnaProg=0,this.state.focusSeq=-1,this.state.viewTrans=!1,this._isReadAloud=!1,this._isShadowing=!1,this.state.viewSctiprFocusBG=!1,this.state.isPlay=!1}},{key:"receive",value:function(e){if(a(c(t.prototype),"receive",this).call(this,e),10===e.type&&e.data){var n=e.data;if("warmup_send"===n.msgtype){var r=n;if(r.idx>=this._data.warmup.length)return;this._setViewDiv("content"),this.state.warmupidx=r.idx,this.state.prog="warmup"}else if("passage_send"===n.msgtype){var o=n;if(o.idx>=this._data.passage.length)return;this._setViewDiv("content"),this.state.passageidx=o.idx,this.state.prog="passage"}else if("qna_send"===n.msgtype){if("passage"!==this.state.prog)return;if(this.state.qnaProg>0)return;this._clearPassage(),this.state.qnaProg=1}else if("readaloud_send"===n.msgtype){if(""===this.state.prog){var i=n;if(i.idx>=this._data.passage.length)return;this._setViewDiv("content"),this.state.passageidx=i.idx,this.state.prog="passage"}else if("passage"!==this.state.prog)return;this._clearPassage(),this._isReadAloud=!0,this.state.isPlay=!0}else if("shadowing_send"===n.msgtype){if(""===this.state.prog){var s=n;if(s.idx>=this._data.passage.length)return;this._setViewDiv("content"),this.state.passageidx=s.idx,this.state.prog="passage"}else if("passage"!==this.state.prog)return;this._clearPassage(),this._isShadowing=!0,this.state.isPlay=!0}else if("dialogue_end"===n.msgtype){if(""===this.state.prog){var u=n;if(u.idx>=this._data.passage.length)return;this._setViewDiv("content"),this.state.passageidx=u.idx,this.state.prog="passage"}else if("passage"!==this.state.prog)return;this._clearPassage()}else if("focusidx"===n.msgtype){if(!this._isShadowing&&!this._isReadAloud)return;var l=n;"passage"===this.state.prog?this.state.focusSeq!==l.idx&&(this.state.viewSctiprFocusBG=this._isReadAloud,this.state.focusSeq=l.idx):"v_script"===this.state.prog&&this.state.focusIdx!==l.idx&&(this.state.viewSctiprFocusBG=this._isReadAloud,this.state.focusIdx=l.idx)}else if("playing"===n.msgtype||"paused"===n.msgtype){if("content"!==this.state.viewDiv)return;"passage"===this.state.prog?this.state.isPlay="playing"===n.msgtype:"v_script"===this.state.prog&&(this.state.isPlay_v="playing"===n.msgtype)}else if("view_yourturn"===n.msgtype){if(!this._isShadowing)return;var p=n;"passage"===this.state.prog?(this.state.focusSeq=p.idx,this.state.viewSctiprFocusBG=this.state.focusSeq>=0):"v_script"===this.state.prog&&(this.state.focusSeq=p.idx,this.state.viewSctiprFocusBG=this.state.focusIdx>=0)}else if("view_trans"===n.msgtype){if("passage"!==this.state.prog)return;if(0!==this.state.qnaProg)return;if(this._isShadowing)return;if(this._isReadAloud)return;var f=n;this.state.viewTrans=1===f.idx}else if("question_send"===n.msgtype)this._setViewDiv("content"),this.state.questionProg=0,this.state.prog="question";else if("question_end"===n.msgtype){if("question"!==this.state.prog)return;this.state.questionProg=3}else if("graphic_send"===n.msgtype)this._setViewDiv("content"),this.state.graphicProg=0,this.state.graphicSheet="",this.state.prog="graphic",6==this._data.visualizing_type&&0==this.state.isTableItemSwapped&&(this.actions.setIsTableItemSwapped(),this._swapGraphicData());else if("graphic_end"===n.msgtype){if("graphic"!==this.state.prog)return;this.state.graphicProg=3,6==this._data.visualizing_type&&1==this.state.isTableItemSwapped&&(this.actions.setIsTableItemSwapped(),this._swapGraphicData())}else if("pentool_send"===n.msgtype)"content"!==this.state.viewDiv&&this._setViewDiv("content"),"graphic"===this.state.prog?this.state.graphicSheet="pentool":(this.state.prog="graphic",this.state.graphicProg=0,this.state.graphicSheet="pentool",this.state.prog="graphic");else if("pentool_end"===n.msgtype){if("graphic"!==this.state.prog)return;this.state.graphicSheet=""}else if("keyboard_send"===n.msgtype)"content"!==this.state.viewDiv&&this._setViewDiv("content"),"graphic"===this.state.prog?this.state.graphicSheet="keyboard":(this.state.prog="graphic",this.state.graphicProg=0,this.state.graphicSheet="keyboard",this.state.prog="graphic");else if("keyboard_end"===n.msgtype){if("graphic"!==this.state.prog)return;this.state.graphicSheet=""}else if("summary_send"===n.msgtype)this._setViewDiv("content"),this.state.graphicProg=0,this.state.prog="summary";else if("summary_end"===n.msgtype){if("summary"!==this.state.prog)return;this.state.summaryProg=3}else if("v_readaloud_send"===n.msgtype)this._setViewDiv("content"),this.state.focusIdx=-1,this._isReadAloud=!0,this._isShadowing=!1,this.state.viewSctiprFocusBG=!1,this.state.isPlay_v=!0,this.state.prog="v_script";else if("v_shadowing_send"===n.msgtype)this._setViewDiv("content"),this.state.focusIdx=-1,this._isReadAloud=!1,this._isShadowing=!0,this.state.viewSctiprFocusBG=!1,this.state.isPlay_v=!0,this.state.prog="v_script";else if("v_dialogue_end"===n.msgtype)this.state.focusIdx=-1,this._isReadAloud=!1,this._isShadowing=!0,this.state.viewSctiprFocusBG=!1,this.state.isPlay_v=!1,this._setViewDiv("eyeon");else if("v_checkup_send"===n.msgtype){this._setViewDiv("content");var d=n;this.state.checkupProg=0,this.state.checkupIdx=d.idx,this.state.prog="v_checkup"}else if("v_checkup_end"===n.msgtype){if("v_checkup"!==this.state.prog)return;this.state.checkupProg=3}}}},{key:"setData",value:function(e){for(var t=0,n=y.COLORS.length;!((t=Math.floor(Math.random()*n))<n););this._color=y.COLORS[t],this._data=y.initData(e)}}]),t}();f([m.observable],b.prototype,"state",void 0),f([m.action],b.prototype,"_setViewDiv",null),f([m.action],b.prototype,"receive",null),f([m.action],b.prototype,"notify",void 0),f([m.action],b.prototype,"notifyRecorded",void 0),t.StudentContext=b;var g=new b;t.sContext=g;var w=_.createContext(g),E=w.Provider,x=w.Consumer;t.StudentConsumer=x;var k=function(e){function t(){return r(this,t),s(this,c(t).apply(this,arguments))}return u(t,_.Component),i(t,[{key:"render",value:function(){return _.createElement(E,{value:g},this.props.children)}}]),t}();t.StudentProvider=k,t.useStudent=function(e){return function(t){return _.createElement(x,null,function(t){return _.createElement(e,Object.assign({},t))})}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=n(4),c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={viewDiv:"direction",directionON:!1,loading:!1,goodjob:!1,likeSet:{on:!1,id:""},likeSoundOff:!1,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0}},this.actions={startGoodJob:function(){t.state.goodjob=!0},goodjobComplete:function(){t.state.goodjob=!1},setLoading:function(e){t.state.loading=e}},this.uploaded=function(e){},this.notify=function(e){},this.notifyRecorded=function(e){},this.notifyVideoRecord=function(e){}}var t,n,o;return t=e,(n=[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&(a.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.goodjob=!1,this.state.likeSet.on=!1,this.state.likeSet.id="",this.state.viewDiv=e)}},{key:"start",value:function(){}},{key:"receive",value:function(e){switch(e.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction");break;case 3:this.state.directionON=!1;break;case 0:this._setViewDiv("eyeon");break;case 12:var t=e.data;"content"===this.state.viewDiv&&(this.state.likeSet.on=t.on,this.state.likeSet.id=t.id),this.state.likeSoundOff=!1;break;case 17:this.state.likeSoundOff=!0;break;case 16:this.state.likeSoundOff=!1}}}])&&r(t.prototype,n),o&&r(t,o),e}();i([s.observable],c.prototype,"state",void 0),i([s.action],c.prototype,"_setViewDiv",null),i([s.action],c.prototype,"receive",null),t.StudentContextBase=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.Loading=function(e){var t=e.view,n={position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"};return n.backgroundImage='url("'.concat("/content/digenglish_lib/",'images/loading.svg")'),n.backgroundColor="rgba(0, 0, 0, 0.1)",n.zIndex=101,t||(n.visibility="hidden",n.zIndex=-1,n.pointerEvents="none"),r.createElement("div",{style:n})}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(1),f=n(13),d=n(4),h=n(7),_=n(10),m=n(20),y=n(15),v=n(16),b=n(6),g=n(17),w=n(2),E=function(e){function t(e){var n,r,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,s=o(t).call(this,e),(n=!s||"object"!==a(s)&&"function"!=typeof s?i(r):s)._bndW=0,n._bndH=0,n._bndW_p=0,n._bndH_p=0,n._displayMode="1",n._prog=0,n._tlen=0,n._stime=0,n._refCanvas=function(e){!n._canvas&&e&&(n._canvas=e,n._ctx=n._canvas.getContext("2d"),n.props.view&&n._draw())},n._refArea=function(e){!n._tarea&&e&&(n._tarea=e)},n._onChange=function(e){0===n._stime&&(n._stime=Date.now()),n.props.view&&(n._tlen=e.trim().length,n._draw())},n._onDone=function(e){0===n._stime&&(n._stime=Date.now()),n.props.view&&(n._tlen=e.trim().length,n._draw(),y.state.state="off")},n._onSend=function(){return u(i(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view){e.next=4;break}return e.abrupt("return");case 4:if(!(this._prog>0)){e.next=8;break}return e.abrupt("return");case 8:if(this._tarea){e.next=12;break}return e.abrupt("return");case 12:if(d.App.student){e.next=14;break}return e.abrupt("return");case 14:if(0!==(t=this._tarea.value).trim().length){e.next=17;break}return e.abrupt("return");case 17:return this._prog=1,y.state.state="hide",n={msgtype:"warmup_return",id:d.App.student.id,color:this.props.actions.getColor(),msg:t,stime:this._stime,etime:Date.now()},d.App.pub_playToPad(),h.sendTeacher(11,n),e.next=24,b.wait(500);case 24:if(this.props.view){e.next=28;break}return e.abrupt("return");case 28:if(1===this._prog){e.next=30;break}return e.abrupt("return");case 30:d.App.pub_playGoodjob(),this.props.actions.startGoodJob(),this._prog=2;case 33:case"end":return e.stop()}},e,this)}))},n._onResize=function(e,t){n._bndW=e,n._bndH=t,n.props.view&&n._draw()},n._toggle=function(){n._displayMode="2"===n._displayMode?"1":"2"},y.state.state="on",n}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"_draw",value:function(){!this.props.view||this._bndW<=0||this._bndH<=0||this._bndW===this._bndW_p&&this._bndH===this._bndH_p||this._canvas&&this._ctx&&(this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._canvas.width=this._bndW,this._canvas.height=this._bndH,f.drawBalloon(this._ctx,5,5,this._bndW-23,this._bndH-10,this._bndW-5,55,10,this.props.actions.getColor()),this._bndW_p=this._bndW,this._bndH_p=this._bndH)}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._bndH_p=0,this._bndW_p=0,this._tlen=0,this._prog=0,y.state.state="on",this._draw(),d.App.student&&(this._displayMode=d.App.student.displayMode),this._stime=0):!this.props.view&&e.view&&(this._bndH_p=0,this._bndW_p=0,this._tlen=0,this._prog=0,y.state.state="hide")}},{key:"render",value:function(){var e,t=this.props,n=t.view,r=t.state,o=t.actions,i=o.getData().warmup[r.warmupidx];e=d.App.student?"2"===this._displayMode?d.App.student.avatar:d.App.student.thumb:"";var s="on"===y.state.state?" key-on":"",a=o.getColor();return l.createElement("div",{className:"s_warmup",style:{display:n?"":"none"}},l.createElement("div",{className:"box"+s},l.createElement("div",{className:"speaker"},l.createElement("div",null,l.createElement(v.default,{view:n,minSize:32,maxSize:52,maxLineNum:2,lineHeight:120},i.question))),l.createElement("div",{className:"s_typing"},l.createElement("div",{className:"area-bnd"},l.createElement("canvas",{ref:this._refCanvas}),l.createElement(m.KTextArea,{ref:this._refArea,view:this.props.view,on:this.props.view&&0===this._prog,autoResize:!0,skipEnter:!1,onChange:this._onChange,onDone:this._onDone,maxLength:60,maxLineNum:3,rows:1}),l.createElement(g.default,{handleWidth:!1,handleHeight:!0,onResize:this._onResize})),l.createElement("img",{src:e,draggable:!1,className:a,onClick:this._toggle}))),l.createElement(y.Keyboard,null),l.createElement(_.default,{view:this._tlen>0&&"on"!==y.state.state&&this._prog<2,type:"pad",originY:"on"===y.state.state?-355:0,sended:!1,onSend:this._onSend}))}}])&&r(n.prototype,c),p&&r(n,p),t}();c([w.observable],E.prototype,"_displayMode",void 0),c([w.observable],E.prototype,"_prog",void 0),c([w.observable],E.prototype,"_tlen",void 0),E=c([p.observer],E),t.default=E},function(e,t){e.exports=ReactDraggable},function(e,t,n){"use strict";var r=n(46);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),_=n(1),m=n(2),y=n(9),v=n(6),b=n(10),g=n(8),w=n(5),E=n(4),x=n(7),k=n(11).default,S=-1,O=Number.MIN_VALUE,P=Number.MIN_VALUE,C=function(e){function t(e){var n;return r(this,t),(n=s(this,c(t).call(this,e)))._onTextDown=function(e){if(2===n.props.qnaProg){e.target;S=n.props.script.seq,O=e.clientX,P=e.clientY}},n._onTextUp=function(e){if(2!==n.props.qnaProg)return S=-1,O=Number.MIN_VALUE,void(P=Number.MIN_VALUE);var t=S===n.props.script.seq&&Math.abs(O-e.clientX)<30&&Math.abs(P-e.clientY)<30;S=-1,O=Number.MIN_VALUE,P=Number.MIN_VALUE,t&&n.props.onClick(n.props.script,n.props.idx)},n._onTextCancel=function(e){S=-1,O=Number.MIN_VALUE,P=Number.MIN_VALUE},n}return u(t,h.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.script,n=e.viewTrans,r=(e.qnaProg,e.focusSeq),o=e.viewSctiprFocusBG,i=e.selected,s=["eng"];return r===t.seq&&(o&&s.push("bg-on"),s.push("on")),i&&s.push("selected"),n&&s.push("view-trans"),h.createElement(h.Fragment,null,h.createElement("div",{className:s.join(" "),onPointerDown:this._onTextDown,onPointerUp:this._onTextUp,onPointerCancel:this._onTextCancel,onPointerLeave:this._onTextCancel},h.createElement("span",{dangerouslySetInnerHTML:{__html:t.dms_passage}})),h.createElement("div",{className:"trans",style:n?void 0:g.NONE},t.dms_kor.ko))}}]),t}(),j=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._swiper=null,e._img_pop_on=!1,e._selected=[],e._scripts=[],e._stime=0,e._clickYes=function(){0===e._stime&&(e._stime=Date.now());var t=e.props.state;1===t.qnaProg&&(E.App.pub_playBtnTab(),t.qnaProg=2,e._img_pop_on=!0,w.delay(function(){e._img_pop_on=!1},2e3))},e._clickNo=function(){return d(a(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this._stime&&(this._stime=Date.now()),1===(t=this.props.state).qnaProg){e.next=4;break}return e.abrupt("return");case 4:if(E.App.pub_playBtnTab(),t.qnaProg=4,E.App.student){e.next=8;break}return e.abrupt("return");case 8:return n=this.props.actions.getData().passage[t.passageidx],r={msgtype:"qna_return",id:E.App.student.id,returns:[],stime:this._stime,etime:Date.now(),seq:n.page},x.sendTeacher(11,r),e.next=13,v.wait(300);case 13:E.App.pub_playGoodjob(),this.props.actions.startGoodJob();case 15:case"end":return e.stop()}},e,this)}))},e._refSwiper=function(t){!e._swiper&&t&&(e._swiper=t.swiper)},e._onSend=function(){return d(a(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.state,E.App.student){e.next=5;break}return e.abrupt("return");case 5:if(2===t.qnaProg){e.next=7;break}return e.abrupt("return");case 7:return t.qnaProg=3,E.App.pub_playToPad(),n=this.props.actions.getData().passage[t.passageidx],r={msgtype:"qna_return",id:E.App.student.id,returns:this._selected.slice(0),stime:this._stime,etime:Date.now(),seq:n.page},x.sendTeacher(11,r),e.next=14,v.wait(600);case 14:3===t.qnaProg&&(t.qnaProg=4,E.App.pub_playGoodjob(),this.props.actions.startGoodJob());case 15:case"end":return e.stop()}},e,this)}))},e._scriptClick=function(t,n){if(2===e.props.qnaProg){var r=e._selected.indexOf(n);r<0?e._selected.push(n):e._selected.splice(r,1)}},e}return u(t,h.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){if(e.view&&!this.props.view){for(var t=e.actions.getData(),n=t.passage[e.state.passageidx];this._scripts.length>0;)this._scripts.pop();for(var r=0;r<t.scripts.length;r++){var o=t.scripts[r];o.passage_page===n.page&&this._scripts.push(o)}}}},{key:"_updateSwiper",value:function(){return d(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.wait(100);case 2:this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0));case 3:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(e){if(this.props.view&&!e.view&&(this._img_pop_on=!1,this._updateSwiper(),this._stime=0),this.props.viewTrans!==e.viewTrans&&this._updateSwiper(),this.props.qnaProg!==e.qnaProg&&(0===this.props.qnaProg||1===this.props.qnaProg))for(;this._selected.length>0;)this._selected.pop();if(this.props.focusSeq>=0&&this.props.focusSeq!==e.focusSeq&&this._swiper){for(var t=-1,n=0;n<this._scripts.length;n++)if(this._scripts[n].seq===this.props.focusSeq){t=n;break}t>=1?this._swiper.slideTo(t-1):t>=0&&this._swiper.slideTo(0)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.state,o=t.actions,i=t.viewTrans,s=t.qnaProg,a=o.getData();return h.createElement("div",{className:"s_passage",style:n?void 0:g.HIDE},h.createElement("div",{className:"passage_page"},h.createElement("span",null,r.passageidx+1,"/",a.passage.length)),h.createElement("div",{className:"page "+(r.isPlay?"swiper-no-swiping":"")},h.createElement(k,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},this._scripts.map(function(t,n){var o=e._selected.indexOf(n);return h.createElement("div",{key:n,className:"script"},h.createElement(C,{idx:n,viewTrans:i,qnaProg:s,focusSeq:r.focusSeq,viewSctiprFocusBG:r.viewSctiprFocusBG,selected:o>=0,script:t,onClick:e._scriptClick}))}))),h.createElement("div",{className:"img_pop"+(this._img_pop_on?" on":"")}),h.createElement("div",{className:"btn_box"+(1===s?" on":"")},h.createElement(y.ToggleBtn,{className:"btn_yes",onClick:this._clickYes,on:2===s}),h.createElement(y.ToggleBtn,{className:"btn_no",onClick:this._clickNo,on:4===s})),h.createElement(b.default,{view:(2===s||3===s)&&this._selected.length>0,type:"pad",originY:0,sended:!1,onSend:this._onSend}))}}]),t}();f([m.observable],j.prototype,"_swiper",void 0),f([m.observable],j.prototype,"_img_pop_on",void 0),f([m.observable],j.prototype,"_selected",void 0),j=f([_.observer],j),t.default=j},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),_=n(1),m=n(5),y=n(2),v=n(4),b=n(7),g=n(9),w=n(51),E=n(16),x=n(21),k=n(6),S=n(10),O=n(8),P=n(11).default,C=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._swiper=null,n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)};for(var o=e.scripts,i=[],a=0;a<o.length;a++){for(var u=o[a],l=null,p=0;p<i.length;p++)if(i[p].page===u.passage_page){l=i[p];break}l||(l={page:u.passage_page,scripts:[]},i.push(l)),l.scripts.push(u)}return n._jsxs=h.createElement(h.Fragment,null,i.map(function(e,t){return h.createElement("div",{key:t,className:"passage"},e.scripts.map(function(e,t){return h.createElement("span",{key:t,dangerouslySetInnerHTML:{__html:e.dms_passage+" "}})}))})),n}return u(t,h.Component),i(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view&&this._swiper&&(this._swiper.slideTo(0,0),m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},100))}},{key:"render",value:function(){this.props.scripts;return h.createElement(P,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},h.createElement("div",{className:"script-wrap"},this._jsxs))}}]),t}();f([y.observable],C.prototype,"_swiper",void 0),C=f([_.observer],C);var j=function(e){function t(){return r(this,t),s(this,c(t).apply(this,arguments))}return u(t,h.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.view,n=e.question,r=e.prog,o=e.selected,i=e.onSelect,s=""===n.choice_4?[n.choice_1,n.choice_2,n.choice_3]:[n.choice_1,n.choice_2,n.choice_3,n.choice_4];return h.createElement(h.Fragment,null,h.createElement("div",{className:"question"},h.createElement("div",null,h.createElement(E.default,{view:t,maxLineNum:1,maxSize:38,minSize:34,lineHeight:120,textAlign:"left"},n.question))),h.createElement("div",{className:"choice_box"},s.map(function(e,s){++s;var a=[];return r>=3&&(n.answer===s?a[s]="correct":a[s]=o===s?"wrong":""),h.createElement(x.default,{key:e,className:"btn_choice ".concat(a[s]),num:s,on:o===s,disabled:r>=2,onClick:i.bind(s)},h.createElement("div",null,h.createElement(E.default,{view:t,maxLineNum:1,lineHeight:120,minSize:29,maxSize:31,textAlign:"left"},e)))})))}}]),t}();j=f([_.observer],j);var T=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._curIdx=0,n._swiper=null,n._choices=[],n.selectedNumber=0,n._refSwiper=function(e){if(!n._swiper&&e){var t=e.swiper;t.on("transitionStart",function(){n._curIdx=-1}),t.on("transitionEnd",function(){n.props.view&&(n._curIdx=t.activeIndex)}),n._swiper=t}},n._onPage=function(e){n.props.state.questionProg<2||(v.App.pub_playBtnTab(),n._swiper&&n._swiper.slideTo(e))},n._onSend=function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.state.questionProg,this.props.view){e.next=5;break}return e.abrupt("return");case 5:if(!(t>=1)){e.next=9;break}return e.abrupt("return");case 9:if(v.App.student){e.next=11;break}return e.abrupt("return");case 11:return this.props.state.questionProg=1,v.App.pub_playToPad(),n=[],this._choices.forEach(function(e,t){n.push({answer:e.answer,stime:e.stime,etime:e.etime})}),r={msgtype:"question_return",id:v.App.student.id,returns:n},b.sendTeacher(11,r),e.next=19,k.wait(600);case 19:if(t=this.props.state.questionProg,this.props.view){e.next=24;break}return e.abrupt("return");case 24:if(1===t){e.next=26;break}return e.abrupt("return");case 26:this.props.state.questionProg=2,v.App.pub_playGoodjob(),this.props.actions.startGoodJob();case 29:case"end":return e.stop()}},e,this)}))},n._onNext=function(){n._curIdx>=n._choices.length-1||(v.App.pub_playBtnTab(),n._choices[n._curIdx+1]&&(n._choices[n._curIdx+1].stime=Date.now()),n._swiper&&n._swiper.slideNext())},n._onSelect=function(e,t){v.App.pub_playBtnTab(),n._curIdx=e,n._choices[e]&&(n._choices[e].answer=t,n._choices[e].etime=Date.now())};for(var o=e.actions.getData().question,i=0;i<o.length;i++)n._choices[i]={answer:0,stime:0===i?Date.now():0,etime:0};return n}return u(t,h.Component),i(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.view&&!e.view){for(var n=Date.now(),r=0;r<this._choices.length;r++)this._choices[r].answer=0,this._choices[r].stime=n,this._choices[r].etime=0;this._swiper&&(this._swiper.slideTo(0,0),m.delay(function(){t._swiper&&t._swiper.update()},300)),this._curIdx=0}else!this.props.view&&e.view&&this._swiper&&this._swiper.slideTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.state,o=t.actions,i=r.questionProg,s=this._curIdx,a=o.getData(),c=a.question.length,u=s===c-1,l=this._curIdx>=0?this._choices[this._curIdx]:void 0,p=l?l.answer:0,f=u&&i<2&&p>0,d=!u&&0===i&&p>0;return h.createElement("div",{className:"s_question",style:n?void 0:O.HIDE},h.createElement("div",{className:"left"},h.createElement(C,{view:n,scripts:a.scripts})),h.createElement("div",{className:"right"},h.createElement("div",{className:"btn_page_box"},a.question.map(function(t,n){var r="";return i>=3&&(r=t.answer===e._choices[n].answer?"correct":"wrong"),h.createElement(w.default,{key:n,className:r,on:n===s,idx:n,onClick:e._onPage})})),h.createElement(P,{ref:this._refSwiper,direction:"horizontal",observer:!0},a.question.map(function(t,r){return h.createElement("div",{key:t.seq,className:i<2?"swiper-no-swiping":""},h.createElement(j,{idx:r,view:n,question:t,selected:e._choices[r].answer,prog:i,onSelect:e._onSelect.bind(e.selectedNumber,r)}))})),h.createElement(g.ToggleBtn,{className:"btn_next",view:d,onClick:this._onNext})),h.createElement(S.default,{view:f,type:"pad",originY:0,sended:!1,onSend:this._onSend}))}}]),t}();f([y.observable],T.prototype,"_curIdx",void 0),f([y.observable],T.prototype,"_swiper",void 0),f([y.observable],T.prototype,"_choices",void 0),f([y.observable],T.prototype,"selectedNumber",void 0),T=f([_.observer],T),t.default=T},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,s(t).apply(this,arguments)))._click=function(){e.props.onClick(e.props.idx)},e}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.idx,n=e.on;return c.createElement("span",{className:(this.props.className?this.props.className:"")+(n?" on":""),onClick:this._click},t+1)}}])&&o(n.prototype,r),u&&o(n,u),t}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),_=n(1),m=n(5),y=n(13),v=n(2),b=n(4),g=n(7),w=n(9),E=n(6),x=n(10),k=n(8),S=n(22),O=n(53),P=n(54),C=n(57),j=n(11).default,T={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!0,followFinger:!0,noSwipingClass:"swiper-no-swiping",scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},R=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._refSwiper=function(t){!e.m_swiper&&t&&(e.m_swiper=t.swiper)},e}return u(t,h.Component),i(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view&&this.m_swiper&&(this.m_swiper.slideTo(0,0),m.delay(function(){if(t.m_swiper){t.m_swiper.update(),t.m_swiper.scrollbar&&t.m_swiper.scrollbar.updateSize();var e=t.m_swiper.wrapperEl;e.children[0].clientHeight>e.clientHeight?(e.classList.remove("swiper-no-swiping"),t.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.remove("swiper-no-swiping")):(e.classList.add("swiper-no-swiping"),t.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.add("swiper-no-swiping"))}},100))}},{key:"render",value:function(){var e,t,n=this.props,r=n.idx,o=n.view,i=n.graphic,s=n.visualizing_type;if(1===s)t=y.TYPE_COM_HEADERS[r],e=2===r?t=y.TYPE_COM_HEADERS[1]:"",e=3===r?t=y.TYPE_COM_HEADERS[2]:"",e="type_1 zoom-in ".concat(e);else if(2===s)e="type_2 zoom-in",t=y.TYPE_COM_HEADERS[r];else if(3===s)e="type_3 zoom-in",t=y.TYPE_COM_HEADERS[r];else if(4===s){e="type_4 zoom-in",t=y.TYPE_COM_HEADERS[r]}else 5===s?(e="type_5 zoom-in",t=y.TYPE_COM_HEADERS[r]):6===s?e="type_6 zoom-in":7===s?(e="type_7 zoom-in",t=y.TYPE_COM_HEADERS[r]):e="";return this._cont=6===s?h.createElement("div",null,h.createElement(S.default,{inview:o,graphic:i,maxWidth:1030,className:e,headerColor:t,optionBoxPosition:"bottom",onChange:this.props.onChange})):h.createElement(j,Object.assign({},T,{ref:this._refSwiper}),h.createElement("div",null,h.createElement(S.default,{inview:o,graphic:i,maxWidth:1030,className:e,headerColor:t,optionBoxPosition:"bottom",onChange:this.props.onChange}))),h.createElement("div",{key:"idx",className:"single"},this._cont)}}]),t}();R=f([_.observer],R);var N=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._curIdx=0,n._inputed=[],n._returns=[],n._onNext=function(){0===n.props.state.graphicProg&&(n._curIdx>=n._graps.length-1||n._inputed[n._curIdx]&&(b.App.pub_playBtnTab(),n._curIdx++,n._returns[n._curIdx]&&(n._returns[n._curIdx].stime=Date.now())))},n._onSend=function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.state,r=t.actions,b.App.student){e.next=5;break}return e.abrupt("return");case 5:if(this.props.view){e.next=9;break}return e.abrupt("return");case 9:if(0===n.graphicProg){e.next=13;break}return e.abrupt("return");case 13:if(this._curIdx===this._inputed.length-1){e.next=17;break}return e.abrupt("return");case 17:if(this._inputed[this._curIdx]){e.next=19;break}return e.abrupt("return");case 19:return n.graphicProg=1,b.App.pub_playToPad(),o=[],this._returns.forEach(function(e,t){o.push({answer:e.answer.slice(0),correct:e.correct,stime:e.stime,etime:e.etime})}),i={msgtype:"graphic_return",id:b.App.student.id,returns:o},g.sendTeacher(11,i),e.next=27,E.wait(500);case 27:if(this.props.view){e.next=31;break}return e.abrupt("return");case 31:if(1===n.graphicProg){e.next=33;break}return e.abrupt("return");case 33:return b.App.pub_playGoodjob(),this.props.actions.startGoodJob(),e.next=37,E.wait(1500);case 37:if(this.props.view){e.next=41;break}return e.abrupt("return");case 41:if(1===n.graphicProg){e.next=43;break}return e.abrupt("return");case 43:6==r.getData().visualizing_type&&1==n.isTableItemSwapped&&(r.swapGraphicData(),r.setIsTableItemSwapped()),n.graphicProg=2;case 46:case"end":return e.stop()}},e,this)}))},n._onChange=function(e,t){if(0===n.props.state.graphicProg&&n._curIdx<n._inputed.length){for(var r=n._graps[n._curIdx],o=!0,i=0;i<r.app_drops.length;i++)if(""===r.app_drops[i].inputed){o=!1;break}if(n._inputed[n._curIdx]=o,n._returns[n._curIdx]){if(n._graps[n._curIdx].app_drops.length!==n._returns[n._curIdx].answer.length)for(var s=0;s<n._graps[n._curIdx].app_drops.length;s++)n._returns[n._curIdx].answer[s]=0;n._graps[n._curIdx].app_drops[t].choices.forEach(function(r,o){r===e&&(n._returns[n._curIdx].answer[t]=o+1)});var a=!0;n._graps[n._curIdx].app_drops.forEach(function(e,t){e.inputed!==e.correct&&(a=!1)}),n._returns[n._curIdx].correct=a,n._returns[n._curIdx].etime=Date.now()}}},n._graps=e.actions.getData().graphic;for(var o=0;o<n._graps.length;o++)n._inputed[o]=!1,n._returns[o]={answer:[],correct:!1,stime:0===o?Date.now():0,etime:0};return n}return u(t,h.Component),i(t,[{key:"componentDidUpdate",value:function(e){if(!this.props.view&&e.view){for(var t=Date.now(),n=0;n<this._inputed.length;n++)this._inputed[n]=!1,this._returns[n].answer=[],this._returns[n].correct=!1,this._returns[n].stime=t,this._returns[n].etime=0;this._curIdx=0,this._graps.forEach(function(e){e.app_drops.forEach(function(e){e.inputed=""})})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.state,o=t.actions,i=o.getData(),s=i.graphic,a=i.visualizing_type,c=this._curIdx;r.graphicProg>=2&&(c=this._inputed.length);var u,l=c===this._inputed.length,p=c===this._inputed.length-1,f=(u=c<this._inputed.length&&this._inputed[c])&&c<this._inputed.length-1&&0===r.graphicProg,d=u&&p&&r.graphicProg<=1;return h.createElement("div",{className:"s_graphic",style:n?void 0:k.HIDE},h.createElement("div",{className:"btn_page_box",style:l||""!==r.graphicSheet?k.NONE:void 0},s.map(function(e,t){return h.createElement("span",{key:t,className:c===t?"on":""},t+1)})),h.createElement("div",{className:"table-container",style:""===r.graphicSheet?void 0:k.HIDE},h.createElement("div",{className:"table-wrapper",style:{left:-1280*c}},s.map(function(t,r){return h.createElement(R,{key:r,idx:r,visualizing_type:a,graphic:t,view:n,onChange:e._onChange})}),h.createElement("div",{className:"s_graphic_result"},h.createElement(O.default,{view:n,on:l,graphics:s,state:r,actions:o})))),h.createElement(w.ToggleBtn,{className:"btn_next",view:f,onClick:this._onNext}),h.createElement(x.default,{view:d,type:"pad",originY:0,sended:!1,onSend:this._onSend}),h.createElement(P.default,{view:n&&"pentool"===r.graphicSheet,actions:o}),h.createElement(C.default,{view:n&&"keyboard"===r.graphicSheet,actions:o}))}}]),t}();f([v.observable],N.prototype,"_curIdx",void 0),f([v.observable],N.prototype,"_inputed",void 0),f([v.observable],N.prototype,"_returns",void 0),N=f([_.observer],N),t.default=N},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(1),p=n(5),f=n(13),d=n(22),h=n(11).default,_={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!0,followFinger:!0,noSwipingClass:"swiper-no-swiping",scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,i(t).apply(this,arguments)))._refSwiper=function(t){if(!e.m_swiper&&t){e.m_swiper=t.swiper;var n=e.m_swiper.wrapperEl;n.children[0].clientHeight>=n.clientHeight?(n.classList.remove("swiper-no-swiping"),e.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.remove("swiper-no-swiping")):(n.classList.add("swiper-no-swiping"),e.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.add("swiper-no-swiping"))}},e}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=this;this.m_swiper&&(this.m_swiper.slideTo(0,0),p.delay(function(){t.m_swiper.update(),t.m_swiper.scrollbar&&t.m_swiper.scrollbar.updateSize();var e=t.m_swiper.wrapperEl;e.children[0].clientHeight>=e.clientHeight?(e.classList.remove("swiper-no-swiping"),t.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.remove("swiper-no-swiping")):(e.classList.add("swiper-no-swiping"),t.m_swiper.$wrapperEl[0].querySelector(".swiper-slide").classList.add("swiper-no-swiping"))},100))}},{key:"render",value:function(){var e,t,n=this.props,r=(n.view,n.on),o=n.graphics,i=n.state,s=n.actions.getData(),a=i.graphicProg>=3;1===s.visualizing_type?(e="type_1",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,maxWidth:1188,className:"type_1",headerColor:f.TYPE_COM_HEADERS[0],optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1})),u.createElement("div",{className:"link_line"}),u.createElement("div",{className:"middle"},u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,maxWidth:583,className:"type_1",headerColor:f.TYPE_COM_HEADERS[1],optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2})),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[2],disableSelect:!0,maxWidth:583,className:"type_1",headerColor:f.TYPE_COM_HEADERS[1],optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:3}))),u.createElement("div",{className:"link_line_down"}),u.createElement("div",{className:"bottom"},u.createElement(d.default,{inview:r,graphic:o[3],disableSelect:!0,maxWidth:1188,className:"type_1",headerColor:f.TYPE_COM_HEADERS[2],optionBoxPosition:"top",viewResult:a,isStudent:!0,idx:4})))):2===s.visualizing_type?(e="type_2",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,className:"type_2",headerColor:f.TYPE_COM_HEADERS[0],maxWidth:550,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1})),u.createElement("span",{className:"icon_arrow"}),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,className:"type_2",headerColor:f.TYPE_COM_HEADERS[1],maxWidth:550,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2}))),u.createElement("div",{className:"link_line"}),u.createElement("div",{className:"middle"},u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[2],disableSelect:!0,className:"type_2",headerColor:f.TYPE_COM_HEADERS[2],maxWidth:770,optionBoxPosition:"top",viewResult:a,isStudent:!0,idx:3}))))):3===s.visualizing_type?(e="type_3",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,className:"type_3",headerColor:f.TYPE_COM_HEADERS[0],maxWidth:397.1,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1})),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,className:"type_3",headerColor:f.TYPE_COM_HEADERS[1],maxWidth:397.1,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2})),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[2],disableSelect:!0,className:"type_3",headerColor:f.TYPE_COM_HEADERS[2],maxWidth:397.1,optionBoxPosition:"top",viewResult:a,isStudent:!0,idx:3}))))):4===s.visualizing_type?(e="type_4",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,className:"type_4",headerColor:f.TYPE_COM_HEADERS[0],maxWidth:1219.9,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1}),u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,className:"type_4",headerColor:f.TYPE_COM_HEADERS[1],maxWidth:1219.9,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2})))):5===s.visualizing_type?(e="type_5",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,className:"type_5",headerColor:f.TYPE_COM_HEADERS[0],maxWidth:1219.9,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1}),u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,className:"type_5",headerColor:f.TYPE_COM_HEADERS[1],maxWidth:1219.9,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2}),u.createElement(d.default,{inview:r,graphic:o[2],disableSelect:!0,className:"type_5",headerColor:f.TYPE_COM_HEADERS[2],maxWidth:1219.9,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:3})))):6===s.visualizing_type?(e="type_6",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,className:"type_6",maxWidth:352,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1})),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,className:"type_6",maxWidth:352,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2})),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[2],disableSelect:!0,className:"type_6",maxWidth:352,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:3}))))):7===s.visualizing_type&&(e="type_7",t=u.createElement(u.Fragment,null,u.createElement("div",{className:"top"},u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[0],disableSelect:!0,className:"type_3",headerColor:f.TYPE_COM_HEADERS[0],maxWidth:517,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:1})),u.createElement("div",null,u.createElement(d.default,{inview:r,graphic:o[1],disableSelect:!0,className:"type_3",headerColor:f.TYPE_COM_HEADERS[1],maxWidth:517,optionBoxPosition:"bottom",viewResult:a,isStudent:!0,idx:2})))));var c=s.app_graphic_title,l=u.createElement("div",{className:"title"},c);return c.trim()||(l=u.createElement(u.Fragment,null)),this._cont="type_3"===e||"type_6"===e||"type_7"===e?u.createElement("div",{className:"table_box "+e},l,t):u.createElement(h,Object.assign({},_,{ref:this._refSwiper}),u.createElement("div",{className:"table_box "+e},l,t)),u.createElement(u.Fragment,null,this._cont)}}])&&r(n.prototype,a),c&&r(n,c),t}();m=c([l.observer],m),t.default=m},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(1),f=n(4),d=n(7),h=n(6),_=n(2),m=n(55),y=n(56),v=n(8),b=n(10),g=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=o(t).apply(this,arguments),(e=!r||"object"!==a(r)&&"function"!=typeof r?i(n):r)._penui=new y.PenUIStore,e._started=!1,e._prog=0,e._stime=0,e._refCanvas=function(t){if(!e._kpen&&t){e._kpen=new m.KPen(t,function(t,n){return 0===e._stime&&(e._stime=Date.now()),!!e.props.view&&(e._penui.erase||(e._started=!0),n.erase=e._penui.erase,n.color=e._penui.color,n.thick=e._penui.erase?e._penui.thick_erase:e._penui.thick,0===e._prog)},function(e,t){},function(t,n){return!!e._kpen&&(e._penui.setUndoLen(e._kpen.undoLen),!0)})}},e._onSend=function(){return u(i(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view){e.next=4;break}return e.abrupt("return");case 4:if(f.App.student){e.next=8;break}return e.abrupt("return");case 8:if(this._kpen){e.next=12;break}return e.abrupt("return");case 12:if(0===this._prog){e.next=14;break}return e.abrupt("return");case 14:if(this._prog=1,this.props.actions.setUploadedFnc(this._uploaded),this.props.actions.setLoading(!0),t=this._kpen.toDataURL("#ffffff"),f.App.pub_playToPad(),f.App.isDvlp||""===t){e.next=23;break}d.uploadImageToServer(t),e.next=26;break;case 23:return e.next=25,h.wait(1e3);case 25:this._uploaded("");case 26:case"end":return e.stop()}},e,this)}))},e._uploaded=function(t){if(e.props.view&&f.App.student&&e._kpen&&1===e._prog){var n={msgtype:"sheet_return",id:f.App.student.id,type:"pentool",stime:e._stime,etime:Date.now(),input:t};d.sendTeacher(11,n),d.uploadStudentReport(3,t,""),e._prog=2,e.props.actions.setUploadedFnc(null),e.props.actions.setLoading(!1),f.App.pub_playGoodjob(),e.props.actions.startGoodJob()}},e}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"clear",value:function(){this._started=!1,this._prog=0,this.props.actions.setLoading(!1),this._kpen&&(this._kpen.clear(),this._penui.setUndoLen(0),this._penui.setErase(!1))}},{key:"reset",value:function(){this._kpen&&(this._kpen.reset(),this._penui.setUndoLen(0))}},{key:"undo",value:function(){if(this._kpen){this._kpen.undo();var e=this._kpen.undoLen;this._penui.setUndoLen(e),0===e&&this._penui.setErase(!1)}}},{key:"redo",value:function(){}},{key:"canUndo",value:function(){return this._kpen&&this._kpen.undoLen>0}},{key:"canRedo",value:function(){return!1}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?this._stime=0:!this.props.view&&e.view&&this.clear()}},{key:"render",value:function(){var e=this.props.view;return l.createElement("div",{className:"s-pentool",style:e?void 0:v.NONE},l.createElement("div",{className:"draw_box"},l.createElement("img",{src:"/content/digenglish_lib/B/rw_comprehension/student/images/icon_draw.png",width:1205,height:654,style:this._started?v.NONE:void 0}),l.createElement("canvas",{ref:this._refCanvas,width:1205,height:600})),l.createElement(y.PenUI,{view:this._prog<2,draw:this,store:this._penui,disabled:!1}),l.createElement(b.default,{view:this._prog<2&&this._penui.undoLen>0,type:"pad",originY:0,sended:!1,onSend:this._onSend}))}}])&&r(n.prototype,c),p&&r(n,p),t}();c([_.observable],g.prototype,"_started",void 0),c([_.observable],g.prototype,"_prog",void 0),g=c([p.observer],g),t.default=g},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pid=-1,this._undos=[],this._redos=[],this._ratio=1,this._el=t,t.setAttribute("touch-action","none");var s=t.getContext("2d"),a=t.getAttribute("hidpi"),c=1;if(a&&!/^off|false$/.test(a)){window.devicePixelRatio;var u=s.webkitBackingStorePixelRatio||s.backingStorePixelRatio||1;c=devicePixelRatio/u,s.scale(c,c)}this._ctx=s,this._ratio=c;var l=0,p=0,f=!1,d=null,h=function(e){if(!(i._pid<0||i._pid!==e.pointerId)){try{t.releasePointerCapture(i._pid)}catch(e){}if(i._pid=-1,d){var n=e.offsetX,r=e.offsetY,a=d.path;n===l&&r===p||(a.lineTo(n,r),s.lineTo(n,r),s.stroke(),f=!0),f&&i._undos.push(d),o(e,d),d=null,f=!1}}};t.addEventListener("pointerdown",function(e){if(!(i._pid>=0)){l=e.offsetX,p=e.offsetY;var r=new Path2D;if(n(e,d={idx:-1,erase:!1,color:"",thick:1,path:r})){f=!1,i._pid=e.pointerId;try{t.setPointerCapture(i._pid)}catch(e){}r.moveTo(l,p),s.beginPath(),s.lineCap="round",s.lineJoin="round",s.strokeStyle=d.color,d.erase?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="source-over",s.lineWidth=d.thick,s.moveTo(l,p)}else d=null}}),t.addEventListener("pointermove",function(e){if(i._pid===e.pointerId&&d){var t=e.offsetX,n=e.offsetY;t===l&&n===p||(d.path.lineTo(t,n),s.lineTo(t,n),s.stroke(),l=t,p=n,f=!0,r(e,d))}}),t.addEventListener("pointerup",h),t.addEventListener("pointercancel",h)}var t,n,o;return t=e,(n=[{key:"clear",value:function(){if(this._pid>=0){try{this._el.releasePointerCapture(this._pid)}catch(e){}this._pid=-1}var e=this._el,t=this._ctx,n=this._undos,r=this._redos;for(t.clearRect(0,0,e.width,e.height);n.length>0;)n.pop();for(;r.length>0;)r.pop()}},{key:"reset",value:function(){var e=this._el,t=this._ctx,n=this._undos,r=this._redos;for(t.clearRect(0,0,e.width,e.height);n.length>0;)n.pop();for(;r.length>0;)r.pop()}},{key:"undo",value:function(){if(0===this._undos.length)return null;var e=this._undos.pop();return this._redraw(),this._redos.push(e),e}},{key:"redo",value:function(){if(0===this._redos.length)return null;var e=this._redos.pop();return this._undos.push(e),this._redraw(),e}},{key:"canUndo",value:function(){return this._undos.length>0}},{key:"canRedo",value:function(){return this._redos.length>0}},{key:"toDataURL",value:function(e){if(e){var t=this._el,n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,t.width,t.height),r.drawImage(t,0,0),n.toDataURL()}return this._el.toDataURL()}},{key:"_redraw",value:function(){var e=this._el,t=this._ctx,n=this._undos;if(t.clearRect(0,0,e.width,e.height),0!==n.length)for(var r=0,o=n.length;r<o;r++){var i=n[r];t.strokeStyle=i.color,i.erase?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="source-over",t.lineWidth=i.thick,t.lineCap="round",t.lineJoin="round",t.stroke(i.path)}}},{key:"undoLen",get:function(){return this._undos.length}},{key:"redoLen",get:function(){return this._redos.length}}])&&r(t.prototype,n),o&&r(t,o),e}();t.KPen=o},function(e,t,n){"use strict";function r(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var p=n(0),f=n(2),d=n(1),h=n(9),_=n(4),m=function(){function e(){s(this,e),this.m_color="#000000",this.m_thick=5,this.m_thick_erase=25,this.m_erase=!1,this.m_undoLen=0}return c(e,[{key:"setColor",value:function(e){this.m_color=e}},{key:"setThick",value:function(e){this.m_thick=e}},{key:"setThickErase",value:function(e){this.m_thick_erase=e}},{key:"setErase",value:function(e){this.m_erase=e}},{key:"setUndoLen",value:function(e){this.m_undoLen=e}},{key:"color",get:function(){return this.m_color}},{key:"thick",get:function(){return this.m_thick}},{key:"thick_erase",get:function(){return this.m_thick_erase}},{key:"erase",get:function(){return this.m_erase}},{key:"undoLen",get:function(){return this.m_undoLen}}]),e}();l([f.observable],m.prototype,"m_color",void 0),l([f.observable],m.prototype,"m_thick",void 0),l([f.observable],m.prototype,"m_erase",void 0),l([f.action],m.prototype,"setColor",null),l([f.action],m.prototype,"setErase",null),l([f.observable],m.prototype,"m_undoLen",void 0),l([f.action],m.prototype,"setUndoLen",null),t.PenUIStore=m;var y=function(e){function t(e){var n;return s(this,t),(n=r(this,o(t).call(this,e)))._clickReset=function(e){n.props.draw&&(n.props.draw.reset(),n.props.store.setErase(!1)),_.App.pub_playBtnTab()},n._clickUndo=function(e){n.props.draw&&n.props.draw.undo(),_.App.pub_playBtnTab()},n._clickColor=function(e){var t=e.currentTarget.className;t&&10===t.length&&(t=t.substring(4),n.props.store.setColor("#"+t)),_.App.pub_playBtnTab()},n._clickErase=function(e){n.props.store.setErase(!n.props.store.erase),_.App.pub_playBtnTab()},n._clickThick=function(e){n.props.store.setErase(!1),n.props.store.setThick(5),_.App.pub_playBtnTab()},n._clickThickBold=function(e){n.props.store.setErase(!1),n.props.store.setThick(10),_.App.pub_playBtnTab()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,p.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.store,n=e.disabled;return p.createElement("div",{className:this.props.view?"penui on":"penui"},p.createElement("div",{className:"pen_color"},p.createElement(h.ToggleBtn,{className:"btn_000000",disabled:n||t.erase,on:!t.erase&&"#000000"===t.color,onClick:this._clickColor}),p.createElement(h.ToggleBtn,{className:"btn_1347e9",disabled:n||t.erase,on:!t.erase&&"#1347e9"===t.color,onClick:this._clickColor}),p.createElement(h.ToggleBtn,{className:"btn_ec1919",disabled:n||t.erase,on:!t.erase&&"#ec1919"===t.color,onClick:this._clickColor}),p.createElement(h.ToggleBtn,{className:"btn_30aa01",disabled:n||t.erase,on:!t.erase&&"#30aa01"===t.color,onClick:this._clickColor}),p.createElement(h.ToggleBtn,{className:"btn_fddc00",disabled:n||t.erase,on:!t.erase&&"#fddc00"===t.color,onClick:this._clickColor})),p.createElement("div",{className:"pen_select"},p.createElement(h.ToggleBtn,{disabled:n,on:!n&&!t.erase&&5===t.thick,className:"pen_icon",onClick:this._clickThick}),p.createElement(h.ToggleBtn,{disabled:n,on:!n&&!t.erase&&10===t.thick,className:"pen_thick",onClick:this._clickThickBold})),p.createElement("div",{className:"pen_button"},p.createElement(h.ToggleBtn,{className:"btn_eraser",disabled:n||0===t.undoLen,on:!n&&t.erase,onClick:this._clickErase}),p.createElement(h.ToggleBtn,{className:"btn_undo",disabled:n||0===t.undoLen,onClick:this._clickUndo}),p.createElement(h.ToggleBtn,{className:"btn_reset",disabled:n,onClick:this._clickReset})))}}]),t}();y.defaultProps={disabled:!1},y=l([d.observer],y),t.PenUI=y},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(2),f=n(1),d=n(20),h=n(15),_=n(4),m=n(7),y=n(8),v=n(10),b=n(6),g=function(e){function t(e){var n,r,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,s=o(t).call(this,e),(n=!s||"object"!==a(s)&&"function"!=typeof s?i(r):s)._text="",n._textLen=0,n._prog=0,n._stime=0,n._refArea=function(e){!n.m_tarea&&e&&(n.m_tarea=e)},n._onChange=function(e){n.props.view&&0===n._prog&&(0===n._stime&&(n._stime=Date.now()),n._text=e,n._textLen=e.trim().length)},n._onDone=function(e){n.props.view&&0===n._prog&&(n._text=e,n._textLen=e.trim().length,h.state.state="off")},n._onSend=function(){return u(i(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view){e.next=4;break}return e.abrupt("return");case 4:if(_.App.student){e.next=8;break}return e.abrupt("return");case 8:if(this.m_tarea){e.next=12;break}return e.abrupt("return");case 12:if(0!==this._textLen){e.next=16;break}return e.abrupt("return");case 16:if(0===this._prog){e.next=18;break}return e.abrupt("return");case 18:return this._prog=1,h.state.state="hide",_.App.pub_playToPad(),m.uploadStudentReport(2,this._text,""),t={msgtype:"sheet_return",id:_.App.student.id,type:"keyboard",stime:this._stime,etime:Date.now(),input:this._text},m.sendTeacher(11,t),e.next=26,b.wait(500);case 26:if(this.props.view){e.next=30;break}return e.abrupt("return");case 30:if(1===this._prog){e.next=32;break}return e.abrupt("return");case 32:this._prog=2,_.App.pub_playGoodjob(),this.props.actions.startGoodJob();case 35:case"end":return e.stop()}},e,this)}))},h.state.state="on",n}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(h.state.state="on",this._prog=0,this._text="",this._textLen=0,this._stime=0):!this.props.view&&e.view&&(h.state.state="hide")}},{key:"render",value:function(){return l.createElement("div",{className:"s-keyboard",style:this.props.view?void 0:y.NONE},l.createElement("div",{className:"area-bnd "+h.state.state},l.createElement(d.KTextArea,{ref:this._refArea,view:this.props.view,on:this.props.view&&0===this._prog,maxLineNum:7,onChange:this._onChange,onDone:this._onDone})),l.createElement(v.default,{view:this._prog<2&&this._textLen>0&&"on"!==h.state.state,type:"pad",originY:"on"===h.state.state?-380:0,sended:!1,onSend:this._onSend}),l.createElement(h.Keyboard,null))}}])&&r(n.prototype,c),p&&r(n,p),t}();c([p.observable],g.prototype,"_textLen",void 0),c([p.observable],g.prototype,"_prog",void 0),g=c([f.observer],g),t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),_=n(1),m=n(5),y=n(2),v=n(4),b=n(7),g=n(9),w=n(6),E=n(23),x=n(10),k=n(8),S=n(16),O=n(21),P=n(11).default,C=function(e){function t(){var e;return r(this,t),(e=s(this,c(t).apply(this,arguments)))._onClick=function(){e.props.onClick(e.props.num)},e}return u(t,h.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.num,n=e.text,r=e.selected,o=(e.answer,e.prog),i=this.props.view;return i||(i=!1),h.createElement(O.default,{className:"btn_choice",num:t,on:t===r,disabled:0!==o,onClick:this._onClick},h.createElement("div",null,h.createElement(S.default,{view:i,maxLineNum:1,lineHeight:120,minSize:27,maxSize:30,textAlign:"left"},n)))}}]),t}(),j=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._box=null,n._rcalnum=0,n._swiper=null,n._refText=function(e){!n._box&&e&&(n._box=e)},n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)};var o=e.summary,i=o.choice_1;o.choice_2.length>i.length?i=o.choice_2:o.choice_3.length>i.length&&(i=o.choice_3);var a=e.summary.question.replace(/<br>/gi,""),u=E.parseBlock(a,"block",i);return n._jsx=h.createElement(h.Fragment,null,u.map(function(e,t){return e})),n._max=i,n}return u(t,h.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){if(e.selected!==this.props.selected){if(!this._box)return;var t=this._box.querySelector(".block");if(!t)return;e.summary;var n=this._max;for(1===e.selected?n=e.summary.choice_1:2===e.selected?n=e.summary.choice_2:3===e.selected&&(n=e.summary.choice_3);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(document.createTextNode(n)),0===e.selected?t.classList.contains("view")&&t.classList.remove("view"):t.classList.contains("view")||t.classList.add("view")}e.selected?this._rcalnum++:this._rcalnum=0}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.view&&!e.view&&this._swiper&&(this._swiper.slideTo(0,0),m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},600))}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.summary,r=e.selected,o=e.prog;return h.createElement(h.Fragment,null,h.createElement("div",{className:"quizs_box"},h.createElement("img",{src:v.App.data_url+n.image}),h.createElement("div",{ref:this._refText},h.createElement(P,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},h.createElement("div",{className:"txt_box"},this._jsx)))),h.createElement("div",{className:"choice_box"},h.createElement(C,{prog:o,num:1,view:t,text:n.choice_1,selected:r,answer:n.answer,onClick:this.props.onSelect}),h.createElement(C,{prog:o,num:2,view:t,text:n.choice_2,selected:r,answer:n.answer,onClick:this.props.onSelect}),h.createElement(C,{prog:o,num:3,view:t,text:n.choice_3,selected:r,answer:n.answer,onClick:this.props.onSelect})))}}]),t}();j=f([_.observer],j);var T=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._box=null,n._refText=function(e){!n._box&&e&&(n._box=e)};var o,i=e.summary;o=2===i.answer?i.choice_2:3===i.answer?i.choice_3:i.choice_1;var a=n._parseBlock(e.summary.question,"block",o);return n._jsx=h.createElement(h.Fragment,null,a.map(function(e,t){return e})),n}return u(t,h.Component),i(t,[{key:"_parseBlock",value:function(e,t,n){for(var r,o,i=[],s=new RegExp(/\{(.*?)\}/g),a=s.exec(e),c=0,u=0,l="";a;){a.index>c&&(l=e.substring(c,a.index),r=l.split("<br>"),o=[],r.forEach(function(e,t){t>=r.length-1?o.push(h.createElement("span",{key:"l1_"+t},e)):o.push(h.createElement("span",{key:t},"l1_"+e,h.createElement("br",null)))}),i.push(h.createElement("span",{key:u++},o.map(function(e){return e})))),l=a[1];var p=n;p||(p=l),r=p.split("<br>"),o=[],r.forEach(function(e,t){t>=r.length-1?o.push(h.createElement("span",{key:"l2_"+t},e)):o.push(h.createElement("span",{key:"l2_"+t},e,h.createElement("br",null)))}),i.push(h.createElement("span",{key:u++,className:t,"data-correct":l},o.map(function(e){return e}))),c=s.lastIndex,a=s.exec(e)}return c<e.length&&(l=e.substring(c),r=l.split("<br>"),o=[],r.forEach(function(e,t){t>=r.length-1?o.push(h.createElement("span",{key:"l3_"+t},e)):o.push(h.createElement("span",{key:"l3_"+t},e,h.createElement("br",null)))}),i.push(h.createElement("span",{key:u++},o.map(function(e){return e})))),i}},{key:"componentWillReceiveProps",value:function(e){if(e.prog!==this.props.prog&&e.prog>=2){if(!this._box)return;var t=this._box.querySelector(".block");if(!t)return;var n=e.summary,r="";for(e.prog>=3||0===e.selected?r=2===n.answer?n.choice_2:3===n.answer?n.choice_3:n.choice_1:(1===e.selected&&(r=n.choice_1),2===e.selected&&(r=n.choice_2),3===e.selected&&(r=n.choice_3));t.lastChild;)t.removeChild(t.lastChild);t.appendChild(document.createTextNode(r)),e.prog>=3?(t.classList.contains("view")&&t.classList.remove("view"),e.selected===n.answer?(t.classList.contains("wrong")&&t.classList.remove("wrong"),t.classList.contains("correct")||t.classList.add("correct")):(t.classList.contains("correct")&&t.classList.remove("correct"),t.classList.contains("wrong")||t.classList.add("wrong"))):(t.classList.contains("wrong")&&t.classList.remove("wrong"),t.classList.contains("correct")&&t.classList.remove("correct"),e.selected>0?t.classList.contains("view")||t.classList.add("view"):t.classList.contains("view")&&t.classList.remove("view"))}}},{key:"render",value:function(){var e=this.props,t=e.summary;e.prog,e.selected;return h.createElement(h.Fragment,null,h.createElement("div",{className:"quiz_box"},h.createElement("div",{className:"img-box"},h.createElement("img",{src:v.App.data_url+t.image})),h.createElement("div",{ref:this._refText},this._jsx)),h.createElement("div",{className:"btn_arrow_down",style:{display:this.props.len===t.seq?"none":""}}))}}]),t}(),R=function(e){function t(e){var n;r(this,t),(n=s(this,c(t).call(this,e)))._curIdx=0,n._selected=[],n._swiper=null,n._refSwiper=function(e){!n._swiper&&e&&(n._swiper=e.swiper)},n._onNext=function(){0===n.props.state.summaryProg&&(n._curIdx>=n._selected.length-1||0!==n._selected[n._curIdx].answer&&(v.App.pub_playBtnTab(),n._curIdx++,n._selected[n._curIdx]&&(n._selected[n._curIdx].stime=Date.now())))},n._onSend=function(){return d(a(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.state,v.App.student){e.next=5;break}return e.abrupt("return");case 5:if(this.props.view){e.next=9;break}return e.abrupt("return");case 9:if(0===t.summaryProg){e.next=13;break}return e.abrupt("return");case 13:if(this._curIdx===this._selected.length-1){e.next=17;break}return e.abrupt("return");case 17:if(0!==this._selected[this._curIdx].answer){e.next=19;break}return e.abrupt("return");case 19:return t.summaryProg=1,v.App.pub_playToPad(),n=[],this._selected.forEach(function(e,t){n.push({answer:e.answer,stime:e.stime,etime:e.etime})}),r={msgtype:"summary_return",id:v.App.student.id,returns:n},b.sendTeacher(11,r),e.next=27,w.wait(500);case 27:if(this.props.view){e.next=31;break}return e.abrupt("return");case 31:if(1===t.summaryProg){e.next=33;break}return e.abrupt("return");case 33:return v.App.pub_playGoodjob(),this.props.actions.startGoodJob(),e.next=37,w.wait(1500);case 37:if(this.props.view){e.next=41;break}return e.abrupt("return");case 41:if(1===t.summaryProg){e.next=43;break}return e.abrupt("return");case 43:t.summaryProg=2;case 44:case"end":return e.stop()}},e,this)}))},n._onChange=function(e){0===n.props.state.summaryProg&&n._curIdx<n._selected.length&&(v.App.pub_playBtnTab(),n._selected[n._curIdx].answer=e,n._selected[n._curIdx].etime=Date.now())};for(var o=e.actions.getData().summarizing,i=0;i<o.length;i++)n._selected[i]={answer:0,stime:0===i?Date.now():0,etime:0};return n}return u(t,h.Component),i(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.view&&e.view){for(var n=0;n<this._selected.length;n++)this._selected[n].answer=0,this._selected[n].stime=Date.now(),this._selected[n].etime=0;this._curIdx=0,this._swiper&&(this._swiper.slideTo(0,0),m.delay(function(){t._swiper&&(t._swiper.update(),t._swiper.scrollbar&&t._swiper.scrollbar.updateSize())},600))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.state,o=t.actions.getData().summarizing,i=this._curIdx;r.summaryProg>=2&&(i=this._selected.length);var s=i===this._selected.length,a=i===this._selected.length-1,c=this._selected[0].answer,u=(c=i<this._selected.length?this._selected[i].answer:0)>0&&i<this._selected.length-1&&0===r.summaryProg,l=c>0&&a&&r.summaryProg<=1;return h.createElement("div",{className:"s_summary",style:n?void 0:k.HIDE},h.createElement("div",{className:"btn_page_box",style:s?k.NONE:void 0},o.map(function(e,t){return h.createElement("span",{key:t,className:i===t?"on":""},t+1)})),h.createElement("div",{className:"table-container"},h.createElement("div",{className:"table-wrapper",style:{left:-1280*i}},o.map(function(t,o){return h.createElement("div",{key:o,className:"summary-item"},h.createElement(j,{view:n,summary:t,prog:r.summaryProg,selected:e._selected[o].answer,onSelect:e._onChange}))}),h.createElement("div",{className:"s_summary_result"},h.createElement(P,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},o.map(function(t,n){return h.createElement("div",{key:n,className:"summary_box"},h.createElement(T,{summary:t,selected:e._selected[n].answer,len:o.length,prog:r.summaryProg}))}))))),h.createElement(g.ToggleBtn,{className:"btn_next",view:u,onClick:this._onNext}),h.createElement(x.default,{view:l,type:"pad",originY:0,sended:!1,onSend:this._onSend}))}}]),t}();f([y.observable],R.prototype,"_curIdx",void 0),f([y.observable],R.prototype,"_selected",void 0),R=f([_.observer],R),t.default=R},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),h=n(1),_=n(2),m=n(6),y=n(23),v=n(8),b=n(11).default,g=function(e){function t(e){var n;return r(this,t),(n=s(this,a(t).call(this,e)))._jsx=y.sentence2jsx(e.script.dms_eng,"closure",void 0,!1,"word"),n}return c(t,d.Component),i(t,[{key:"render",value:function(){var e=this.props,t=(e.script,e.focusIdx),n=e.viewSctiprFocusBG,r=["eng"];return t===e.idx&&(r.push("on"),n&&r.push("bg-on")),d.createElement("div",{className:r.join(" ")},this._jsx)}}]),t}(),w=function(e){function t(){var e;return r(this,t),(e=s(this,a(t).apply(this,arguments)))._swiper=null,e._refSwiper=function(t){!e._swiper&&t&&(e._swiper=t.swiper)},e}return c(t,d.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){e.view&&this.props.view}},{key:"_updateSwiper",value:function(){return f(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.wait(100);case 2:this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0));case 3:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(e){if(this.props.view&&!e.view&&this._updateSwiper(),this.props.focusIdx>=0&&this.props.focusIdx!==e.focusIdx&&this._swiper){this.props.actions.getData().scripts;var t=this.props.focusIdx;t>=1?this._swiper.slideTo(t-1):t>=0&&this._swiper.slideTo(0)}}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.state,r=e.actions,o=e.focusIdx,i=r.getData();return d.createElement("div",{className:"s_v_script",style:t?void 0:v.HIDE},d.createElement("div",{className:"page "+(n.isPlay_v?"swiper-no-swiping":"")},d.createElement(b,{ref:this._refSwiper,direction:"vertical",scrollbar:{el:".swiper-scrollbar",draggable:!0},observer:!0,slidesPerView:"auto",freeMode:!0},i.scripts.map(function(e,t){return d.createElement("div",{key:t,className:"script"},d.createElement(g,{idx:t,focusIdx:o,viewSctiprFocusBG:n.viewSctiprFocusBG,script:e}))}))))}}]),t}();p([_.observable],w.prototype,"_swiper",void 0),w=p([h.observer],w),t.default=w},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),p=n(1),f=n(2),d=n(4),h=n(7),_=n(9),m=n(6),y=n(8),v=n(10),b=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=o(t).apply(this,arguments),(e=!r||"object"!==a(r)&&"function"!=typeof r?i(n):r)._selected=0,e._stime=0,e._onSend=function(){return u(i(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.view){e.next=4;break}return e.abrupt("return");case 4:if(d.App.student){e.next=8;break}return e.abrupt("return");case 8:if(0===this.props.state.checkupProg){e.next=10;break}return e.abrupt("return");case 10:return t=this.props.actions.getData().checkup[this.props.state.checkupIdx],n={msgtype:"v_checkup_return",id:d.App.student.id,returns:[this._selected],stime:this._stime,etime:Date.now(),seq:t.seq},h.sendTeacher(11,n),this.props.state.checkupProg=1,d.App.pub_playToPad(),e.next=17,m.wait(500);case 17:if(this.props.view){e.next=21;break}return e.abrupt("return");case 21:if(1===this.props.state.checkupProg){e.next=23;break}return e.abrupt("return");case 23:this.props.state.checkupProg=2,d.App.pub_playGoodjob(),this.props.actions.startGoodJob();case 26:case"end":return e.stop()}},e,this)}))},e._clickTrue=function(){0===e._stime&&(e._stime=Date.now()),0===e.props.state.checkupProg&&(d.App.pub_playBtnTab(),1===e._selected?e._selected=0:e._selected=1)},e._clickFalse=function(){0===e._stime&&(e._stime=Date.now()),0===e.props.state.checkupProg&&(d.App.pub_playBtnTab(),2===e._selected?e._selected=0:e._selected=2)},e}var n,c,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l.Component),n=t,(c=[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._selected=0,this._stime=0,this.props.state.checkupProg=0):this.props.view&&!e.view&&(this._selected=0)}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.state,r=e.actions,o="",i=0,s=n.checkupIdx,a=r.getData().checkup[s];a&&(o=a.question,i=a.answer);var c=["btn_true"],u=["btn_false"],p="";return 3===n.checkupProg&&(1===i?(c.push("correct"),2===this._selected&&u.push("wrong")):(u.push("correct"),1===this._selected&&c.push("wrong")),p=i===this._selected?"correct":"wrong"),l.createElement("div",{className:"s_checkup",style:t?void 0:y.NONE},l.createElement("div",{className:"question"},l.createElement("span",{className:"num"},l.createElement("span",{className:"icon "+p}),l.createElement("span",{className:"text"},s+1,".")),l.createElement("span",{className:"question"},o)),l.createElement("div",{className:"choice-box"},l.createElement(_.ToggleBtn,{className:c.join(" "),on:1===this._selected,onClick:this._clickTrue}),l.createElement(_.ToggleBtn,{className:u.join(" "),on:2===this._selected,onClick:this._clickFalse})),l.createElement(v.default,{view:t&&n.checkupProg<2&&this._selected>0,type:"pad",originY:0,sended:!1,onSend:this._onSend}))}}])&&r(n.prototype,c),p&&r(n,p),t}();c([f.observable],b.prototype,"_selected",void 0),b=c([p.observer],b),t.default=b},function(e,t,n){}]);